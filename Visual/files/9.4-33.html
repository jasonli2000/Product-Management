<html>
<link rel="stylesheet" href="../datatable/css/demo_page.css" type="text/css" id=""/>
<link rel="stylesheet" href="../datatable/css/demo_table.css" type="text/css" id=""/>
<link rel="stylesheet" href="../style.css" type="text/css" id=""/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../datatable/js/jquery.dataTables.js"></script>
<!-- Google Analytics -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-43872538-6', 'osehra.org');
 ga('send', 'pageview');
</script>


<script type="text/javascript" id="js">
  $(document).ready(function() {
  // call the tablesorter plugin
      $("#OS40LTMz").dataTable({
        "bPaginate": false,
        "bLengthChange": false,
        "bInfo": false,
        "bStateSave": true,
        "bSort": false
      });
}); </script>

<body id="dt_example"><div id="container" style="width:80%"><h1>HEALTH LEVEL SEVEN (33) &nbsp;&nbsp;  PACKAGE (9.4)</h1>
<div id="demo"><table id="OS40LTMz" class="display">
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME</td>
<td>HEALTH LEVEL SEVEN</td>
</tr>
<tr>
<td>PREFIX</td>
<td>HL</td>
</tr>
<tr>
<td>SHORT DESCRIPTION</td>
<td>DHCP IMPLEMENTATION OF HEALTH LEVEL SEVEN</td>
</tr>
<tr>
<td>DESCRIPTION</td>
<td><pre>
This package is a generic implementation the Health Level Seven (HL7)
protocol for use by all DHCP applications.  The HL7 protocol provides a
single, standard interface between computer systems for the exchange of
clinical information.
</pre>
</td>
</tr>
<tr>
<td>FILE</td>
<td>
<ol>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.1.html">HL7 FIELD</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.html">HL7 APPLICATION PARAMETER</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-770.html">HL7 NON-DHCP APPLICATION PARAMETER</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.2.html">HL7 MESSAGE TYPE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.3.html">HL7 SEGMENT TYPE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.4.html">HL7 DATA TYPE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.5.html">HL7 VERSION</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-772.html">HL7 MESSAGE TEXT</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.6.html">HL7 MESSAGE STATUS</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.7.html">HL7 ERROR MESSAGE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-771.8.html">HL7 STANDARD</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-773.html">HL7 MESSAGE ADMINISTRATION</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-779.001.html">HL7 EVENT TYPE CODE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-779.002.html">HL7 ACKNOWLEDGEMENT CODE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-779.003.html">HL7 ACCEPT/APPLICATION ACK CONDITION</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-779.004.html">COUNTRY CODE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;OVERWRITE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-870.html">HL LOGICAL LINK</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-101.html">PROTOCOL</a></dt>
<dl><dt>FIELD:</dt>
<dd>
<ol>
<li>
<dt>FIELD:  &nbsp;&nbsp;TYPE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;SERVER APPLICATION</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;CLIENT (SUBSCRIBER)</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;MESSAGE TYPE RECEIVED</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;EVENT TYPE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;PRIORITY</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;PROCESSING ID</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;LOGICAL LINK</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;ACCEPT ACK CODE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;APPLICATION ACK TYPE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;VERSION ID</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;GENERATE/PROCESS ROUTINE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;GENERATE/PROCESS ACK ROUTINE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;SENDING FACILITY REQUIRED?</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;RECEIVING FACILITY REQUIRED?</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;DATE/TIME OF MESSAGE REQUIRED?</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;SECURITY REQUIRED?</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;MESSAGE TYPE GENERATED</dt>
</li>
</ol>
</dd></dl>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;NO</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-869.2.html">HL LOWER LEVEL PROTOCOL PARAMETER</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;YES</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-869.1.html">HL LOWER LEVEL PROTOCOL TYPE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
<dt>MERGE OR OVERWRITE SITE'S DATA:  &nbsp;&nbsp;MERGE</dt>
<dt>MAY USER OVERRIDE DATA UPDATE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-869.3.html">HL COMMUNICATION SERVER PARAMETERS</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>ASSIGN A VERSION NUMBER:  &nbsp;&nbsp;YES</dt>
<dt>MAY USER OVERRIDE DD UPDATE:  &nbsp;&nbsp;NO</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
</ol>
</td>
</tr>
<tr>
<td>DEVELOPER (PERSON/SITE)</td>
<td>SAW,RJS,MFK,MTC,JRP / ALBANY ISC</td>
</tr>
<tr>
<td>*LOWEST FILE NUMBER</td>
<td>770</td>
</tr>
<tr>
<td>*HIGHEST FILE NUMBER</td>
<td>870</td>
</tr>
<tr>
<td>DEVELOPMENT ISC</td>
<td>ALBANY</td>
</tr>
<tr>
<td>CLASS</td>
<td>National</td>
</tr>
<tr>
<td>CURRENT VERSION</td>
<td>1.6</td>
</tr>
<tr>
<td>VERSION</td>
<td>
<ol>
<li>
<dt>VERSION:  &nbsp;&nbsp;1.6</dt>
<dt>DATE DISTRIBUTED:  &nbsp;&nbsp;2005-11-19 00:00:00</dt>
<dt>DATE INSTALLED AT THIS SITE:  &nbsp;&nbsp;1996-06-13 00:00:00</dt>
<dl><dt>PATCH APPLICATION HISTORY:</dt>
<dd>
<ol>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;8 SEQ #6</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1996-06-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch prevents a NULLSUBSCR error from occuring on inbound batch
acknowledgments and corrects a problem with the format of the MSA segment.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;9 SEQ #7</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1996-06-27 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch to patch number 2 corrects errors in the first and second lines
of the routines HLCS and HLCSDR2. Remaining code is unchanged.
 
The checksum values are as follows:
HLCS      value = 5044367
HLCSDR2   value = 5218053
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;16 SEQ #9</dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Informational
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;17 SEQ #10</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1996-11-04 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The ^HLCS global is reported to be growing rapidly and uncontrollably.
Mailman-type Logical Links are growing continuously because messages are
never set to a 'done' status after it is handed off to Mailman.
 
This patch corrects the problem of uncontrolled growth of file 870.
 
Further, it corrects the following miscellaneous problems:
-The date field of the zero node in ^XMB(3.9 is set incorrectly if the
background job has been running for several days. It is now updated with a
call to $$DT^XLFDT.
-The subject field of the message has been modified slightly. The sending
facility now derives the site name from the ^VASITE call.
-An effort has been made to optimize the transfer of message text from
^HLCS to ^XMB. It now uses the merge command to move text 100 lines at a
time into ^XMB. Please note that any benefit derived from this change has
not been proven yet.
 
This patch contains the following routine:
 
^HLCSMM
 
The second line now looks like this:
           ;;1.6;HEALTH LEVEL SEVEN;**17**;Oct 13, 1995
 
 
Installation
 
o      Disable all HL7 version 1.6 OUTBOUND FILERS and
wait for the process' to disappear from the system status.
 
   Select V1.6 OPTIONS Option: COMmunications Server
   1      Edit Communication Server parameters
   2      Manage incoming &amp; outgoing filers ...
   3      Monitor incoming &amp; outgoing filers
   4      Start LLP
   5      Stop LLP
   6      Systems Link Monitor
   7      Logical Link Queue Management ...
   8      Report
 
Select Communications Server Option: 2
                                     =
   1      Start default number of incoming &amp; outgoing filers
   2      Start an incoming filer
   3      Start an outgoing filer
   4      Stop all incoming filers
   5      Stop all outgoing filers
   6      Stop an incoming filer
   7      Stop an outgoing filer
 
Select Manage incoming &amp; outgoing filers Option: 5
                                                 =
 
Use the option, SYSTEMS LINK MONITOR to check the status of messages being
processed out of your active Logical Links. It will look SIMILAR to this:
 
                MESSAGES  MESSAGES   MESSAGES  MESSAGES  DEVICE  
     NODE       RECEIVED  PROCESSED  TO SEND   SENT      ON-LINE  STATE   
AMB-CARE        0         0          1         1            Y     OUT QUEUE
 
Notice that MESSAGES TO SEND and MESSAGES SENT are equal. As long as the
filers are disabled, no new messages will be queued. It is now safe to
CLEAR THE QUEUE OF ALL ENTRIES.
 
Select the option LOGICAL LINK QUEUE MANAGEMENT, then
select CLEAR A QUEUE OF ALL ENTRIES. Use this option to clear out all of
your 'Mailman' type links.
 
Now disable the logical links you have just cleared and prepare to install
this patch. Use the option, STOP LLP to shut down the links.
 
o AXP sites should check and remove HL* from their map sets.
       (Mapping of HL7 1.6 routines is not recommended at this time)
o Users may remain on the system.
o Load the KIDS BUILD FILE using the Packman option INSTALL/CHECK MESSAGE.
o On the KIDS menu, under the 'Installation' menu, use the following 
       option: 
         Select Installation Option:  Install Package(s) 
                                     ==================
         Select INSTALL NAME:  HL*1.6*17 
                              =========
         Answer 'NO' to 'Want to DISABLE Schedule Options, Menu Options,
         and Protocols?' 
o MSM Sites - Answer 'YES' to the question 'Want to MOVE routines to
       other CPUs?' Then enter the names of your other Compute and Print
       server(s).  
 
After the KIDS installation has completed, remember to re-enable all
previously disabled Logical Links (START LLP) and re-start your default
number of INBOUND and OUTBOUND filers.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;21 SEQ #13</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-01-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch enhances the purge utility by supporting a 'vaporization date'
for HL7 messages. See the patch module for details.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;18 SEQ #15</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-03-07 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The Inbound and Outbound filers can be forced into an infinite loop if
entries in file 869.3 (HL COMMUNICATION SERVER PARAMETERS) are deleted.
The file and related monitors will then not provide accurate information
regarding the number of filers actually running on your system.
 
The routine ^HLCSUTL2 has been modified to signal a filer to stop whether
the user sets the stop flag or actually deletes the entry from the file.
 
The second line of HLCSUTL2 now looks like:
 
        ;;1.6;HEALTH LEVEL SEVEN;**18**;Oct 13, 1995
 
To install this patch
=====================
 
1. Stop all running filers (select options 4 and 5, below)
 
Select Communications Server Option: MANage incoming &amp; outgoing filers
 
 
   1      Start default number of incoming &amp; outgoing filers
   2      Start an incoming filer
   3      Start an outgoing filer
   4      Stop all incoming filers
   5      Stop all outgoing filers
   6      Stop an incoming filer
   7      Stop an outgoing filer
 
 
2. AXP sites should check and remove HL* from their map sets.
       (Mapping of HL7 1.6 routines is not recommended at this time)
 
3. Users may remain on the system.
 
4. Load the KIDS BUILD FILE using the Packman option INSTALL/CHECK
MESSAGE.
 
5. On the KIDS menu, under the 'Installation' menu, use the following 
       option: 
         Select Installation Option:  Install Package(s) 
                                     ==================
         Select INSTALL NAME:  HL*1.6*18 
                              =========
         Answer 'NO' to 'Want to DISABLE Schedule Options, Menu Options,
         and Protocols?' 
 
6. MSM Sites - Answer 'YES' to the question 'Want to MOVE routines to
       other CPUs?' Then enter the names of your other Compute and Print
       server(s).  
 
7. After the KIDS installation has completed, remember to re-start your
default number of INBOUND and OUTBOUND filers. (option 1 above)
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;25 SEQ #18</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-03-21 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch is used to fix the problems described in NOIS calls: 
HUN-0297-21666, LEX-0297-41531, BAC-0297-40046, IND-0197-42390,
JAC-0297-71674, MAR-0297-20929, etc. The filers erred out abnormally when
unexpected data were encountered. This patch will catch these unexpected
data to prevent these errors.
  
It will fix the problems for the outgoing filer as follows:
 -catch the erroneous client message entry with incorrect Logical Link.
 -catch the erroneous client message entry with parent message missing.
- catch the erroneous client message entry with  illegal message type.
    
It will fix the problems for the incoming filer as follows:
 -mock MSA segment error when a batch message is received.
 -missing original outgoing message of the incoming message error.
 -missing Event Type Protocol pointer error.
  
   
ROUTINE INFORMATION 
====================
  
The following routines are included in this patch.  The second line of
 these routines now look like:
   
   &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**Patch List**;Oct 13, 1995
 
              CHECK^XTSUMBLD results
   
   Routine Name     Before Patch     After Patch       Patch List
   ------------     ------------     -----------       ----------
    HLCSOUT           3686510          4104234             25
    HLTF1            13439654          9700889          5,8,22,25
    HLTF2               N/A            4516843             25
    HLTP0             3059568          3059585             25
    HLTP01            3988246          3987933            2,25
    HLTPCK1A         10899550          9629334            2,25
     
     
INSTALLATION INSTRUCTIONS 
=========================
1. Users may remain on the system during the installation of this 
   patch. 
2. Shut down all the incoming and outgoing filers by using the 
   options: 'Stop all incoming filers' and 'Stop all outgoing filers'
3. For mapped AXP sites, disable mapping for these routines.
4. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
   option will load the KIDS package onto your system.
5. On the KIDS menu, under the 'Installation' menu,
   use the following options:
 
            Print Transport Global 
            Compare Transport Global to Current System 
            Verify Checksums in Transport Global 
            Backup a Transport Global 
 
6. On the KIDS menu, under the 'Installation' menu, use the following 
   option: 
     Select Installation Option: Install Package(s) 
                                 ================
     Select INSTALL NAME: HL*1.6*25 
                          =========
     Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
     and Protocols?'. 
7. MSM Sites - Answer 'YES' to the question 'Want to
   MOVE routines to other CPUs?'.  
   Then enter the names of your other Compute and Print server(s).  
8. AXP Sites - After the patch has been installed, rebuild your map 
   set. 
9. Restart the incoming and outgoing filers.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;26 SEQ #20</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-06-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 
Prerequisites:
=========== 
     None
 
 
Subject:
======
    
HL*1.6*26
Recognize 'out-of-order' server protocols
 
Category:
=======
*     Routine
     Enhancement (Mandatory)
*     Data Dictionary
     Sort Template
 
 
Description:
=========
This patch enables recognition of HL7 Server Protocols that have been
placed out of order as well as those Server Protocols that have no
clients. This information is returned to the HL7 calling application as an
error message while calling the entry point, INIT^HLFNC2. Two new error
messages have been added to file 771.7, HL7 ERROR MESSAGE. They are:
 
CODE: 15                                SHORT TEXT: No client
DESCRIPTION:   No clients are defined for this server protocol. Unless the
application intends to submit a specific client using the HLL("LINKS")
array, this message should not be sent.  
 
 
CODE: 16                                SHORT TEXT: Server Protocol
Disabled
DESCRIPTION:   The server protocol has been placed OUT OF SERVICE. The
message has been rejected by the HL7 Message Service. The sending
application must retain the message for later transmission.  
 
 
 
 
 
 
Test Sites :
==============
Requested by CIRN Developers
 
Routine Summary :
==============
         &lt;tab ;;1.6;HEALTH LEVEL SEVEN;**2,26**;Oct 13, 1995
 
Routine Name                      Patch List
-----------------               --------------
HLFNC2                                 2,26
 
Checksums:
=========
  Rtn Nm           Chksum Before      Chksum After        
 HLFNC2                5211111         5393929
                            
FROM CHECK^XTSUMBLD    
 
     To test if the transport has been corrupted, you can use the 
     "Verify Package Integrity" option.  This option is under Utilities 
     under the KIDS menu.  It will compare the checksums in the build 
     with the current checksums and list any that differ.
 
 
Installation Instructions:
===================
 
NOTE any instructions that are different for 486 or Alpha sites.
 
     1.   Users ARE allowed to be on the system during the 
          installation. 
     2.   You DO NOT need to place TaskMan in a WAIT/STOP state.  
     3.   Review your mapped set. If any of the routines listed in the
          Routine Summary section are mapped, they should be removed from
          the mapped set at this time.
     4.   Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. 
          This option will load the KIDS package onto your system.  
     5.   The patch has now been loaded into a Transport global on your 
          system. You now need to use KIDS to install the Transport
          global.
     6.   On the KIDS menu, under the 'Installation' menu, use the
          following options:
 
           Verify Checksums in Transport Global
           Print Transport Global 
           Compare Transport Global to Current System 
           Backup a Transport Global
           Install Package(s) 
           INSTALL NAME: HL*1.6*26
     7.   MSM Sites - Answer YES to the question 'Want to MOVE 
     routines to other CPUs?'. Enter the names of your Compute and 
     Print server(s).
     AXP Sites - Answer NO to this question.
     8.   Rebuild your mapped set if necessary.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;28 SEQ #21</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-06-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
More control over Inbound/Outbound Filer processes
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;29 SEQ #22</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-06-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch fixes the problems as described in NOIS #BRX-0896-12049.
The problems come from the "date.time" subscript of the ^TMP("HL",
^TMP("HLR", and ^TMP("HLS", which is not correctly set to comply with
the FileMan format.
 
 
Test Sites:
===========
 
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
Checksums:
==========
 
  Routine Name     Checksum Before     Checksum After       Patch List
  ------------     ---------------     --------------       ----------
      HLLP            13472823           13466846            1,12,29
 
 From CHECK^XTSUMBLD  
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  Stop all the HLLP logical links for v 1.5 interface.  
  3.  AXP SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  5.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*29
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  6.  MSM Sites - Answer 'YES' to the question 'Want to MOVE routines to
      other CPUs?'. Enter the names of your Compute and Print server(s).
  7.  AXP Sites: Rebuild your mapped set if necessary.
  8.  Restart all the HLLP logical links which have been stopped at step
      2.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;23</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-07-08 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch adds a new entry into the Country Code file (#779.004) to
solve the problem as describled in NOIS ISF-0297-60099. This new entry
contains a 2-character Country Code, "US" (United States of America), in
order to conform to the ISO 3166 standard.
 
 
Installation Instructions:
==========================
 
  1.   Users are allowed to be on the system during the installation.
  2.   Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.  
  3.   The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s)
         INSTALL NAME: HL*1.6*23
                       ==========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
 
  4.   MSM Sites - Answer 'NO' to the question 'Want to MOVE routines to
       other CPUs?'.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;24</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-07-17 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch will do the following to correct the problems found in DD and
data in files #772 and #771.7:
  1.  Rewrite the KILL logic for the 'AXMITOUT1' cross-reference of
      'Logical Link' field (#772,11) in the HL7 Message Text file (#772).
  2.  Rewrite the KILL logic for the 'AXMITOUT2' cross-reference of
      'Status' field (#772,20) in the HL7 Message Text file (#772).
  3.  Modify DD of 'Error Type' field (#772,23) in the HL7 Message Text
      file (#772).
  4.  Modify data of the entry, CODE=1, in the HL7 Error Message file
      (#771.7).
 
Test Sites :
==============
 
 
Installation Instructions:
==========================
  1.   Patch HL*1.6*26 must be installed before this patch.
  2.   Users are allowed to be on the system during the installation.
  3.   Shut down all the outgoing filers.
  4.   Shut down all the incoming filers.
  5.   No routine mapping for this patch.
  6.   Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. 
       This option will load the KIDS package onto your system.  
  7.   The patch has now been loaded into a Transport global on your
       system.  You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*24
                       ==========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  8.   MSM Sites - Answer 'NO' to the question 'Want to MOVE routines
          to other CPUs?'.
  9.   Restart all the outgoing and incoming filers which have been shut
       down at step 2 and 3.
 10.   You may delete the post-install routine 'HLPAT24' after you have
       successfully installed this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;33 SEQ #26</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-08-28 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch provides two new features, "Don't Purge" and "Reprocessing"
messages, which were requested by the CIRN project.  The new extrinsic
function calls allow the VISTA/DHCP applications to interface with HL7
in the following ways:
 
  1.  Set the new flag field "DON'T PURGE" (#772,15) to prevent a message
      being purged by the "HL PURGE TRANSMISSIONS" option.  Either of the
      following two extrinsic functions may be used for this purpose:
               $$DONTPURG^HLCIRN or $$SETPURG^HLCIRN(1)
   
  2.  Clear the flag field "DON'T PURGE" (#772,15) to allow the message
      to be purged by the "HL PURGE TRANSMISSIONS" option. Either of the
      following two extrinsic functions may be used for this purpose:
               $$TOPURG^HLCIRN or $$SETPURG^HLCIRN(0)
 
  3.  Reprocessing the message by calling the extrinsic function:
                  $$REPROC^HLCIRN(IEN,RTN)
        where:  IEN is the child message IEN (or the parent message IEN).
                RTN is the routine to be Xecuted for reprocessing the
                message.
 
 
These extrinsic functions and their associated parameters, return values,
and results are described as follows:
 
  $$DONTPURG^HLCIRN():
     purpose:       to set the "DON'T PURGE" field (#772,15).
     input:         none
     return value:  1   means field has been successfully set
                    -1  means call has failed; nothing has been changed
  
  $$TOPURG^HLCIRN():
     purpose:       to clear the "DON'T PURGE" field (#772,15).
     input:         none
     return value:  0   means field has been successfully cleared
                    -1  means call has failed; nothing has been changed
 
  $$SETPURG^HLCIRN(STATUS):
     purpose:       either to set (STATUS=1) or to clear (STATUS=0) the
                    "DON'T PURGE" field (#772,15).
     input:         STATUS=1  used to set the "DON'T PURGE" field.
                    STATUS=0  used to clear the "DON'T PURGE" field.
     return value:  1   means field has been successfully set
                    0   means field has been successfully cleared
                    -1  means call has failed; nothing has been changed
  
  $$REPROC^HLCIRN(IEN,RTN):
     purpose:       to reprocess message.
     input:         IEN= the child message IEN (or the parent message
                         IEN) of file #772.
                    RTN= routine, to be Xecuted for reprocessing the
                         message.
     return value:  0  means call has been successfully completed
                    -1 means call has failed; nothing has been changed
 
The extrinsic functions, $$DONTPURG^HLCIRN(), $$TOPURG^HLCIRN(), and
$$SETPURG^HLCIRN(STATUS) should be called by one of the following
routines:
    - RTN routine, which is provided to $$REPROC^HLCIRN(IEN,RTN).
    - routine stored in field "GENERATE/PROCESS ROUTINE"(#101,771).
    - routine stored in field "GENERATE/PROCESS ACK ROUTINE"(#101,772). 
 
When called by these routines, HL7 assumes that the variables,
HLMTIENS(child message IEN of file #772) and HLMTIEN(parent message IEN of
file #772), are already properly defined.  Otherwise, if they are called
elsewhere, at least the HLMTIEN should be defined in order to make them to
work.  If only HLMTIEN is defined, then the call will only update the
entry of parent message. Of course, having only a defined HLMTIENS is
enough for HL7 to find the corresponding value for HLMTIEN, and
consequently HL7 will update entries for both child and parent massages.
 
The IEN, which is provided to $$REPROC^HLCIRN(IEN,RTN) should be the child
message IEN of file #772.  This will make HL7 update the "STATUS" for both
child and parent message entries.  If the IEN is the parent message IEN,
then only the "STATUS" of the parent message entry will be updated.
 
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
   
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
   
   
Checksums:
==========
   
    Routine Name     Checksum Before     Checksum After       Patch List
    ------------     ---------------     --------------      ------------
      HLCIRN               N/A              4336697               33
      HLTPCK1            4288888            4143076               8,33
      HLUOPT1            9958836            9990663           10,13,21,33
 
   From CHECK^XTSUMBLD  
   
   
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  Check and make sure that the 'HL PURGE TRANSMISSIONS' option is not
      scheduled during the time of installation.
  3.  Stop all the incoming filers.  
  4.  AXP SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  5.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  6.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
   
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*33
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  7.  MSM Sites - Answer 'YES' to the question 'Want to MOVE routines to
      other CPUs?'. Enter the names of your Compute and Print server(s).
  8.  AXP Sites: Rebuild your mapped set if necessary.
  9.  Restart all the incoming filers, which have been stopped in step #3.
 10.  Re-schedule 'HL PURGE TRANSMISSIONS' option if this option was
      scheduled and has been stopped in step #2. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;35 SEQ #27</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-05-11 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch contains changes to the Mailman LLP to further improve
performance and IO issues and ensure the process dies off after a shutdown
request.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;36 SEQ #28</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-06-16 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch provides two new features, "Don't Purge" and "Reprocessing"
messages, which were originally requested by the CIRN project.  The new
extrinsic function calls allow the VISTA/DHCP applications to interface
with HL7 in the following ways:
 
  1.  Set the new flag field "DON'T PURGE" (#772,15) to prevent a message
      being purged by the "HL PURGE TRANSMISSIONS" option.  The following
      extrinsic function may be used for this purpose:
               $$DONTPURG^HLUTIL()
 
 2.  Clear the flag field "DON'T PURGE" (#772,15) to allow the message
      to be purged by the "HL PURGE TRANSMISSIONS" option. The following
      extrinsic function may be used for this purpose:
               $$TOPURG^HLUTIL()
 
  3.  Reprocessing the message by calling the extrinsic function:
                  $$REPROC^HLUTIL(IEN,RTN)
        where:  IEN is the child message IEN (or the parent message IEN).
                RTN is the routine to be Xecuted for reprocessing the
                message.
 
 
 These extrinsic functions and their associated parameters, return values,
 and results are described as follows:
 
  $$DONTPURG^HLUTIL():
     purpose:       to set the "DON'T PURGE" field (#772,15).
     input:         none
     return value:  1   means field has been successfully set
                    -1  means call has failed; nothing has been changed
 
  $$TOPURG^HLUTIL():
     purpose:       to clear the "DON'T PURGE" field (#772,15).
     input:         none
     return value:  0   means field has been successfully cleared
                    -1  means call has failed; nothing has been changed
 
  $$REPROC^HLUTIL(IEN,RTN):
     purpose:       to reprocess message.
     input:         IEN= the child message IEN (or the parent message
                         IEN) of file #772.
                    RTN= routine, to be Xecuted for reprocessing the
                         message.
     return value:  0  means call has been successfully completed
                    -1 means call has failed; nothing has been changed
 
The extrinsic functions, $$DONTPURG^HLUTIL(), $$TOPURG^HLUTIL(), should be
called by one of the following routines:
    - RTN routine, which is provided to $$REPROC^HLUTIL(IEN,RTN).
    - routine stored in field "GENERATE/PROCESS ROUTINE"(#101,771).
    - routine stored in field "GENERATE/PROCESS ACK ROUTINE"(#101,772). 
 
When called by these routines, HL7 assumes that the variables,
HLMTIENS(child message IEN of file #772) and HLMTIEN(parent message IEN of
file #772), are already properly defined.  Otherwise, if they are called
elsewhere, at least the HLMTIEN should be defined in order to make them to
work.  If only HLMTIEN is defined, then the call will only update the
entry of parent message. Of course, having only a defined HLMTIENS is
enough for HL7 to find the corresponding value for HLMTIEN, and
consequently HL7 will update entries for both child and parent massages.
 
The IEN, which is provided to $$REPROC^HLUTIL(IEN,RTN) should be the child
message IEN of file #772.  This will make HL7 update the "STATUS" for both
child and parent message entries.  If the IEN is the parent message IEN,
then only the "STATUS" of the parent message entry will be updated.
 
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
Checksums:
==========
 
    Routine Name     Checksum Before     Checksum After       Patch List
    ------------     ---------------     --------------       -----------
      HLUTIL               N/A               4603738              36
      HLTPCK1            4288888             4288888             8,36
      HLUOPT1            9958836             9990663          10,13,21,36
 
 From CHECK^XTSUMBLD
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  Check and make sure that the 'HL PURGE TRANSMISSIONS' option is not
      scheduled during the time of installation.
  3.  Stop all the incoming filers.
  4.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  5.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  6.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
   
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*36
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  7.  DSM Sites: Rebuild your mapped set if necessary.
  8.  Restart all the incoming filers, which have been stopped in step #3.
  9.  Re-schedule 'HL PURGE TRANSMISSIONS' option if this option was
      scheduled and has been stopped in step #2. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;38 SEQ #29</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-06-16 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problems:
  NOIS ISF-1097-61155: The M10 and M11 check digit algorithms do not
                       comply with the HL7 Standard.
 
The two extrinsic functions, $$M10^HLFNC(X,HLECDE) and
$$M11^HLFNC(X,HLECDE) are calls for the new and HL7 Standardized
algorithms for M10 and M11, respectively.
  
However, old and non-Standard algorithms calls has been moved to calls,
$$OLDM10^HLFNC(X,HLECDE) and $$OLDM11^HLFNC(X,HLECDE).
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
   
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
   
   
Checksums:
==========
   
    Routine Name     Checksum Before     Checksum After       Patch List
    ------------     ---------------     --------------      ------------
      HLFNC              5564618             6477455             38
 
    From CHECK^XTSUMBLD 
 
   
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  3.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  4.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
   
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*38
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  5.  DSM Sites: Rebuild your mapped set if necessary.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;34 SEQ #30</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-06-16 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problems:
  1.  IND-0797-40843: A corrupted message with message ID missing crashed
                      the HL7 incoming filer.
  2.  SLC-0897-50592: eliminates priority setting in HLLP processes.
  3.  STX-0897-70964: An unexpected message block sequence, issued by the
                      VIC machine, blew out the HL7 LLP process.
  4.  IND-0198-40985: system monitor/process priority.
  5.  Fixes the problem with undefined application name in fields (MSH;3)
                      and/or (MSH;5).
  6.  Corrects a problem with messages that are dynamically addressed over
      mailman-type logical link (see patch 14 documentation). The system
      link monitor was not updated correctly.
 
PLEASE SEE THE PATCH MODULE FOR DETAILS. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;41 SEQ #31</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-06-18 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
PATCH FOR PATCH 34. Missing routine HLUTIL3.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;42 SEQ #32</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-08-31 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problems:
  NOIS PHI-0798-20072 and PHI-0698-22536: Patient ID with alphanumeric
                                          data type.
 
The two extrinsic functions, $$M10^HLFNC(X,HLECDE) and
$$M11^HLFNC(X,HLECDE) have been improved for the input ID with
alphanumeric data type.  The additional output will be as follows:
 
 1. Return X concatenated with encoding characters, if X is alphanumeric.
 2. Return the input X only, if encoding character is not defined.
 
Nothing has been changed for the numeric data type input with encoding
character, its result will contain the X with its corresponding check
digit and algorithms.
 
For example,
 
      &gt;W $$M10^HLFNC("12345","|")
       12345|5|M10
 
      &gt;W $$M10^HLFNC("9999","^")
       9999^4^M10
 
      &gt;W $$M11^HLFNC("128952","^")
       128952^7^M11
 
      &gt;W $$M11^HLFNC("1234567","|")
       1234567|4|M11
 
      &gt;W $$M11^HLFNC("1234-F","|")
       1234-F||
 
      &gt;W $$M10^HLFNC("401-56-1234","^")
       401-56-1234^^
 
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
Checksums:
==========
 
    Routine Name     Checksum Before     Checksum After       Patch List
    ------------     ---------------     --------------      ------------
      HLFNC              6477455             6494537             38,42
 
    From CHECK^XTSUMBLD 
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  3.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  4.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
   
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*42
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  5.  DSM Sites: Rebuild your mapped set if necessary.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;14 SEQ #33</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-10-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 
HL*1.6*14 introduces the following new features as part of the CIRN
project and addresses a number of NOIS related issues:
 
1.  Dynamic addressing of messages
2.  Subscription registry (new file and APIs)
3.  Auto-restart of logical links
4.  Mapping of logical links to institutions (and related api's)
5.  A new option to shut down all logical links
6.  HL7 reference file updates to support draft 2 of HEALTH LEVEL SEVEN, 
    Version 2.3
 
Please see the patch module on Forum for details.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;37 SEQ #34</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-10-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problems:
 NOIS ISB-1097-32281: Batch message transmission problems for both initial
 and acknowledgement messages with missing acknowledgement code, reference
 batch control ID, etc.  This was causing UNDEFINED variable errors in
 HLTP01+47^HLTP01.
 
 Routine Summary:
 ================
 The following is a list of the routines included in this patch.  The
 second line of each of these routines now looks like:
 
      &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
 Checksums:
 ==========
 
     Routine Name     Checksum Before     Checksum After       Patch List
     ------------     ---------------     --------------      ------------
       HLCSHDR           5439890             6047496              37
       HLTP0             3059585             3159167             25,37
 
     From CHECK^XTSUMBLD 
 
 
 Installation Instructions:
 ==========================
   1.  Users are allowed to be on the system during the installation.
   2.  Stop all the outgoing and incoming filers by using the HL7 "Stop
       all incoming filers" and "Stop all outgoing filers" options.
   3.  DSM SITES: Review your mapped set.  If any of the routines listed
       in the Routine Summary section are mapped, they should be removed
       from the mapped set at this time.
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.  
   5.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
 
          Verify Checksums in Transport Global
          Print Transport Global 
          Compare Transport Global to Current System 
          Backup a Transport Global
          Install Package(s) 
          INSTALL NAME: HL*1.6*37
                        =========
          Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
          and Protocols?'.
   6.  DSM Sites: Rebuild your mapped set if necessary.
   7.  Restart the outgoing and incoming filers, by using the HL7 "Start
       default number of incoming &amp; outgoing filer" option, which have
       been stopped in step #2.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;15 SEQ #14</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-01-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;40 SEQ #35</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-11-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
DEVELOPERS: SEE BELOW FOR DESCRIPTION OF A NEW API
Summary:
 
1. Enhancements to Systems Link Monitor:
       -more information in header to help distinguish multiple displays.
       -provides both a full and abbreviated display format, as well as a
        help screen
2. Additional required Messaging site parameters added to file 869.3.
3. Updated option "Edit Communication Server Parameters" to support new
   site parameters.
4. New field in 869.3 to support a local mail group for Messaging system
   alerts and notifications.
5. New public FUNCTION CALL to retrieve an application-specific mail group
   for alerts and notifications pertaining to initiating or processing a
   particular transaction. The second piece returned is the
   active/inactive flag.
 
GETAPP^HLCS2(HLAPP)
  ;Function to Retrieve parameters pertaining to a specific
sending or receiving application
        ;HLAPP=APPLICATION NAME OR IEN OF FILE 771
        ;Returns MAIL GROUP NAME^'a' or 'i' (active or inactive) 
 
EXAMPLE:KRN,KDE&gt;S ZZPARMS=$$GETAPP^HLCS2("JC TEST SERVER") W ZZPARMS
 
RESULT: ZZPARMS=JOHN^a
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;19 SEQ #36</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-02-23 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
=============================================================================
Description:
============
This patch introduces TCP/IP as a transport layer for the HL7 package. 
For information on how to work with TCP/IP HL7 interfaces, see the new 
"DHCP HL7 User Manual: TCP/IP Supplement", which is in the file
HL71_6P19.PDF, available from the Customer Service anonymous directories.

This patch will convert the messages in HL7 MESSAGE ADMINISTRATION, file 773,
and in HL7 MESSAGE TEXT, file 772. To speed up the conversion, run the
'Purge Message Text File Entries' option to remove old messages.
  
Earlier version of Patch 19, prior to test version 25, are Uni-directional.
All TCP Logical Links must be redefined to work with this version of patch
19.  Messages might also need to be modified.



Routine Modifications:
======================
The following routines are included in this patch.  The second line of
these routines now look like:
  
  &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**19**;JUL 17, 1995

CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ==========
 HLCS            5666872         5781112        **2,9,14,19**
 HLCS1          10146376        10172566        **19**
 HLCSHDR         6047496         5939243        **37,19**
 HLCSHDR1        NEW             6658466        **19**
 HLCSIN          2120979         2517664        **2,30,14,19**
 HLCSLNCH        7065769        11290939        **6,19**
 HLCSRPT         NEW            14324083        **19**
 HLCSRPT1        NEW             9680356        **19**
 HLCSTCP         NEW             3731985        **19**
 HLCSTCP1        NEW             4613833        **19**
 HLCSTCP2        NEW             7316489        **19**
 HLCSUTL         4322424         5134775        **2,19**
 HLDTIW2B        5008365         5012027        **14,19**
 HLDTIWP0        7906384         7922736        **19**
 HLDTIWU3        2154979         2083370        **19**
 HLMA            3791837         3745291        **19**
 HLMA1           4194174         4230657        **19**
 HLMA2           1082489         3410765        **19**
 HLPAT19         NEW              845483        **19**
 HLTF            7445472         7170159        **1,19**
 HLTF0           4765190         3173064        **12,19**
 HLTF1           9700889         9479987        **5,8,22,25,19**
 HLTP3           NEW            12380779        **19**
 HLTP4           NEW             7754632        **19**
 HLTPCK2         NEW             3804314        **19**
 HLTPCK2A        NEW            11350701        **19**
 HLUOPT1         9990663        11568432        **10,13,21,36,19**
 HLUTIL          4603738         1343106        **36,19**
 HLUTIL2         3877956         5547421        **19**



Installation Instructions:
==========================    
  1.  Use the option 'Purge Message Text File Entries' option to remove
      old messages. Suggested answers:

    Enter the cutoff date for all messages REGARDLESS OF STATUS:  T-90// T-28
    Enter last INCLUSIVE date for status SUCCESSFULLY TRANSMITTED:  T-7// T-2
    Purge entries with an ERROR STATUS?  NO// YES
    Cutoff date for AWAITING ACKNOWLEDGEMENT status:  T-30// T-7

  2.  Make sure all messages have been transmitted.  Run the option 'Systems
      Link Monitor', under the 'Communications Server' menu, and make sure
      'messages to send' is equal to 'messages sent' for all Logical Links.

  3.  Shutdown all Logical Links and incoming and outgoing filers. Use the
      'Shut Down All Logical Links', 'Stop all incoming filers', and 'Stop
      all outgoing filers' options.

  4.  User are NOT allowed on the system during installation.  Inhibit logins
      and place Taskman in a wait state, use the option 'Place Taskman in a
      WAIT State'.  Have the submanager shutdown after finishing their current
      task.

  5.  Some of these routines are new.  Currently we do not recommend that you
      add these routines to your map set.
  
  6.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. This
      option loads the KIDS package into a Transport global onto your
      system.

  7.  You now need to use KIDS to install the Transport global. From programmer
      prompt Do ^XPDKRN.
  
  8.  On the KIDS menu, under the Installation menu, use the following
      options:
  
         2 Verify Checksums in Transport Global
         3 Print Transport Global
         4 Compare Transport Global to Current System
         5 Backup a Transport Global
         6 Install Package(s)
             INSTALL NAME: HL*1.6*19
                           =========

      The length of the install depends on the size of file 772.  The average
      install takes about 15 minutes for 40,000 entries in file 772. 

  9.  Allow users back on the system and remove Taskman from wait state,
      use the option 'Remove Taskman from WAIT State'.

 10.  Use the 'Edit Communication Server parameters' option to add a Mail
      Group to the 'Mail Group for Alerts' field.

 11.  Startup all Logical Links and incoming and outgoing filers. Use the
      'Restart All Links and Filers' option.


=============================================================================  
Data Dictionary Modifications:
============================== 

 869.1  HL LOWER LEVEL PROTOCOL TYPE
        No modifications were made to the data dictionary.  One record,
        TCP, has been added and will be merged into your current data.
 
 869.2  HL LOWER LEVEL PROTOCOL PARAMETER
 
        400.01    TCP/IP ADDRESS (F)  [400;1]
        400.02    TCP/IP PORT (NJ5,0)  [400;2]
        400.03    TCP/IP SERVICE TYPE (S)  [400;3]
        400.04    PERSISTENT (S)  [400;4]
        400.06    STARTUP NODE (P14.7)  [400;6]

 771.6  HL7 MESSAGE STATUS
        No modifications were made to the data dictionary.  Several new
        statuses have been added and will overwrite your current data.

 771.7  HL7 ERROR MESSAGE
        No modifications were made to the data dictionary.  Several new
        errors messages have been added and will overwrite your current data.

 772  HL7 MESSAGE TEXT
        The .01 field, DATE/TIME ENTERED, has been changed from a pointer to
        a date/time field.

 773  HL7 MESSAGE ADMINISTRATION
        The .01 field, DATE/TIME ENTERED, has been changed from a date/time to
        a pointer to file 772.  Fields have been added to this file for bi-
        directional TCP messages.


New Option
============================== 

'View Transmission Log'     Option name: HL VIEW TRANSMISSION LOG
     This option is used to view the Transmission Log; i.e.,
     the Message Administration File entries.  It displays those
     messages that have been sent or are pending. Display of
     messages with HL7 errors or exceptions is not yet supported.

New Alert
==============================
If a message exceeds the 'RE-TRANSMISION ATTEMPTS' for a Logical Link, an
alert will be generated.  The alert will be sent to the Mail Group defined
in the HL COMMUNICATION SERVER PARAMETERS file, 869.3.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;43 SEQ #37</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-04-27 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following issues:
   
1. Support is provided for connecting to the Master Patient Index (MPI).
2. FileMan auditing ordinarily depends on DUZ, but when VA FileMan records
   are updated by subscriber protocols, DUZ is undefined, disabling
   audting. Changes in this patch combined with changes that will be 
   released VA FileMan V22.0 allow auditing based on subscriber protocol,
   rather than DUZ.
3. Autostart of a Logical Link now uses the AUTOSTART NODE field in the
   HL LOWER LEVEL PROTOCOL PARAMETER file.
4. The API GENERATE^HLMA would return the parameter HLRESLT, when passed
   by reference, equal to the message id.  But, multiple messages could
   have been generated.  This patch will now also return the array 
   HLRESLT, where HLRESLT(1)=2nd message id.
 
Routine Modifications:
======================
The following routines are included in this patch.  The second line of
these routines now look like:
  
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ==========
 HLCS            5781112         5743323        2,9,14,19,43
 HLCS2           4802116         7195833        14,40,43
 HLCSAC          NEW             2497076        43
 HLCSAS          NEW             2943880        43
 HLCSAS1         NEW             1742491        43
 HLCSLNCH       11290939        11368535        6,19,43
 HLCSTCP         3731985         4005742        19,43
 HLCSTCP1        4613833         4899040        19,43
 HLCSTCP2        7316489         7436704        19,43
 HLMA            3745291         5502295        19,43
 HLMA1           4230657         3849338        19,43
 HLMA2           3410765         7300625        19,43
 HLTF            7170159         7284127        1,19,43
 HLTP            5532648         4283999        14,43
 HLTP3          12380779        12440103        19,43
 HLUTIL2         5547421         5380198        19,43
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
 
  3.  Shutdown all Logical Links and incoming and outgoing filers. Use the
      'Shut Down All Logical Links', 'Stop all incoming filers', and 'Stop
      all outgoing filers' options.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         2 Verify Checksums in Transport Global
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*43
                           =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the
      'Restart All Links and Filers' option.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;51 SEQ #39</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-05-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 
The CIRN developers was the first to discover and report a problem with
the function $$FMNAME^HLFNC(X,HLECDE). Additional details of their
findings are recorded in NOIS: BAY-0499-31160.
 
 If the variable X is used as the first parameter of this function
 and has a value of DOE~JOHN~""~SR
  
 this function when invoked (e.g.:  S Y=$$FMNAME^HLFNC(X,"~")         )
 would return the following value:  DOE,JOHNSR
 
 This occurred because this function specifically checked from the second
 component to the last whether the next component contained two
 double quotes (e.g.: "") or had no value.  When this condition was
 encountered, this function did not place a space between each
 component and the component immediately following starting from the
 second.
  
 After this patch is installed, the return value will now be DOE,JOHN SR
 for the above example.
 
 The following code may be used in programmer mode to test this function:
 NOTE:  The '&gt;' character is the mumps programmer prompt.
 
 &gt;R X
 DOE~JOHN~""~SR         &lt;---Enter this data on the READ command.
 &gt;W $$FMNAME^HLFNC(X,"~")
 DOE,JOHN SR            &lt;---This should be the the result after this patch
                           is installed.
 You may also try the following:
 &gt;W $$FMNAME^HLFNC("DOE~JOHN~~SR","~")
 DOE,JOHN SR
 
Before this patch is installed, you should have installed patch HL*1.6*42.
 
Routine Summary: 
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995 
 
Checksums: 
==========
 
    Routine Name     Checksum Before     Checksum After       Patch List 
    ------------     ---------------     --------------      ------------
      HLFNC              6494537             5785780           38,42,51
 
    From CHECK^XTSUMBLD 
 
 
Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
  3.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
  4.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
   
         Verify Checksums in Transport Global 
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global 
         Install Package(s) 
         INSTALL NAME: HL*1.6*51 
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
  5.  DSM Sites: Rebuild your mapped set if necessary.  
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;48 SEQ #40</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-06-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problems:
  NOIS BHH-0299-40326: The Logical Links, displayed on the System Monitor
                       last screen, were duplicates from some of the
                       Logical Links of its previous screen.
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
Checksums:
==========
 
    Routine Name     Checksum Before     Checksum After       Patch List
    ------------     ---------------     --------------      ------------
      HLCSMON           9246839             9506155            34,40,48
 
    From CHECK^XTSUMBLD 
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  3.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  4.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*48
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  5.  DSM Sites: Rebuild your mapped set if necessary.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;44 SEQ #41</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-06-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problem:
  To prevent an "undefined variable HLDP" error for the X3.28 lower level
  protocol. This error occurs when starting the LLP, it fails to establish
  a connection and autostart is enabled.
 
 Routine Summary:
 ================
 The following is a list of the routines included in this patch.  The
 second line of each of these routines now looks like:
 
      &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
 Checksums:
 ==========
 
     Routine Name     Checksum Before     Checksum After       Patch List
     ------------     ---------------     --------------      ------------
       HLCSDL             4175013            4198429             2,44
 
     From CHECK^XTSUMBLD 
 
 
 Installation Instructions:
 ==========================
   1.  Users are allowed to be on the system during the installation.
   2.  Use the HL7 "Stop LLP" to stop the LLPs, which are executed in
       X3.28 protocol.
   3.  DSM SITES: Review your mapped set.  If any of the routines listed
       in the Routine Summary section are mapped, they should be removed
       from the mapped set at this time.
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.  
   5.  The patch has now been loaded into a Transport global on your
       system. You now need to use KIDS to install the Transport global.
       On the KIDS menu, under the 'Installation' menu, use the following
       options:
 
          Verify Checksums in Transport Global
          Print Transport Global 
          Compare Transport Global to Current System 
          Backup a Transport Global
          Install Package(s) 
          INSTALL NAME: HL*1.6*44
                        =========
          Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
          and Protocols?'.
   6.  DSM Sites: Rebuild your mapped set if necessary.
   7.  Restart the LLPs by using the HL7 "Start LLP" option, which have
       been stopped in step #2.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;55 SEQ #42</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-07-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch corrects the problem identified in NOIS IVM-0499-31407,
message IDs no longer created for version 1.5 messages.


Routine Modifications:
======================
The following routines are included in this patch.  The second line of
these routines now look like:
  
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ==========
 HLTF             7284127        7261750        1,19,43,55
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
 
  3.  Shutdown all Logical Links and incoming and outgoing filers. Use the
      'Shut Down All Logical Links', 'Stop all incoming filers', and 'Stop
      all outgoing filers' options.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         2 Verify Checksums in Transport Global
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*55
                           =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the
      'Restart All Links and Filers' option.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;50 SEQ #43</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-07-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Description:
============
This patch requires running the purge message option and shutting down
all links and filers before installing the patch.
 
This patch provides both additional functionality and NOIS fixes.
 
First, it provides fixes for the following NOISes:  BAC-0599-40603 and 
IND-0599-40402. One NOIS reported, in some cases, a failure to display 
the message text after selecting an individual record from the list. 
The other NOIS reported the routine HLCSRPT errorred out with an 
undefined variable message in some circumstances. 
 
Second, additional functionality is provided as follows:
Refined message searchs. The messages search is now expanded to allow
the user to select a message search based any combination (or all) of
the search fields. They include status code, message type, event type
and logical link. The default entry for each field is "ALL". As before,
all message searching will be limited to a user entered start date/time.
The single criteria message searching is replaced with this enhanced 
searching capability. 
Pending messages. The option for pending messages has not changed.
Error listing. An option providing for the display of messages that
are in an error status is added. The default is all errorred messages,
but the user may select a specific error code.
 
This patch also contains the DD for file 773, Message Administration
File. It adds a new cross-reference, "AG", which pertains to the
Status field. A Post-Install routine is run to set the cross-reference.
 
Routine Summary:
================
The following routines are included in this patch.  The second line of
each
of these routines now looks like:
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
                 Checksum
Routine           Old       New        2nd Line
HLCSRPT         14324083  10630512     **19,50**
HLCSRPT1         9680356  13849369     **19,50**
HLCSRPT2          NEW     18087507     **50**
HLCSRPT3          NEW     10792707     **50**
HLP50PST          NEW        36805     **50**
 
List of preceding patches: 19
Sites should use CHECK^XTSUMBLD to verify checksums.
 
Installation Instructions:
==========================    
  1.  Use the option 'Purge Message Text File Entries' option to remove
      old messages.
 
  2.  Make sure all messages have been transmitted.  Run the option
'Systems
      Link Monitor', under the 'Communications Server' menu, and make sure
      'messages to send' is equal to 'messages sent' for all Logical
Links.
 
  3.  Shutdown all Logical Links and incoming and outgoing filers. Use the
      'Shut Down All Logical Links', 'Stop all incoming filers', and 'Stop
      all outgoing filers' options.
 
  4.  User are allowed on the system during installation.  Do NOT inhibit
logins
      and do NOT place Taskman in a wait state.
 
  5.  Some of these routines are new.  Currently we do not recommend that
you
      add these routines to your map set.
  
  6.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. This
      option loads the KIDS package into a Transport global onto your
      system.
 
  7.  You now need to use KIDS to install the Transport global. From
programmer
      prompt Do ^XPDKRN.
  
  8.  On the KIDS menu, under the Installation menu, use the following
      options:
  
         2 Verify Checksums in Transport Global
         3 Print Transport Global
         4 Compare Transport Global to Current System
         5 Backup a Transport Global
         6 Install Package(s)
             INSTALL NAME: HL*1.6*50
                           =========
 
  9.  Startup all Logical Links and incoming and outgoing filers. Use the
      'Restart All Links and Filers' option.
 
 
==========================================================================
===  
Data Dictionary Modifications:
============================== 
 
 773  HL7 MESSAGE ADMINISTRATION
        The STATUS field, #20, has been changed to add the "AG"
cross-reference.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;47 SEQ #44</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-07-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch has made changes for the following:
 
 1. Adds three new fields in HL COMMUNICATION SERVER PARAMETERS file
    (#869.3): 
 
    - Field #869.3,41 PURGE COMPLETED MESSAGES:  The number of days
      "Successfully Completed" messages are retained before they are
      purged.  If no value is entered, the default is 7 days.  Used as the
      actual value when the "Purge Messages" option is scheduled through
      TaskMan, and as the default when run interactively.
 
    - Field #869.3,42   PURGE AWAITING ACK MESSAGES:  The number of days
      "Awaiting Application Acknowledgement" messages are retained before
      they are purged.  If no value is entered, the default is 30 days.
      Used as the actual value when the "Purge Messages" option is
      scheduled through TaskMan, and as the default when run
      interactively.
 
    - Field #869.3,43  PURGE ALL MESSAGES:  The number of days that any
      status message are retained before they are purged(except for ERROR
      status messages).  If no value is entered, the default is 90 days.
      Used as the actual value when the "Purge Messages" option is
      scheduled through TaskMan, and as the default when run
      interactively.
 
    Please find the following HL7 options to enter or change data for
    fields described above:
 
      step 1. HL MAIN MENU
      step 2. Communications Server ...
      step 3. Edit Communication Server parameters
 
      And then you will enter the FileMan ScreenMan form as follows:
    
     --------------------------------------------------------------------
 
                              Edit HL7 Site Parameters
 
 
                           Current Domain: NXT.KERNEL.ISC-SF.DOMAIN.EXT      
                      Current Institution: ISC SAN FRANCISCO             
     Is this a Production or Test Account? test      
 
        Default Number of Incoming Filers: 1 
        Default Number of Outgoing Filers: 1 
 
                    Mail Group for Alerts: HL7                           
 
          Days to Keep Completed Messages: 7  
       Days to Keep Awaiting ACK Messages: 30 
         Days Before Purging All Messages: 90 
 
      ________________________________________________________________
 
 
      COMMAND:                                    Press &lt;PF1&gt;H for help
      Insert
 
      -----------------------------------------------------------------
 
    The old method which was used to change the data for the above three
    fields, by entering numbers in the TASK PARAMETERS field of the OPTION
    SCHEDULING FILE, will be replaced by this new method as described
    above, when the "Purge Message Text File Entries [HL PURGE
    TRANSMISSIONS]" OPTION is scheduled to TaskMan.
 
 2. Brings in updated data for files: HL7 MESSAGE STATUS and HL7 ERROR
    MESSAGE, these two files can only be used by HL7 routines.
 
 3. Solves problems for NOIS ISF-0499-63255: Entries existed in file #773
    with broken pointers to file #772.
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
Checksums:
==========
 
  Routine Name    Checksum Before    Checksum After       Patch List
  ------------    ---------------    --------------     -----------------
    HL47PRE            new               613093                 47
    HLUOPT1          11568432          13112533          10,13,21,36,19,47
    HLTP01            5246181           5245980             2,25,34,47
    HLTP1             4286152           4286011               34,47
 
    From CHECK^XTSUMBLD 
 
                                              
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  Check and make sure that the 'HL PURGE TRANSMISSIONS' option is not
      scheduled during the time of installation.
  3.  Stop all the Logical links, incoming and outgoing filers.
  4.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  5.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  6.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*47
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  7.  DSM Sites: Rebuild your mapped set if necessary.
  8.  Restart all the Logical links, incoming and outgoing filers, which
      have been stopped in step #3.
  9.  Re-schedule 'HL PURGE TRANSMISSIONS' option if this option was
      scheduled and has been stopped in step #2.
 10.  Use the "Edit Communication Server parameters" option to enter
      and/or change the data described in DESCRIPTION section for fields-
      (#869.3,41), (#869.3,42), and (#869.3,43).
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;49 SEQ #45</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-10-03 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Description: 
============
 This patch addresses the issue of reducing the number of required logical
 links running as active concurrent processes.  Before this patch,
 all possible HL7 TCP/IP Client Logical Links would have to be defined
 and started as LLPs.  These LLPs would run and remain as active processes
 on the system regardless of the frequency to deliver HL7 messages.
 This was true with both persistent and non-persistent client
 connection-type LLPs.
 
 After this patch is installed, non-persistent client LLPs
 will still have to be started as they were before this patch.
 To start an LLP, use the 'Start LLP' option.
 To start an LLP automatically after a system reboot,
 either use the Interface Workbench to edit Logical Links or use FileMan
 to edit the AUTOSTART field(#4.5) of the HL LOGICAL LINK file(#870).
 For each Logical Link that wish to start automatically after a re-boot
 of the system, you must edit the AUTOSTART field to have a value
 of ENABLED.  Do NOT simply enable the AUTOSTART field
 for all Logical Links. Only select those that you wish start
 that are both legitimate and appropriate for your site.
 
 Note, although you may have started a non-persistent LLP,
 the system process representing this LLP does not actually start
 until messages are in the associated message queue.  Once a process
 is started, it will remain running on the system until the associated
 queue is emptied and the associated Retention time has expired.
 The Retention time is the time in seconds in which the LLP process
 will wait while continually checking for messages in the associated
 message queue.  If messages are found in the queue before the retention
 time has expired, the LLP process will continue to de-queue messages
 as before.  Otherwise, the LLP process will actually return back
 to TaskMan's sub-manager and possibly terminate.  When this occurs,
 a status of INACTIVE is indicated on the STATE column
 of the system link monitor for this LLP.  
 
 
This patch also addresses the following issues: 
   
  1.  Fix allocation error in HLCSDR.
      Related NOIS:        SFC-0599-60101
                           SBY-0199-30725
                           HIN-1298-40436
      Actual error:  $ZE= INT+22^%ET:1, %DSM-E-ALLOC, allocation failure
       Description:  This error was first seen after the introduction of
                     patch HL*1.6*14.  This patch 14, utilized error
                     trapping to trap disconnect errors so that processing
                     may continue once the errors have passed.  However,
                     if the associated port/device was bad/busy, the code
                     would continually loop to the code that sets the trap.
                     As the stack continues to grow, an allocation error
                     would result in about 4 to 6+ hours after the logical
                     link was started or when the device became bad/busy.
                     This allocation error was seen associated with
                     the applications using the serial HLLP protocol of
                     the HL7 v1.6 (HLCSDR* routines).
 
  2.  Fix allocation error in HLCSMON.
      Description:  If a user enters '?' and &lt;RET&gt; repeatedly at the
                    command prompt of the Systems Link Monitor, an
                    allocation error will be encountered after 6+ attempts.
 
  3.  Fix extraneous display of **STOP** on CACHE sites.
      Related NOIS:        MAN-0799-11246
      Description:  When the Restart All Links and Filers option is run,
                    **STOP** is displayed after failing to connect to
                    a listener.  This is now corrected by this patch.
 
Routine Modifications: 
======================
The following routines are included in this patch.  The second line of these
routines now looks like:
 
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;29-Jan-97 14:25
 
CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ==========
 HLCS2           7195833         8763479        14,40,43,49
 HLCSDL          4198429         4174780        2,44,49
 HLCSDR          3946224         3936049        2,14,49
 HLCSLM          NEW             6276510        49
 HLCSLNCH       11368535        12855635        6,19,43,49
 HLCSLSM         NEW              154819        49
 HLCSMM1         1462301         1445162        35,49
 HLCSMON         9506155        10703763        34,40,48,49
 HLCSMON1        3987859         5535017        15,40,49
 HLCSTCP         4005742         4550642        19,43,49
 HLCSTCP2        7436704         7773433        19,43,49
 HLCSTERM        2560922         2618931        40,49
 HLDTIW2A        4178875         4164880        14,49
 HLDTIW2B        5012027         5250753        14,19,49
 HLDTIWP1        8445958         8449802        14,49
 
 
Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers. Use the 
      'Shut Down All Logical Links', 'Stop all incoming filers', and 'Stop 
      all outgoing filers' options.
 
      For DSM sites ONLY, if you have an HL7 UCX Service associated
      with the account(uci/directory) where you are installing this patch,
      please disable this service.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*49
                           =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
      'Restart All Links and Filers' option.  
 
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service
      for this installation, you may now enable it.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
  8.  Start Link Manager as follows:
 
 STEP 1:  HL7 Main Menu
 STEP 2:  V1.6 OPTIONS
 STEP 3:  Communications Server
 STEP 4:  TCP/IP Link Manager Start/Stop
 
Link Manager is NOT currently running!
 
 Would you like to start the Link Manager now? YES// 
 Link Manager queued as task number 2712635
 
  9.  Create entry in OPTION SCHEDULING file as follows:
 
 In order to set up this option to startup when the system/TaskMan starts,
 please find the following HL7 options to create an entry
 in the OPTION SCHEDULING file:
 
 STEP 1:  Taskman Management ...  
 STEP 2:  Schedule/Unschedule Options 
 STEP 3 (Create the following entry): 
 
Select OPTION to schedule or reschedule: HL AUTOSTART LINK MANAGER 
  Are you adding 'HL AUTOSTART LINK MANAGER' as 
    a new OPTION SCHEDULING (the 12TH)? No// Y 
 
 STEP 4 (From STEP 3 you will automatically enter the FileMan ScreenMan form 
        as follows and you should edit the 'SPECIAL QUEUEING' field 
        to have a value of 'Startup Persistent'): 
 
                          Edit Option Schedule
    Option Name: HL AUTOSTART LINK MANAGER     
    Menu Text: Autostart Link Manager                    TASK ID:
  __________________________________________________________________________
 
  QUEUED TO RUN AT WHAT TIME:
 
DEVICE FOR QUEUED JOB OUTPUT:
 
 QUEUED TO RUN ON VOLUME SET:
 
      RESCHEDULING FREQUENCY:
 
             TASK PARAMETERS:
 
            SPECIAL QUEUEING: Startup Persistent  
 
_______________________________________________________________________________
 
 
 
 
 
COMMAND:                                       Press &lt;PF1&gt;H for help    Insert 
 
=============================================================================  
Data Dictionary Modifications: 
============================== 
 869.2  HL LOWER LEVEL PROTOCOL PARAMETER 
 
        400.05    RETENTION (NJ6,0), [400;5]  (new)
 
 869.3  HL COMMUNICATION SERVER PARAMETERS
 
        51        DEFAULT RETENTION (NJ6,0), [5;1]  (new)
 
        52        LINK MANAGER TASK NUMBER (NJ15,0), [5;2]  (new)
 
        53        STOP LINK MANAGER (S), [5;3]  (new)
 
        54        LM LAST KNOWN $H (F), [5;4]  (new)
 
 870    HL LOGICAL LINK
 
        3         LLP ONLINE (S), [0;4]  (old)
 
              changed to:
 
        3         DEVICE TYPE (S), [0;4]   (new)
 
New Options:
============================== 
 'TCP/IP Link Manager Start/Stop'  Option name: HL START/STOP LINK MANAGER
 'Autostart Link Manager'          Option name: HL AUTOSTART LINK MANAGER
 
New for Systems Link Monitor:
==============================
 
  1.  Status of whether TaskMan is currently running.
  2.  Status of whether Link Manager currently running.
  3.  Additional STATES for non-persistent client links:
      o  ENABLED
      o  INACTIVE
  4.  New DEVICE TYPE column replaces DEVICE ON-LINE column.
  5.  New DEVICE TYPES:
                              PC -- Persistent TCP/IP Client
                              NC -- Non-Persistent TCP/IP Client
                              SS -- Single-threaded TCP/IP Server
                              MS -- Multi-threaded TCP/IP Server
                              SH -- Serial HLLP
                              SX -- Serial X3.28
                              MM -- MailMan
 
 
Configuration considerations:
==============================
 
 The only configuration parameter is Retention.  
 This may be edited per Logical Link using the Interface Workbench.  
 Also, a Default Retention time may be edited 
 using the 'Edit Communication Server parameters' option.  
 
 The order of precedence for Retention is as follows: 
 
           1.  Retention (Per Logical Link value overrides any defaults).
           2.  Default Retention (System-wide account default.
                                 If valued, this field is the default
                                 per Logical Link when the Retention
                                 field is left unvalued).
           3.  15 seconds (System-wide account default.  This value
                          is used when both Retention and Default
                          Retention are left unvalued).
 
 You may wish to accept the system-wide default of 15 seconds for 
 Retention of your non-persistent TCP/IP client Logical Links.  
 Once you become more familiar with the frequency and load of each link, 
 you may adjust these Retention values accordingly.  
 
Troubleshooting information:
============================
 The HL7 Systems Link Monitor is a useful tool to help
 you troubleshoot problems with either the Link Manager
 or the individual Logical Links.  This tool will monitor
 both TaskMan and Link Manager. When either of these
 does not appear to be running, a warning will be
 displayed on the Systems Link Monitor.
 
 
 ALERT NOTIFICATION
 
 It highly recommended that sites establish a mail group
 for HL7 related alerts.  Once this has been establish,
 use the 'Edit Communication Server parameters' option
 to identify the Mail Group for Alerts.
 
 If a mail group has been created and identified, the Link Manager
 will use this mail group to send the following alert whenever
 it finds a configuration problem between the links and TaskMan:
 
 HL7 Logical Link LLname shutdown due to TaskMan unable to process task request
 
 The most likely cause for receiving such an alert is having TaskMan running
 in non-DCL context and having a Logical Link with an associated
 STARTUP NODE other than where TaskMan is currently running.  This applies
 to both the AXP and AVANTI sites.
 
 After receiving this alert, make the needed corrections and restart
 the Logical Link if necessary.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;39 SEQ #46</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-10-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Distribute VA TCP Logical Link definitions. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;54 SEQ #47</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-02-04 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch does the following works to comply with the HL7 standard:
 
  1. Modifies some entries in file #779.001 (HL7 Event Type Code file) and
     #771.2 (HL7 Message Type file).
  2. Finds duplicate entries in file #779.001 and #771.2.
  3. Resolves duplicate entries pointers for the following fields:
     - #101,770.4 (event type).
     - #101,770.3 (message type).
     - #101,770.11 (message type).
     - #773,16 (event type).
     - #773,15 (message type).
     - Sub-field: #771.06,.01 (message type) of field #771,6.
  4. Deletes duplicate entries in file #779.001 and #771.2.
  5. Bring new data of version, event types, and message types into files,
     #771.5 (HL7 Version file), #779.001 and #771.2, to comply with HL7
     2.3 and 2.3.1 Standard.
 
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
Checksums:
==========
 
  Routine Name    Checksum Before    Checksum After       Patch List
  ------------    ---------------    --------------       ----------
    HLPAT54            new              7691750               54
 
    From CHECK^XTSUMBLD 
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  Stop all the Logical links, incoming and outgoing filers.
  3.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  4.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*54
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  5.  Restart all the Logical links, incoming and outgoing filers, which
      have been stopped in step #3.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;57 SEQ #48</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-02-29 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 VISTA HL7 patch HL*1.6*57 addresses most of the outstanding HL7 1.6
deficiencies cited by the HL7 Joint Application Development (JAD) Focus
Group and Part 2 of the OpenVISTA Tactical Plan.
 
1.     Exportable Interface Definitions. Class I Interface definitions are
now exportable to all VISTA systems with little or no modification at the
site. 
 
2.     Reduction in Interface Development, Testing and Activation Time.
Interfaces are now more intuitive, consistent and simpler regardless of
the role of the VISTA system as sender or receiver or the mode of
communication (Mailman, TCP, serial, local app-to-app). The number of
protocol definitions that are required to support a simple interface has
been reduced in most cases to just two.
 
3.     Redesigned Menu. The HL7 MAIN MENU option has been completely
reorganized to reflect user preferences both from the field and the JAD
Focus Group.
 
4.     Event types for version 2.1 messages are no longer required. HL7
1.6 is now backward compatible to HL7 Standard, version 2.1 transactions.
VISTA HL7 version 1.5 interfaces should be upgraded to 1.6 as soon as
possible. Version 1.5 fields have been marked for removal from the system.
Once this occurs, version 1.5 interfaces will no longer function. There
should be no new development using the 1.5 interface method.
 
5.     Merger of Split Logical Link and Lower Level Protocol Parameter
Files. File 870 (Logical Link) and file 869.2 (HL LOWER LEVEL PROTOCOL
PARAMETER) have been merged into a single file.
 
6.     Response message type and event type can now be different from the
initial message's message type/event type pair. The Transaction Message
type and Event type are no longer defined on the subscriber protocol for a
message to be successfully delivered. This information is now derived from
the Event Point Protocol only. The Response Message Type and Event Type
fields are now used for defining the message type and event type of the
subscriber response. 
 
7.     "Report" Option Fixed. The HL7 option, "Report" has been fixed to
properly display non-TCP status codes and errors. The option has been
renamed to, "Link Error/Status Report (non-TCP)."
 
8.     Same-System Batch Messages. It has not been possible to exchange
batch messages between applications running on the same system. This has
been corrected.
 
9.     Message Header Enhancements to Improve Security. Message headers
have been enhanced to improve security. It is now possible to identify the
source of a message and route (deferred) acknowledgements based entirely
on header information. When enabled, the facility id field contains the
source domain and destination domain as well as the Institution Number.
Facility ID follows the HL7 Version 2.3 format, INSTITUTION
NUMBER_cs_DOMAIN_NAME_cs_"DNS." For improved security, it is now possible
to validate a source domain against entries in the logical link file. When
valid domain information is present in the message header, the HL7 package
 
(1) attempts to resolve the domain to the corresponding logical link and
 
(2) uses this information as the return path for responses in place of
what may be defined in the Protocol file, Logical Link field.
 
10.    Message Header Enhancements Facilitate Message Broker Integration.
Enhancements to message header also facilitate the integration of Message
Brokers into our Enterprise Application Integration strategy. In a future
enhancement, it will be possible to query a DNS for current IP
information. Note that any data that currently exists in the HL7
Application Parameter file (771), Facility ID field, overrides this
enhancement. Data for the 'default' Sending Facility ID (if required and
no Application Parameter is defined) is derived from the HL7 Communication
Server Parameter file and edited using the option, Edit Site Parameters.
Data for the Receiving Facility ID field is derived from the HL7 Logical
Link File (870).
 
11.    Processing ID Field Checking. Another improved security feature
includes a check of the processing id field against the protocol
definition or the site parameter file. On the receiving system, a mismatch
between the message and the local definition results in an error. This can
prevent test or debug messages from being processed in production
accounts, and vice versa. 
 
12.    Startup and Shutdown Enhancements. A new option has been created,
"Stop All Logical Links And Filers". The "Restart All Links And Filers"
option has also been fixed; it was shutting down all links, and then
restarting only those links with AUTOSTART ENABLED. Now only AUTOSTART
links are shut down and restarted.
 
13.    Interface Workbench Replacement. The former HL7 option, "Interface
Workbench," has been replaced. Due to the HL7 package's underlying
architecture, it is relatively unintuitive to use and has been a problem
to maintain. The new user interface also eliminates 21 routines and 62
protocols.
 
14.    Message Synchronization Over TCP. When a connection is broken it is
possible for subsequent transactions to get out of synch. A fix is
provided to assist with re-synchronizing the two systems. The following
changes were added:
 
(1) A new field has been added to the HL LOGICAL LINK file, #870.  When a TCP
 client exceeds the parameter value for the maximum number of
 re-transmissions, the action below will be performed.
 
 
 200.21 EXCEED RE-TRANSMIT ACTION 200;10 SET
   'I' FOR ignore; 
   'R' FOR restart; 
   'S' FOR shutdown;
 
  DESCRIPTION:      This field determines what to do when a message exceeds
 the number of retry attempts for this Logical Link.
 Actions are: Ignore  = send alert once and keep trying to resend
              Restart = send alert once and shutdown link then start link
             Shutdown = send alert once and shutdown link
 
(2)     There is a new entry in HL7 ERROR MESSAGE file, #771.7.
 
  CODE: 109                               SHORT TEXT: Duplicate Message
 DESCRIPTION:   Message has already been received and processed.  This is
                a duplicate. 
 
 The following NOIS's are addressed by this patch:
       ISF-0499-61219
       ISF-0499-61021
       BRX-0499-11335
       MIA-0499-31927
       SAG-0599-42045
       ISH-0696-40781
       BAY-1099-32639
       SLC-1099-51078
       BAY-0499-31357
       SDC-1099-62397
       ISB-1099-31173
       BAC-0699-40281
       BIG-0999-72027
 
15. The DATE/TIME field of the HL7 Message Header has been enhanced to
include the timezone offset.
 
16. New public functions:
 
      MSGSTAT^HLUTIL(X)      ;message status
        input value:   X = message id
        return value: status^status updated^error msg.^error type pointer^
              status:
                       0 = message doesn't exist
                       1 = pending transmission
                     1.5 = being transmitted
                       2 = awaiting application acknowledgement
                       3 = successfully completed
                       4 = error
                       8 = being generated
                       9 = awaiting processing
 
      MSGACT^HLUTIL(X,HLIENACT)      ;outgoing message action
        input value:   X = message id
                       HLIENACT = 1-cancel; 2-requeue
        return value:  1 = action sucessfull
                       0 = action failed
 
      CHKLL^HLUTIL(X)        ;check setup of Logical Link
        input value:   X = institution name or number
        return value:  1 = setup OK
                       0 = LL setup incorrect
 
17. New Option: "Validate Interfaces"
 
Use this option to check your interface setups for potential problems.
Starting with an Event Driver Protocol, the event driver, subscriber(s)
and application definitions will be scanned and a report generated.
 
After patch 57 is installed, your pre-57 interfaces will continue to work.
However, you may be interested in upgrading your existing interfaces to
the post-57 style to take advantage of the new features. If you run this
option on a pre-57 setup, you can use the report as a guide for making
modifications. If your post-57 setup results in fewer protocols, be sure
to remove the unneeded protocols. Remember-if the report on a pre-57
interface reports errors, it does NOT mean the interface has been broken
or will stop working because of patch 57. Use the report as a guide only
for upgrading or for troubleshooting an existing POST-57 interface.
 
No conversion of existing interfaces that have been properly defined will
be necessary.
 
Additional details regarding changes to the Application Parameter File,
Event Point Protocols, Subscriber Protocols and key related fields are
defined below. 
 
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
 CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ==========
 HLCS             5743323         5745388       2,9,14,19,43,57
 HLCS2            8763479        10072062       14,40,43,49,57
 HLCSAS1          1742491         1743950       43,57
 HLCSDL           4174780         4111820       2,44,49,57
 HLCSDR           3936049         3904673       2,14,49,57
 HLCSFMN0         5857525         5857070       15,57
 HLCSFMN2         NEW             1942573       57
 HLCSHDR          5939243         7364841       37,19,57
 HLCSHDR1         6658466         7750238       19,57
 HLCSHDR2         NEW             1077600       57
 HLCSLM            157679         6371649       49,57
 HLCSLNCH        12855635        12643769       6,19,43,49,57
 HLCSLSM           154819          191876       49,57
 HLCSMM           2776063         2836421       17,35,57
 HLCSORAT         5245857         5441831       57
 HLCSRPT3        10792707        10830740       50,57
 HLCSTCP          4469052         5152314       19,43,49,57
 HLCSTCP1         4899040         4965932       19,43,57
 HLCSTCP2         7731395        10328595       19,43,49,57
 HLERCHK          NEW            12063792       57
 HLFNC2           5393929         5397412       2,26,57
 HLMA2            3410765         7268935       19,43,57
 HLPAT57          NEW             1630585       57
 HLSUB            4535863         5277110       14,57
 HLTP01           5245980         5262489       2,25,34,47,57
 HLTP3           12440103        14050232       19,43,57
 HLTP31           NEW             1680845       57
 HLTP4            7754632         7805100       19,57
 HLTPCK1A         7334335        14402537       2,25,34,57
 HLTPCK2A        11350701        15262342       19,57
 HLUOPT          11331726        11707096       57
 HLUTIL            134301         2643574       36,19,57
 HLUTIL2          5380198         5387464       19,43,57
 
List of preceding patches: 14, 15, 26, 34, 35, 43, 49, 50
Sites should use CHECK^XTSUMBLD to verify checksums.
 
Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and
      the Link Manager. Use the opitons:
 
       Shut Down All Logical Links
       Stop all incoming filers
       Stop all outgoing filers
       TCP/IP Link Manager Start/Stop
 
      For DSM sites ONLY, if you have an HL7 UCX Service associated
      with the account(uci/directory) where you are installing this patch,
      please disable this service.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*57
                           =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
      'Restart/Start All Links and Filers' option.  
 
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service
      for this installation, you may now enable it.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
  8.  Start Link Manager using the option: "TCP/IP
        Link Manager Start/Stop."
 
=========================================================================
 
For a complete and up-to-date set of documents, tutorials and
presentations (and access to the HL7 Standard) please
visit the OpenVista Website (frequently) at:
 
http://vista2.domain.ext/openvista/
 
At this site, you'll be able to find the new DEVELOPER MANUAL as well as
supplemental information on DYNAMIC ADDRESSING and TCP/IP SUPPORT.
=========================================================================
 
 
 
             Interface Configuration with Patch 57
 
This section explains what has changed with Patch 57, and how the various
files and fields will be used and the new business rules associated with
validating a message header.
 
                   Event Point Protocols
 
An event point protocol is a specific type of HL7 protocol defined in file
101. It represents the sending side of a particular HL7 transaction. It
does not have to be a VISTA event point. However, if the event point
originates in VISTA, several fields have been renamed along with changes
to underlying code to more clearly define how VISTA HL7 uses them. When a
message is being generated in VISTA, the header will contain the data from
these fields and is delivered to each of the subscribers found in the
SUBSCRIBERS multiple. Note that the ITEM multiple is no longer used for
HL7 transactions.
 
Event Driver Protocol Key Fields
 
770.1     SENDING APPLICATION (P771), [770;1]
770.3     TRANSACTION MESSAGE TYPE (P771.2'), [770;3]
770.4     EVENT TYPE (P779.001'), [770;4]
770.6     PROCESSING ID (S), [770;6]
770.8     ACCEPT ACK CODE (P779.003'), [770;8]
770.9     APPLICATION ACK TYPE (P779.003'), [770;9]
770.95    VERSION ID (*P771.5'), [770;10]
772       RESPONSE PROCESSING ROUTINE (K), [772;E1,245]
775       SUBSCRIBERS (Multiple-101.0775), [775;0]
          .01  SUBSCRIBERS (M*P101), [0;1]
 
 
                      Subscriber Protocols
 
This type of protocol contains all of the parameters for and is always
associated with the RECEIVING SYSTEM. The logical link field can be used
to describe a single point-to-point interface between a sending and
receiving system. If this interface included two VISTA systems, the
logical link would always point to the remote system. All other settings
in the interface definition would remain the same on both systems. The
RESPONSE MESSAGE TYPE and EVENT TYPE are now used only for responses. 
 
When a message is received, the following validation checks are performed.
On the receiving system, the HL7 package parses the inbound message header
and identifies the Sending Application, Receiving Application, Message
Type, Event Type and version. If the event type is missing, it validates
that the version is less than 2.2. It validates the sending and receiving
application by checking them against the Application Parameter file. If
they are missing or "Inactive" an error is logged. It then looks up the
Event Driver protocol using the AHL1 cross-reference or, if missing the
event type, uses the new AHL21 cross-reference on file 101. Delivery to
the Subscriber protocol is then based on Receiving Application. An error
is recorded if either the event driver or subscriber protocol cannot be
found. Next, HL7 sets the logical link for the "return path" based on the
entry in the logical link field, (field 770.7). HL7 then checks to see if
the sending and/or receiving facility fields are required for each
application in the transaction (file 771). If the sending or receiving
facility is required and the header is blank an error is logged. If the
facility information in the header differs from data in file 771 an error
is logged. If no data exists in the application parameter file but the
facility information is required, HL7 expects the header to contain the
new default facility data. The receiving facility data is checked against
the receiving system's site parameter settings and the sending facility
data is checked against the logical link definition (file 870). If the
sending facility data (Domain name) is present and cannot resolve to a
logical link, an error is logged, otherwise, the logical link of the
sending facility is used as the return path for responses regardless of
how the subscriber protocol logical link field was defined.
 
Subscriber Protocol Key Fields:
 
770.11    RESPONSE MESSAGE TYPE (P771.2'), [770;11]
770.2     RECEIVING APPLICATION (P771), [770;2]
770.4     EVENT TYPE (P779.001'), [770;4]
770.6     PROCESSING ID (S), [770;6]
770.7     LOGICAL LINK (P870'), [770;7]
771       PROCESSING ROUTINE (K), [771;E1,245]
773.1     SENDING FACILITY REQUIRED? (S), [773;1]
773.2     RECEIVING FACILITY REQUIRED? (S), [773;2]
773.3     SECURITY REQUIRED? (S), [773;3]
773.4     DATE/TIME OF MESSAGE REQUIRED? (S), [773;4]
774       ROUTING LOGIC (K), [774;E1,245]
 
 
                   Application Parameter File
 
 
This file contains the basic settings needed to describe an application
that either sends or receives a message. 
 
**Note that the fields pertaining to VISTA HL7 version 1.5 have been
  marked for removal from the system.
 
The default field separator is the up-caret ("^") and the default encoding
characters are "~|\&amp;." Developers are not required to use these defaults.
The preferred characters for the sake of message readability is the
vertical bar ("|") as a field separator and "~^\&amp;" as the encoding
characters. Note that the "^"-character cannot be placed first in the list
due to VA Fileman limitations.
 
.01       NAME (RFX), [0;1]
2         ACTIVE/INACTIVE (S), [0;2]
3         FACILITY NAME (F), [0;3]
4         MAIL GROUP (P3.8'), [0;4]
5         *HL7 SEGMENT (Multiple-771.05), [SEG;0]
          .01  HL7 SEGMENT (MRP771.3'), [0;1]
          2    FIELDS USED IN THIS SEGMENT (RF), [F;1]
6         *HL7 MESSAGE (Multiple-771.06), [MSG;0]
          .01  HL7 MESSAGE (MRP771.2'), [0;1]
          1    PROCESSING ROUTINE (RF), [R;E1,17]
7         COUNTRY CODE (P779.004'), [0;7]
100       HL7 FIELD SEPARATOR (F), [FS;E1,2]
101       HL7 ENCODING CHARACTERS (F), [EC;E1,4]
 
 
                        Logical Links
 
The Logical Link File (870) and the HL LOWER LEVEL PROTOCOL PARAMETERS
file (869.2) have been merged into 870. The pointer from 870 to 869.2 has
been changed to point to file 869.1 (HL LOWER LEVEL PROTOCOL TYPE). Users
may now define parameters for multiple LLP's under the same Logical Link
definition and simply change the "type" pointer as needed. A number of
fields in 869.2 have been removed since the standard does not allow the
settings to be altered. Since there has always been a 1:1 correspondence
of Logical Links to LLP Parameters, users should be able to safely remove
file 869.2 after installing this patch.
 
     Properly Defined VISTA-to-VISTA Interface (Before HL*1.6*57)
 
The following is an example of a PROPERLY defined point-to-point interface
between two VISTA Systems. In this example, the Sending System initiates
an ADT message to the Receiving System and expects an Acknowledgement.
 
4.1    Event Point Protocol Stored on Sending System 
(Interface Workbench View):
(1) JC ADT SERVER
    Text: Test tcp links
 Package:
   Message Type Rcvd: ADT                      Accept Acknowledgement: AL
     Event Type Rcvd: A01                 Application Acknowledgement: NE
            Priority: &lt;DEFAULT&gt;
       Processing ID: DEBUG
          Version ID: 2.3
        Entry Action: &lt;NONE&gt;
         Exit Action: &lt;NONE&gt;
 Process ACK Routine: Q
 Subscribers: JC ADT RECV          
 
(VA FileMan View):
  NAME: JC ADT SERVER                    ITEM TEXT: Test tcp links
  TYPE: event driver                    CREATOR: CLEMENS,JOHN
  ITEM: JC ADT RECV
  TIMESTAMP: 56930,57258             
  SERVER APPLICATION: JC ADT SERVER
  770.3 MESSAGE TYPE RECEIVED: ADT            
  770.4 EVENT TYPE: A01
  PROCESSING ID: DEBUG                 
  ACCEPT ACK CODE: AL
  APPLICATION ACK TYPE: NE             
  VERSION ID: 2.3
  GENERATE/PROCESS ACK ROUTINE: Q
 
           Subscriber Protocol Stored on Sending System
 
(Interface Workbench View):
(1) JC ADT RECV
    Text: TEST SUBSCRIBER USING TCP LINK
 Package:
    Message Type Rcvd: ACK                 Sending Facility Required: NO
    Message Type Sent: ADT               Receiving Facility Required: NO
 Event Type Rcvd/Sent: A01             Date/Time of Message Required: YES
             Priority: IMMEDIATE                   Security Required:
        Processing ID: DEBUG                            Logical Link:
           Version ID: 2.3
        Routing Logic: &lt;NONE&gt;
         Entry Action: &lt;NONE&gt;
          Exit Action: &lt;NONE&gt;
      Process Routine: D REC^JCHL7TST 
 
(VA Fileman View): 
NAME: JC ADT RECV
  ITEM TEXT: TEST SUBSCRIBER USING TCP LINK
  DISABLE: YES                          
  TYPE: subscriber
  CREATOR: CLEMENS,JOHN                 
  TIMESTAMP: 56930,56581
  CLIENT (SUBSCRIBER): JC TEST RECV     
  770.3 MESSAGE TYPE RECEIVED: ACK
  770.4 EVENT TYPE: A01                       
  PRIORITY: IMMEDIATE
  PROCESSING ID: DEBUG                  
  VERSION ID: 2.3
  770.11 MESSAGE TYPE GENERATED: ADT           
  GENERATE/PROCESS ROUTINE: D REC^JCHL7TST
  SENDING FACILITY REQUIRED?: NO        RECEIVING FACILITY REQUIRED?: NO
  DATE/TIME OF MESSAGE REQUIRED?: YES       
 
 
        Event Point Protocol Stored on the Receiving System
 
On the receiving system, the event point protocol is set up the same as on
the sending system, however, the subscriber protocol must be set up
differently (see below).
 
 
          Subscriber Protocol Stored on the Receiving System
 
(VA Fileman View):
NAME: JC ADT RECV
  ITEM TEXT: TEST SUBSCRIBER USING TCP LINK
  DISABLE: YES                          
  TYPE: subscriber
  CREATOR: CLEMENS,JOHN                 
  TIMESTAMP: 56930,56581
  CLIENT (SUBSCRIBER): JC ADT RECV     
  770.3 MESSAGE TYPE RECEIVED: ADT
  770.4 EVENT TYPE: A01                       
  PRIORITY: IMMEDIATE
  PROCESSING ID: DEBUG                  
  VERSION ID: 2.3
  770.11 MESSAGE TYPE GENERATED: ACK           
  GENERATE/PROCESS ROUTINE: D REC^JCHL7TST
  SENDING FACILITY REQUIRED?: NO        RECEIVING FACILITY REQUIRED?: NO
  DATE/TIME OF MESSAGE REQUIRED?: YES       
 
Notice that the data for 770.3 and 770.11 must be reversed in order for
HL7 to generate an ACK with the proper message type (ACK~A01) defined in
the header.
 
If the receiving system is capable of initiating the same transaction to
the sending system in this example, a new set of protocols and unique
sending and receiving application definitions must be supplied.
 
      Properly Defined VISTA-to-VISTA Interface (After HL*1.6*57)
 
After Patch 57 is installed, you will see the following differences:
 
On the sending system, field 770.3 and 770.4 of the EVENT POINT PROTOCOL
are used to generate the header of the initial message. 
 
Important consequence: The same setup can be exported to the receiving
system because field 770.11 is correctly defined as "ACK" before and after
the installation of patch 57 and field 770.11 is used to generate the
response. If an ack is not required (as is currently the case for many
CIRN definitions) for a given interface the subscriber configuration is of
no consequence. 
 
Therefore:
 
1.     No conversion of properly defined interfaces (see above) is
necessary.
 
2.     If the receiving system needs to initiate the same transaction as
well as receive it, the same two protocols can be used for both cases.
Note that some interface setups may be improperly defined, but work anyway
because of unusual circumstances. All interfaces currently in production
should be reviewed based on this document.
 
To assist with this, an "interface debugger" routine (^HLERCHK) has been
supplied with patch 57 to examine one or all interfaces.
Use this as a general tool for interface troubleshooting after
installing the patch. It examines each HL7 Event Driver Protocol,
Subscriber Protocols, and Application Definitions and generates a report
of potential problems. It can be used with pre-Patch 57 setups as a guide
for converting an interface to post-57 format. However, if it reports
issues with a pre-57 setup, this should not be interpreted as an
indication that the interface is not set up correctly.
 
 
      Event Point Protocol (for both Sending and Receiving System)
 
NAME: JC ADT SERVER                     TYPE: event driver
  CREATOR: CLEMENS,JOHN
 DESCRIPTION:   Testing message transmissions 
        SENDING APPLICATION: JC NXT SEND
  770.3 TRANSACTION MESSAGE TYPE: ADT         
  770.4 EVENT TYPE: A01
        PROCESSING ID: PRODUCTION             
        ACCEPT ACK CODE: AL
        VERSION ID: 2.2                       
        PROCESSING ROUTINE: Q
        RESPONSE PROCESSING ROUTINE: Q        
        SENDING FACILITY REQUIRED?: YES
        RECEIVING FACILITY REQUIRED?: NO
        SUBSCRIBERS: JC ADT RECV
 
    Subscriber Protocol (for both Sending and Receiving System)
 
NAME: JC ADT RECV                       TYPE: subscriber
  CREATOR: CLEMENS,JOHN                 
        RECEIVING APPLICATION: JC KRN REC
  770.3 TRANSACTION MESSAGE TYPE: ADT         
  770.4 EVENT TYPE: A01
        PROCESSING ID: PRODUCTION
        VERSION ID: 2.2                       
  770.11 RESPONSE MESSAGE TYPE: ACK
        PROCESSING ROUTINE: Q                 
        SENDING FACILITY REQUIRED?: NO
        RECEIVING FACILITY REQUIRED?: NO
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;60 SEQ #50</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-04-05 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch 
1. Resolves an issue with how to address responses to messages
arriving over a Mailman-type Logical Link. 
 
If ROUTING LOGIC is defined, the response will be dynamically addressed
using the SOURCE DOMAIN provided by querying Mailman. In some cases this
could result in a response being returned over a logical link that is
different from the one the message arrived on. Specifically, the source
domain will resolve to one of the VA-namespaced logical links exported
with HL*1.6*39. If this is the case, it is important to insure that the
links on both the sending and receiving systems are properly configured
and enabled.
 
If there is no routing logic defined on the subscriber protocol, Vista HL7
will assume that the link defined on the subscriber protocol is the
correct return path and Mailman will not be queried.
 
2. Fixes a corrupted node found on the logical link, LR NCH-L which
prevented patch HL*1.6*57 from converting this link.
 
 
 The following routines are included in this patch.  The second line of
each of these routines now looks like:
  ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
 CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ========== 
 HLTP01         5262489         5578885         **2,25,34,47,60**
 HLPAT60        **NEW**         805414
 
 
Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and
      the Link Manager. Use the options:
 
       Shut Down All Logical Links
       Stop all incoming filers
       Stop all outgoing filers
       TCP/IP Link Manager Start/Stop
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*60
                           =========
 
        Answer 'YES' to 'Want KIDS to Rebuild Menu Trees upon Completion
        of Install?'.
 
        Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
  
        Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
        and Protocols?'.  
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
      'Restart/Start All Links and Filers' option.  
 
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service
      for this installation, you may now enable it.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
  8.  Start Link Manager using the option: "TCP/IP
        Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;58 SEQ #51</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-04-17 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following issues:
   
1. ISB-1299-31632, AUS-1299-N1595: Errors when using HL7 Ping option. After
   error, ping doesn't work for any site.
2. DET-1199-41731:  Undefined error when transmitting HL7 messages.
3. TAM-1199-32092:  The option HL TASK RESTART, start wrong number of
   outbound filers.
4. Support for CPRS Remote Patient Data View project.
5. Cleans up application variables between inbound transactions.
 
Routine Modifications:
======================
The following routines are included in this patch.  The second line of
these routines now look like:
  
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
CHECK^XTSUMBLD results: 
   
 Routine Name   Before Patch    After Patch     Patch List 
 ============   ============    ===========     ==========
 HLCS2          10072062        10270936        14,40,43,49,57,58
 HLCSTCP         5152314         5155167        19,43,49,57,58
 HLCSUTL         5134775         6479348        2,19,58
 HLMA            5502295         6284735        19,43,58
 HLMA2           7268935         7530649        19,43,57,58
 HLSUB           5277110         5501510        14,57,58
 HLTP3          14050232        14451393        19,43,57,58  
 HLTP31          1680845         1651062        57,58
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
 
  3.  Use the option 'Stop All Messaging Background Processes' to disable
      all links and filers.
 
      For DSM sites ONLY, if you have an HL7 UCX Service associated
      with the account(uci/directory) where you are installing this patch,
      please disable this service.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         2 Verify Checksums in Transport Global
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*58
                           =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the
      'Restart All Links and Filers' option.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
------------------------------------------------------------------------------
New Public Functions (only for TCP messages)
 
   $$MSGLINE(msgid)
     return the number of lines in a message header and text
      input: msgid = message id
     output:  return number of lines
 
   $$MSG^HLCSUTL(msgid, ref)
     return the message header and text in the given reference
      input: msgid = message id
               ref = closed local or global reference to place message
     output:  return 1 for success and 0 if message doesn't exist
     The message is returned with blank lines between each line.
     example:
 
ref(1)=MSH^~|\&amp;^VOICERAD^^RADIOLOGY^^20000110145151-0800^^ORU~R01^1231^T^2.2
ref(2)=
ref(3)=PID^^^100~10~M11^^JONES~JOHN~J^^19421112^M^^^^^^^^^^123456789
ref(4)=
ref(5)=OBR^^^^7089898.8543-1~043091-66~L^^^199104301200^"^"^^^^^"^^3232~HARR
IS~JACK^^^^MEDICINE^^199104301010
ref(6)=
ref(7)=OBX^^TX^I~IMPRESSION~L^^HEART NORMAL SIZE
ref(8)=
ref(9)=OBX^^ST^D~DIAGNOSTIC CODE~L^^NORMAL
ref(10)=
ref(11)=OBX^^TX^R~REPORT~L^^Heart appears to be of normal size.
ref(12)=
ref(13)=OBX^^TX^R~REPORT~L^^No infiltrate or abnormal mass noted.
ref(14)=
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;63 SEQ #52</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-05-16 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch introduces DNS support for Vista HL7. In order to conduct HL7
message exchange between sites using TCP, the TCP/IP address of each site
running an HL7 service must be known by all other sites. If the address is
changed, such as from "152.x.x.x" to "10.x.x.x," or when the HL7 service
is moved to a different computer, or when multiple computers are able to
support HL7 services at a single domain, other sites can use DNS to
"discover" this information without interruption in message exchange.
  
When a connection attempt over a TCP Logical Link fails, a call will be
made to the locally specified Domain Name Server (found in the Kernel Site
Parameters) to retrieve the current IP address. This feature was
introduced in Kernel patch XU*8*142. One or more IP addresses may be
registered on the DNS systems. The DNS was initially seeded with IP
information supplied by HL*1.6*39 and any subsequent changes made to date
to the VA* and MPI logical links. These IP addresses are associated
specifically with the service "HL7" on the DNS and the port 5000. The port
number is currently fixed for HL7 and should not be changed. If only one
IP address is returned, it will be stored in the site's local Logical Link
file and used for subsequent connections. If more than one IP is returned,
each address will be tried in sequence until a successful connection is
made. The successful IP address will then be stored and used until the
next connection attempt that fails.
  
Queries to the DNS will work only if the Logical Link (file 870) points to
the correct Domain (file 4.2). Review the link definitions paying
particular attention to those links in your VISN and verify that the
Domain field is defined correctly.
  
The Logical Link that represents your site should be configured as a
"multithreaded listener" to receive INBOUND connection requests. The IP
address and port for this listener is known by all other sites and
referenced by them to establish a connection. Changing the IP address will
prevent sites from establishing a connection. Therefore, if you wish to
establish a new IP address, your VA DNS must be updated in advance of the
change. It must contain an entry in the format, HL7.yoursite.domain.ext,
and your new TCP/IP address. For example, DNS will contain an entry for
Bay Pines VA looking like, "HL7.BAY-PINES.DOMAIN.EXT." This entry will
return a TCP/IP address of 152.130.80.5. 
 
Please note that the HL7 development team is not involved with maintenance
of the VA's DNS systems. Questions should be refered to your local or
VISN-level DNS administrator, or via MS Exchange to the group, "VHA CIO
DNS ADMIN."
  
Following the installation of this patch you should enable your TCP/IP
listener for inbound HL7 connections. Detailed instructions for this may
be found in the HL7 Document, "Vista HL7 Site Manager and Developer
Manual" released as HL*1.6*56. Here, you will find information for both
Cache and for configuring UCX/TCP services under the VMS operating system.
  
The following routines are included in this patch.  The second line of
each of these routines now looks like:
  
   ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
  
  CHECK^XTSUMBLD results: 
    
  Routine Name   Before Patch    After Patch     Patch List 
  ============   ============    ===========     ========== 
  HLCSTCP2       10328595        11299763        **19,43,49,57,63**
  HLMA           6284735         7929932         **19,43,58,63**
  
 List of preceding patches: 57, 58
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
 Installation Instructions: 
 ==========================
   1.  Users are allowed to be on the system during the installation.  
  
   2.  DSM SITES: Review your mapped set.  If any of the routines listed
       in the Routine Summary section are mapped, they should be removed
       from the mapped set at this time.
  
   3.  Shutdown all Logical Links and incoming and outgoing filers, and
       the Link Manager. Use the options:
  
         Filer and Link Management Options -&gt; 
             SA     Stop All Messaging Background Processes
             LM     TCP/IP Link Manager Start/Stop
  
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
       option will load the KIDS package onto your system.  
  
   5.  The patch has now been loaded into a Transport global on your 
       system. You now need to use KIDS to install the Transport global.  
       On the KIDS menu, under the 'Installation' menu, use the following 
       options: 
  
          2 Verify Checksums in Transport Global 
          3 Print Transport Global 
          4 Compare Transport Global to Current System 
          5 Backup a Transport Global 
          6 Install Package(s) 
              INSTALL NAME: HL*1.6*63
                            =========
  
         Answer 'NO' to 'Want KIDS to Rebuild Menu Trees upon Completion
         of Install?'.
  
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
   
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
  
   6.  Startup all Logical Links and incoming and outgoing filers. Use the
 
  
         Filer and Link Management Options -&gt;
             RA     Restart/Start All Links and Filers
         (Note that links that do not have "autostart" enabled will need
          to be restarted manually)
    
       For DSM sites ONLY, if you previously disabled an HL7 UCX Service
       for this installation, you may now enable it.
  
   7.  DSM Sites: Rebuild your mapped set if necessary.
  
   8.  Start Link Manager using the option: "TCP/IP
         Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;61 SEQ #53</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-05-25 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch solves the following problems:
 
 1. NOIS MWV-1297-20006: Requeuer screen didn't show the correct
    information in columns "Queue Size" and "Pending."
 2. Fixes the DICN-Error nodes problems for "IN" queue of HL LOGICAL LINK
    file(#870).
 
 
Test sites :
 
 1. Fayetteville
 2. Martinsburg
 
 
Routine Summary:
================
The following is a list of the routines included in this patch.  The
second line of each of these routines now looks like:
 
     &lt;tab&gt;;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;Oct 13, 1995
 
 
Checksums:
==========
 
  Routine Name    Checksum Before    Checksum After       Patch List
  ------------    ---------------    --------------    ------------------
    HLCSQUE           4308358           4338251              14,61
    HLCSREQ           1749378           1790153               61
 
 
    From CHECK^XTSUMBLD 
 
 
Installation Instructions:
==========================
  1.  Users are allowed to be on the system during the installation.
  2.  Stop all the Logical links, incoming and outgoing filers.
  3.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from
      the mapped set at this time.
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
      option will load the KIDS package onto your system.  
  5.  The patch has now been loaded into a Transport global on your
      system. You now need to use KIDS to install the Transport global.
      On the KIDS menu, under the 'Installation' menu, use the following
      options:
 
         Verify Checksums in Transport Global
         Print Transport Global 
         Compare Transport Global to Current System 
         Backup a Transport Global
         Install Package(s) 
         INSTALL NAME: HL*1.6*61
                       =========
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
  6.  DSM Sites: Rebuild your mapped set if necessary.
  7.  Restart all the Logical links, incoming and outgoing filers, which
      have been stopped in step #2.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;59 SEQ #54</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-06-12 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
1. Introduces HL7 version 2.3.1 MESSAGE STRUCTURE components:
        -Introduces a new file (#779.005) to hold the new HL7 MESSAGE
         STRUCTURE CODES.
        -Adds a new field, MESSAGE STRUCTURE (#770.5), to the Protocol
         file. When defined, the MESSAGE STRUCTURE will be added to the
         version 2.3.1 message header.
 
2. The message type of outbound messages was incorrectly stored in file
   773. This has been fixed.
 
3. In file 771, HL APPLICATION PARAMETER, the input transforms for FIELD
   SEPARATOR and ENCODING CHARACTERS have been modified to prevent reuse
   of the field separator in the encoding characters. Each of the
   characters defined must be unique.
 
4. HL*1.6*57 introduced a new menu structure. However, the old, obsolete
   menus were not removed. This patch will remove them.
 
5. Fixes a problem with STUB records left behind in file 870 (Logical
   Link) resulting in freezing of links and the System Link Monitor as
   well as causing queues to grow until disk space is used up.
 
NOTE: Some sites may have a considerable number of messages needing to be
purged from file 870. Please consider disabling journalling of ^HLCS() for
about a week after installing this patch.
 
6.  Changes the PROCESSING ID field of file 101 to be no longer required.
Note that HL7 message headers are populated with information for
'TRAINING' or 'PRODUCTION' taken from the HL7 site parameters. Use the
option, SITE PARAMETER EDIT, to verify that your production account is
identified as such and your test/training account is identified as
'TRAINING.' The event driver protocol PROCESSING ID field is now used only
for DEBUG mode. Debug mode will override your site parameter setting. Make
sure the protocol is set to 'debug' on both the sending and receiving
system.
 
7. Corrects a problem with creating new subscriptions when a user edits
the zero node of file 774.
 
This patch resolves the following NOIS calls:
 
        AMA-0300-70683
        ISD-0300-71919
        HOU-0400-71933
 
The following routines are included in this patch.  The second line of
each of these routines now looks like:
  
   ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
  
  CHECK^XTSUMBLD results: 
    
  Routine Name  Before Patch    After Patch     Patch List 
  ============  ============    ===========     ========== 
  HLCSHDR       7364841         7637619         **37,19,57,59**
  HLCSHDR1      7750238         8586633         **19,57,59**
  HLCSQUE       4338251         4440270         **14,61,59**
  HLCSQUE1      1150239         1371156         **14,59**
  HLFNC2        5397412         5365297         **2,26,57,59**
  HLTP4         7805100         7964901         **19,57,59**
  HLTPCK1A      14402537        14751742        **2,25,34,57,59**
  HLTPCK2A      15262342        15611547        **19,57,59**
  HLUTIL2       5387464         5486507         **19,43,57,59**
  HLTPCK1       4288888         4452787         **8,36,59**
  HLTPCK2       3804314         3962788         **19,59**
  HLTP3         14451393        14649677        **19,43,57,58,59**
  HLSUB         5501510         5552075         **14,57,58,59**
 
 List of preceding patches: 14, 36, 57, 58, 61
 Sites should use CHECK^XTSUMBLD to verify checksums.
  
 Installation Instructions: 
 ==========================
   1.  Users are allowed to be on the system during the installation.  
  
   2.  DSM SITES: Review your mapped set.  If any of the routines listed
       in the Routine Summary section are mapped, they should be removed
       from the mapped set at this time.
  
   3.  Shutdown all Logical Links and incoming and outgoing filers, and
       the Link Manager. Use the options:
  
         Filer and Link Management Options -&gt; 
             SA     Stop All Messaging Background Processes
             LM     TCP/IP Link Manager Start/Stop
  
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
       option will load the KIDS package onto your system.  
  
   5.  The patch has now been loaded into a Transport global on your 
       system. You now need to use KIDS to install the Transport global.  
       On the KIDS menu, under the 'Installation' menu, use the following 
       options: 
  
          2 Verify Checksums in Transport Global 
          3 Print Transport Global 
          4 Compare Transport Global to Current System 
          5 Backup a Transport Global 
          6 Install Package(s) 
              INSTALL NAME: HL*1.6*59
                            =========
  
         Answer 'NO' to 'Want KIDS to Rebuild Menu Trees upon Completion
         of Install?'.
  
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
   
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
  
   6.  Startup all Logical Links and incoming and outgoing filers. Use the
 
  
         Filer and Link Management Options -&gt;
             RA     Restart/Start All Links and Filers
         (Note that links that do not have "autostart" enabled will need
          to be restarted manually)
    
       For DSM sites ONLY, if you previously disabled an HL7 UCX Service
       for this installation, you may now enable it.
  
   7.  DSM Sites: Rebuild your mapped set if necessary.
  
   8.  Start Link Manager using the option: "TCP/IP
         Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;64 SEQ #55</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-06-12 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following issues:
 1. Added new status, AWAITING RESPONSE, to the HL7 MESSAGE STATUS file.
 2. New parameter, HL("ACKTIME"), will reset the Acknowledgement Timeout,
    for the one message. This parameter can be passed in GENERATE^HLMA or
    DIRECT^HLMA APIs.
 3. Retransmission alerts are no longer generated.
 4. DEVNOTOPN errors will no longer be recorded.
 5. New APIs:
        $$MSGSTAT^HLUTIL = returns status of a message
        $$MSGACT^HLUTIL  = outgoing message action, cancel or requeue
        $$CHKLL^HLUTIL   = check setup of Logical Link
        $$FLD^HLCSUTL    = returns a field from a message segment


Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and
      the Link Manager. Use the options:
 
        Filer and Link Management Options -&gt; 
            SA     Stop All Messaging Background Processes
            LM     TCP/IP Link Manager Start/Stop

      For DSM sites ONLY, disabled all HL7 UCX Services 
      for this installation.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*64
                           =========
  
        Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
  
        Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
        and Protocols?'.  
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
 
        Filer and Link Management Options -&gt;
            RA     Restart/Start All Links and Filers
        (Note that links that do not have "autostart" enabled will need to
        be restarted manually)
   
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service
      for this installation, you may now enable it.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
  8.  Start Link Manager using the option: "TCP/IP
        Link Manager Start/Stop."


Routine Information:
====================
The following routines are included in this patch.  The second line of each
of these routines now looks like:
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;JUL 17,1995

                 Checksum
Routine         Old         New            2nd Line
========     ========     ========     =====================     
HLCSAC        2497076      2564816     **43,64**
HLCSTCP       5155167      5175308     **19,43,49,57,58,64**
HLCSTCP1      4965932      5081718     **19,43,57,64**
HLCSTCP2     11299763     11197019     **19,43,49,57,63,64**
HLCSUTL       6479348      6969973     **2,19,58,64**
HLMA2         7530649      7925412     **19,43,57,58,64**
HLTF0         3173064      3232637     **12,19,64**
HLUTIL        2643574      3175738     **36,19,57,64**

List of preceding patches: 57, 58, 63
Sites should use CHECK^XTSUMBLD to verify checksums.


Documentation:
==============

$$MSGSTAT^HLUTIL(X)      ;message status
   input value:  X = message id

  return value: status^status updated^error msg.^error type pointer^queue
                position or # of retries^# open failed^ack timeout
    
        status:
                 0 = message doesn't exist
                 1 = pending transmission
               1.5 = being tranmitted
               1.7 = awaiting response, # of retries
                 2 = awaiting application ack
                 3 = successfully completed
                 4 = error
                 8 = being generated
                 9 = awaiting processing


$$MSGACT^HLUTIL(X,HLIENACT)      ;outgoing message action
   input value:       X = message id
               HLIENACT = 1-cancel; 2-requeue

  return value:       1 = action sucessful
                      0 = action failed


$$CHKLL^HLUTIL(X)        ;check setup of Logical Link
   input value:   X = institution number or name

  return value:   1 = setup OK
                  0 = LL setup incorrect


$$FLD^HLCSUTL(NODE,FLD)   ;This function will return the value for the field
   input value:   NODE = HLNODE from the HLNEXT call, passed by reference
                   FLD = number, field position in segment
          note:    HL("FS") must be defined

  return value:  value for the field in this segment
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;65 SEQ #56</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-07-11 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following issues:
 1. Corrects problem creating an acknowledgement message MSH for a serial
    connection.
 2. Enhancements to the System Link Monitor.  Display is now alphabetical
    and views can also be defined. Use the 'Site Parameter Edit' option
    to create Link Monitor VIEWS.
 3. New computed field in file 773, MESSAGE SIZE. This field counts the
    number of characters in a message.  It can be used in FileMan reports.
 4. Update the INITIAL MESSAGE field in file 773 for a response to a Direct
    Connect message. This is for the Remote Data View project.


Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and
      the Link Manager. Use the options:
 
        Filer and Link Management Options -&gt; 
            SA     Stop All Messaging Background Processes
            LM     TCP/IP Link Manager Start/Stop

      For DSM sites ONLY, disabled all HL7 UCX Services 
      for this installation.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*65
                           =========
  
        Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.

        Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.

  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
 
        Filer and Link Management Options -&gt;
            RA     Restart/Start All Links and Filers
        (Note that links that do not have "autostart" enabled will need to
        be restarted manually)
   
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service
      for this installation, you may now enable it.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
  8.  Start Link Manager using the option: "TCP/IP
        Link Manager Start/Stop."


Routine Information:
====================
The following routines are included in this patch.  The second line of each
of these routines now looks like:
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;JUL 17,1995

                 Checksum
Routine         Old         New            2nd Line
========     ========     ========     =====================     
HLCSHDR       7637619      7573404     **37,19,57,59,65**
HLCSMON      10703763     11036657     **34,40,48,49,65**
HLCSMON1      5535017      3592657     **15,40,49,65**
HLCSUTL       6969973      7737730     **2,19,58,64,65**
HLMA2         7925412      7999576     **19,43,57,58,64,65**

List of preceding patches: 49, 59, 64
Sites should use CHECK^XTSUMBLD to verify checksums.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;66 SEQ #57</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-10-04 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 
 *** PLEASE NOTE THE FOLLOWING:  ***
 
     This patch requires patch XU*8.0*168 HL7 date fix.
     Also, this patch corrects the interpretation of midnight when
     converting FileMan to HL7 date/time formats and vice versa.
     In addition, the Vista HL7 Functions $$HLDATE^HLFNC(X,Y) and
     $$FMDATE^HLFNC(X) now call the Kernel functions $$FMTHL7^XLFDT(X)
     and $$HL7TFM^XLFDT(X) respectively.  Furthermore, ZULU offsets
     are added to HL7 date/time formats whenever time is included.
 
     Also, please install this patch prior to installing patch RG*1*4.
     This patch is needed by the CPRS Remote Data Views.
     If RG*1*4 is already installed, install this patch as soon
     as posssible.
 
     Future patch XM*7.1*51, which will change the domain names for
     all sites which have requested it, will not be released until all
     sites have installed HL*1.6*66.
 
  **********************************
 
This patch addresses the following issues:
 1. ISA-0600-10916  Correct problem with HLDATE^HLFNC when midnight is
    used.
 2. CHS-0499-43088  Corrects a problem with Mailman Logical Links when
    mail group has no members. Updated to use new Mailman API's and send a
    message to the HL7 mail group.
 3. ISF-0600-61155  Prevents an UNDEFINED when the subscription control
    number is not passed into GET^HLSUB.
 4. ISB-0600-32294  Prevents the loss of the 'AC' cross reference
    on pending messages.
 5. WIM-0700-20527     PROBLEM ON SYSTEMS LINK MONITOR.  Patch HL*1.6*65
    introduced some new enhancements to the HL7 System Link Monitor.
    However, this patch also introduced a new bug that prevented users
    from backing up a screen when in 'Screened' mode.  This patch corrects
    this problem with the monitor.
 6. General variable cleanup in routine HLTP3 associated with Dynamic
    Addressing and Enhanced Headers.  This patch fixes the
    Invalid Message Control ID in MSA Segment that was encountered with
    patch RG*1*4 CPRS REMOTE DATA VIEWS.
 7. Related NOISes:
    ELP-0700-72334     Undefined Variable @ SF+14~HLTPCK2A
    LAS-0700-62279     MESSAGE ERROR FROM NEW ORLEANS
    BIR-0700-32233     Undefined Variable
    MUR-0800-30482     &lt;UNDEF(ECODE)&gt;SF+14^HLTPCK2A
    PRE-0800-60365     $ZE= &lt;UNDEFINED&gt;SF+14^HLTPCK2A
    This patch fixes the undefined variable at SF+14^HLTPCK2A.  This was
    first encountered after the staff at New Orleans VAMC changed their
    domain entry to include the '.MED' in front of the '.DOMAIN.EXT' suffix.
    Afterwards, sites receiving CIRN/HL7 messages from New Orleans would
    encounter this error.  In addition, this patch changes the way that it
    performs a FileMan lookup of the Domain Name.  Previously, it was only
    based only on the .01/Name field.  After this patch is installed, the
    lookup process will work with either the Name or Synonym.
 8. Related NOISes:
    AUG-0800-32024     LINK HAS NEGATIVE NUMBERS
    AUG-0800-31661     HL7 INTERFACE NOT WORKING
    AUS-0800-N0079     Negative Numbers on Monitor
    ISB-0800-30179     Entries in the 'AC' x-ref but with a status of 3
    This patch fixes the problem where sites encountered negative
    numbers in the 'TO SEND' column of the HL7 System Link Monitor.
    These negative numbers were a result of the HL7 code inadvertently
    changing the status of messages to 'SUCCESSFULLY COMPLETED'
    in the wrong file.  Although the 'AC' cross-reference existed
    for these messages, the status of 'SUCCESSFULLY COMPLETED' prevented
    these message from being delivered.
    In addition, the use of $$REPROC^HLUTIL(IEN, routine) extrinsic
    function after this patch is installed, will update the
    DATE/TIME PROCESSED field(#100) in the HL7 MESSAGE ADMINISTRATION
    file (#870).
 
Routine Information:
====================
The following routines are included in this patch.  The second line of
each of these routines now looks like:
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;JUL 17,1995
 
                 Checksum
 Routine         Old         New            2nd Line
 ========     ========     ========     =====================     
 HLCSMM        2836421      2312930     **17,35,57,66**
 HLCSMON      11036657     11192960     **34,40,48,49,65,66**
 HLCSTCP2     11197019     11334736     **19,43,49,57,63,64,66**
 HLFNC         5785780      5669016     **38,42,51,66**
 HLMA          7929932      7962943     **19,43,58,63,66**
 HLSUB         5552075      5558527     **14,57,58,59,66**
 HLTP3        14649677     14792516     **19,43,57,58,59,66**
 HLTP31        1651062      1770560     **57,58,66**
 HLTPCK2A     15611547     16050022     **19,57,59,66**
 HLUTIL        3175738      3187029     **36,19,57,64,66**
 
 
 List of preceding patches: 51, 58, 59, 63, 64, 65
 Sites should use CHECK^XTSUMBLD to verify checksums.
 
External patch dependency:  XU*8.0*168    HL7 date fix.
 
 
Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and
      the Link Manager. Use the options:
 
        Filer and Link Management Options -&gt; 
            SA     Stop All Messaging Background Processes
            LM     TCP/IP Link Manager Start/Stop
 
      For DSM sites ONLY, disabled all HL7 UCX Services 
      for this installation.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*66
                           =========
 
        Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.
 
        Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?'.
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
 
        Filer and Link Management Options -&gt;
            RA     Restart/Start All Links and Filers
        (Note that links that do not have "autostart" enabled will need to
        be restarted manually)
 
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service
      for this installation, you may now enable it.
 
  7.  DSM Sites: Rebuild your mapped set if necessary.
 
  8.  Start Link Manager using the option: "TCP/IP
        Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;67 SEQ #58</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-01-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
          * * * * * * * * * * * * * * * * * * *  * * * * * * * * * *
                                   ATTENTION
        Read this patch.  If you are a Cache/NT site, you MIGHT have to
                             PERFORM MANUAL EDITS!
          * * * * * * * * * * * * * * * * * * *  * * * * * * * * * *

Patch HL*1.6*67

NOIS: PUG-0800-52938
Test Site: Milwaukee, WI; Puget Sound HCS; Grand Junction, CO
When sending HL7 transactions to other VA sites over TCP links, Cache/NT
sites must send an initial HELO to overcome buffering issues.  However,
the initial HELO is not part of the HL7 standard, and may cause a reject
error when sent to a COTS system.

This patch adds a new field, SAY HELO, to file 870, HL LOGICAL LINK,
so that for every logical link, the Cache/NT site can decide whether or
not to send the initial HELO.  The default will be NO, since it is not
part of the HL7 standard.

The form HL7 LOGICAL LINK has been updated to include this field.  Only
Cache/NT sites should set it, since it does not apply to other sites,
and will be ignored at other sites.

At Cache/NT sites with patch HL*1.6*39 (which distributed VA Logical Link
definitions) installed, the post-init will go through file 870,
HL LOGICAL LINK, and for every TCP link to a VA site (if the name of the
link starts with 'VA', OR if the link is 'MPIVA'), set SAY HELO to YES.
It will show you which links it has set.  You should review the list and
manually correct any which shouldn't have been set, or set any that were
missed.

The post-init will NOT run at:
- Cache/NT sites which have not installed patch HL*1.6*39.
- non-Cache/NT sites.

Here's the new field:

STANDARD DATA DICTIONARY #870 -- HL LOGICAL LINK FILE
STORED IN ^HLCS(870,

DATA        NAME                GLOBAL        DATA
ELEMENT     TITLE               LOCATION      TYPE
---------------------------------------------------------------------------
870,400.07  SAY HELO             400;7 SET

                            'Y' FOR YES; 
                            'N' FOR NO; 
            LAST EDITED:    NOV 02, 2000 
            HELP-PROMPT:    Send initial HELO for Cache/NT TCP links? 
            DESCRIPTION:    This field is applicable only to Cache/NT sites
                            with TCP links.  If you are not a Cache/NT
                            site, or this is not a TCP link, this field 
                            does not apply, AND will be ignored.  

                            If this TCP link is for a VA site, answer YES.  
                            If this TCP link is for a COTS system, answer
                            NO.  This is the default.  

          TECHNICAL DESCR:  When sending HL7 transactions to other VA sites
                            over TCP links, Cache/NT sites must send an
                            initial HELO to overcome buffering issues. 
                            However, the initial HELO is not part of the
                            HL7 standard, and may cause a reject error when
                            sent to a COTS system.  

NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*66.
============================================================================

ROUTINES:
The second line of the routine now looks like:
       ;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;JUL 17,1995

             Before       After
Name         Checksum     Checksum     Patch List
---------------------------------------------------------------------
HLCSTCP2     11334736     11552851     19,43,49,57,63,64,66,67
HLPAT67       * new *      2870677     67
* Checksums produced by CHECK^XTSUMBLD

This patch introduces the following new routine:
HLPAT67 is a post-init and has no user-callable entry points.
============================================================================

INSTALLATION:
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*66.
1. Users may be on the system during the installation of this patch.
2. DSM Sites: If any of these routines is mapped, disable mapping for the
   affected routine(s).
3. Shutdown all Logical Links and incoming and outgoing filers, and
   the Link Manager. Use the options:
 
     Filer and Link Management Options -&gt; 
         SA     Stop All Messaging Background Processes
         LM     TCP/IP Link Manager Start/Stop

4. DSM sites: Disable all HL7 UCX Services for this installation.
5. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu to load the
   KIDS package into a Transport global on your system.  
6. On the KIDS:Installation menu, use the following options to install the
   Transport Global:
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
 Select INSTALL NAME: HL*1.6*67     Loaded from Distribution  &lt;date/time&gt;
                      =========
 Install Questions for HL*1.6*67

 Want KIDS to INHIBIT LOGONS during the install? YES// NO
                                                       ==
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                       ==
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.

 DEVICE: HOME// &lt;Do NOT queue it!&gt;
                ------------------
7. Cache/NT sites: Once the patch is installed, review the list of 
HL LOGICAL LINKs whose SAY HELO field was set to YES by the post-init, and
make sure they were all links to VA sites, and that no TCP links to VA sites
were left out.  (If the name started with 'VA' it was considered a VA site.)
8. Startup all Logical Links and incoming and outgoing filers. Use the 
 
     Filer and Link Management Options -&gt;
         RA     Restart/Start All Links and Filers
   (Note: Links which do not have "autostart" enabled will need to
          be restarted manually)
   
9. DSM Sites: If you previously disabled an HL7 UCX Service for this
   installation, you may now enable it.
10. DSM Sites: Rebuild your mapped set if necessary.
11. Start Link Manager using the option: "TCP/IP Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;68 SEQ #59</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-01-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch HL*1.6*68

NOIS: MIW-0900-41651
Test Site: Milwaukee, WI
This patch 'news' variables in routine ^HLCSMM so that they do not leak out
and cause problems.  ^HLCSMM uses MailMan to send HL7 messages for MailMan
type Logical Links.

The following improvements are also made:

1. Ignores domain closures and security key requirements, so that it will
send to FOC-AUSTIN, even if that domain is closed or has a security key.

2. Sites may again use the auto-startup feature for MailMan type Logical
Links.  If DUZ is 0 or undefined, DUZ will be set to .5 (POSTMASTER), for
the purpose of sending the messages.

3. Error message has been improved.  If the message is not sent for some
reason, the error message will clearly state the reason why.  Sites are
reminded to ensure that the mail group which receives error messages is
populated.  To do this:

W $$PARAM^HLCS2.  Piece 8 should be the name of a mail group.  You should 
be in that mail group.  This group receives error messages if there's any 
problems in creating the HL7 MailMan messages.  The subject is
"Error handing HL7 message off to Mailman".

NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*66.
============================================================================

ROUTINES:
The second line of the routine now looks like:
       ;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;JUL 17,1995

             Before       After
Name         Checksum     Checksum     Patch List
---------------------------------------------------------------------
HLCSMM        2312930      3644711     17,35,57,66,68
* Checksums produced by CHECK^XTSUMBLD

This patch introduces no new routines.
============================================================================

INSTALLATION:
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*66.
1. Users may be on the system during the installation of this patch.
2. DSM Sites: If any of these routines is mapped, disable mapping for the
   affected routine(s).
3. Shutdown all Logical Links and incoming and outgoing filers, and
   the Link Manager. Use the options:
 
     Filer and Link Management Options -&gt; 
         SA     Stop All Messaging Background Processes
         LM     TCP/IP Link Manager Start/Stop

4. DSM sites: Disable all HL7 UCX Services for this installation.
5. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu to load the
   KIDS package into a Transport global on your system.  
6. On the KIDS:Installation menu, use the following options to install the
   Transport Global:
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
 Select INSTALL NAME: HL*1.6*68     Loaded from Distribution  &lt;date/time&gt;
                      =========
 Install Questions for HL*1.6*68

 Want KIDS to INHIBIT LOGONS during the install? YES// NO
                                                       ==
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                       ==
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.

 DEVICE: HOME// &lt;Do NOT queue it!&gt;
                ------------------
7. Startup all Logical Links and incoming and outgoing filers. Use the 
 
     Filer and Link Management Options -&gt;
         RA     Restart/Start All Links and Filers
   (Note: Links which do not have "autostart" enabled will need to
          be restarted manually)
   
8. DSM Sites: If you previously disabled an HL7 UCX Service for this
   installation, you may now enable it.
9. DSM Sites: Rebuild your mapped set if necessary.
10. Start Link Manager using the option: "TCP/IP Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;73 SEQ #61</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-03-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch to the HLCSMON routine.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;72 SEQ #62</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-03-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Fix free-text stored instead of internal entry number problem.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;69 SEQ #63</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-04-05 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 
This patch addresses the following issues:
 
 1.  ISH-1000-42883  wrong processing routine being executed for VistA HL7 apps
 
 2.  SDC-1100-60210  Problem with HL7/Radiology link
 
 The wrong processing routine is being executed (EN^RGADT)
 for non-MPI/PD applications.  This causes a MPI/PD exception to be
 generated and sent to Forum.
 
 This problem was originally indentified in Milwaukee when the Dictaphone
 application tried to execute a MPI/PD processing routine (EN^RGADT).
 
 Most recently, the problem appeared at the Birmingham VAMC.  Some user
 inactivated a Lab interface application which caused an endless loop
 creating application acks that were never received/processed because the
 VistA HL7 application was inactivated.
 
 The problem lies in the CONT^HLTP3 subroutines, the HL("EIDS") variable,
 defining the subscribing protocol, is not defined.  The software sets the
 HL("EIDS") variable to HLEIDS.  The value of HLEIDS is not reliable, in
 most cases the variable has not been properly set/killed.
 
 In addition, the inbound filers were not locking the cross-reference
 ^HLMA("AC","I",... in order to flush to global cache buffers.
 
 In this case, the HL7 link receiving a message for an application
 kills the cross-reference(entry in the inbound tcp/ip queue),
 releases other locks, the inbound filers kicks in and grabs the lock at a
 different parent level ^HLMA(ien), checks for the existence of
 ^HLMA("AC","I",LLien,MSGien) and since no locking was performed on this
 cross-reference, this piece of code thinks this entry exists.  Hence, the
 inbound filers begin to process this message, finds
 variables left around from a previous message(MPI/PD or HL7 itself),
 invokes code that uses these variables to set other HL7 variables when
 these variables itself are not setup properly.  This in turn causes the
 code to call the MPI/PD application which in turn fires off exception
 messages to Forum.
 
 These problems may be triggered by an inbound HL7 message that was not
 properly constructed in terms of the HL7 MSH segment.  The VistA HL7
 software needs from the MSH segment, the Sending/Receiving Application
 names, Message Type, Event Type and Version ID.
 The HL7 Protocol setups may also have triggered this problem if the data
 in the MSH segment of an inbound message does not match the interface
 definition setups.
 
 Therefore, sites will still need to correct problems with their local
 interfaces. This patch only prevents the wrong application from being
 executed.
 
Routine Information:
====================
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995
 
 CHECK^XTSUMBLD checksum results:
 
 Routine Name     Before Patch  After Patch    Patch List
 ============     ============  ===========    ====================
 HLTP3            14792516      15038079       19,43,57,58,59,66,69
 
 List of preceding patches: 66
 Sites should use CHECK^XTSUMBLD to verify checksums.
 
 
Installation Instructions: 
==========================
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and 
      the Link Manager. Use the options: 
 
        Filer and Link Management Options -&gt; 
            SA     Stop All Messaging Background Processes 
            LM     TCP/IP Link Manager Start/Stop 
 
      For DSM sites ONLY, disabled all HL7 UCX Services 
      for this installation.  
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*69 
                           =========
 
        Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.  
 
        Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
 
        Filer and Link Management Options -&gt; 
            RA     Restart/Start All Links and Filers 
        (Note that links that do not have "autostart" enabled will need to 
        be restarted manually) 
 
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service 
      for this installation, you may now enable it.  
 
  7.  DSM Sites: Rebuild your mapped set if necessary.  
 
  8.  Start Link Manager using the option: "TCP/IP 
        Link Manager Start/Stop." 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;76 SEQ #64</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-08-15 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The test sites for Patch HL*1.6*76 are:
=======================================
 
  1. White River Junction VAMC.
  2. Butler VAMC.
  3. Tuscaloosa VAMC.
  4. Wilmington VAMC.
  5. San Francisco VAMC.
  6. Loma Linda VAMC
 
 
This Patch Addresses the Following NOIS Calls:
==============================================
 
  1. ISH-0700-41306   Enhanced Message Header issue: 'AA' received before 'CA'
  2. BRX-0701-12759   VANJHL7 in error state
  3. BRX-0701-12760   Undefined error CHKMSG+6^HLCSTCP2
  4. POR-0701-52464   problem with VANJH LINK
  5. BHS-0701-12356   VABED Link
  6. ERI-0701-22675   Possible run-away HL7 job on Sun 7/29/01
 
 
This patch is composed of the following five parts:
===================================================
 
  1. Part 1 addresses out of order HL7 acknowledgements on Cache' 
     systems.  
  2. Part 2 addresses non-persistent TCP/IP client links, which are not 
     maintaining a connection during the retention period. 
  3. Part 3 addresses the near SACC routine size limit (10K) of the HL7 routine
     HLCSTCP2.
  4. Part 4 addresses direct connect handling network errors properly.
     Read errors encountered through the direct connect were affecting
     both the Institution File Redesign (IFR) clean-up and the activation 
     of Integrated Billing (IB).
  5. Part 5 addresses direct connect handling of M LOCKS.
 
 
Part 1 - The out of order HL7 acknowledgements on Cache' systems are related
to the inconsistent use of OPEN parameters between client
and server (listener) processes.  These acknowledgements are communicating
over a TCP/IP socket on Cache' systems.
 
The VISTA HL7 package makes use of the following Kernel APIs
to open a TCP/IP socket:
 
   1. CALL^%ZISTCP -- Used by the client.  This API uses STREAM mode.
   2. LISTEN^%ZISTCP -- Used by the single-threaded listener.  This API uses
      packet mode.
   3. LISTEN^%ZISTCPS -- Used by the multi-threaded listener.  This API uses
      packet mode.
 
When initiated from Cache' to DSM systems, HL7 messages should look like this:
 
   Order     Cache'                                  DSM
   =====     ======                                  ===
     1       client sends message----------------&gt; listener
     2       client &lt;--------------------listener sends Commit ACK
     3       listener &lt;------------------client sends Application Response
     4       listener sends Commit ACK------------&gt; client
 
However, with the inconsistent parameters used by the Kernel
APIs, listed above, the following HL7 message scenario occurs:
 
   Order     Cache'                                  DSM
   =====     ======                                  ===
     1       client sends message----------------&gt; listener
     4       client &lt;--------------------listener sends Commit ACK
     2       listener &lt;------------------client sends Application Response
     3       listener sends Commit ACK------------&gt; client
 
Notice that the Commit ACK (Order #4) for the initial message (Order #1)
arrives after the application response message (Order #2). This is happening
because the client process is using stream mode (Kernel API CALL^%ZISTCP).
Steam mode is causing the initial message to wait for the full timeout
to expire on the READ before the client process actually sees
what was just read.  Therefore, if the READ TIMEOUT is set to 30 seconds,
the client will sit on the READ command for the entire 30 seconds
while the listener process receives the application response
as soon as it is available.
 
 
Part 2 - The second part of this patch will help reduce the OPEN failure rate
that may be related to rapid OPENS and CLOSES by maintaining the connection
during the retention period.
 
Part 3 - This patch creates the new HL7 routine HLCSTCP3 to accommodate
the spillover in excess of 10K from HLCSTCP2.
 
Part 4 - The Institution File Redesign (IFR) Patch XU*8*206 may encounter
problems with the clean-up process if network problems are present.
During the clean-up, IFR will download the Master Institution File from FORUM.
This is done via an HL7 feature called "direct connect".  The VISTA HL7
developers have discovered a problem when read errors are encountered
across the wide area network when using the direct connect.
Once this read error is encountered, it causes an error in the direct connect
and the connection is dropped and the IFR clean-up encounters an error.
When this happens, the direct connect does not clear the cross reference
it created.  Subsequently, when the clean-up is restarted,
an I/O problem will be encountered.  Patch HL*1.6*76 addresses
these issues by passing back to the calling application information regarding
any error it encounters.  Furthermore, it cleans up the cross reference
it created and closes the device before returning to the calling application.
In addition, the post-init routine HLPAT76 will find all incomplete messages
that were affected by READ errors prior to this patch.  This post-init will
set the status of these messages so that they do not affect other messages in
the queue.
 
Part 5 - After the Integrated Billing (IB) patch IB*2*150 was activated,
many sites encountered several entries in their Lock Table.  This was a result
of the direct connect locking ^HLMA global nodes and never releasing the locks.
This IB patch utilizes an Integrated Billing Background Filer to send
several HL7 messages.  To achieve this, this filer calls the direct connect
API to send these messages.  However, each HL7 message sent adds two entries
into the Lock Table causing some sites to fill up their Lock Table.
This HL7 patch fixes this problem by having the direct connect API
properly release the locks when it no longer needs them.
 
 
Routine Information:
====================
 
 The following routines are included in this patch.  The second line of each
 of these routines now looks like:
  ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;JUL 17,1995
 
                  Checksum
 Routine         Old       New      2nd Line
 HLCSTCP2     11552851   11428718    **19,43,49,57,63,64,66,67,76**
 HLCSTCP3          new    1935770    **76**
 HLMA2         7999576    8028267    **19,43,57,58,64,65,76**
 HLPAT76           new    1888010    **76**
 
 List of preceding patches: 65, 67
 Sites should use CHECK^XTSUMBLD to verify checksums.
 
 This patch introduces the following new routines: HLCSTCP3 and HLPAT76.
 Routine HLPAT76 is a post-init and has no user-callable entry points.
 
Installation Instructions: 
==========================
 
  1.  Users are allowed to be on the system during this installation.  
 
  2.  DSM SITES: Review your mapped set. If any of the routines listed in 
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Use the VISTA HL7 Filer and Link Management options, listed below, to 
      shutdown (1) all Logical Links, (2) the incoming and outgoing filers, and 
      (3) the Link Manager. Use the options: 
 
        Filer and Link Management Options -&gt; 
            SA     Stop All Messaging Background Processes 
            LM     TCP/IP Link Manager Start/Stop 
 
      DSM SITES ONLY: Disable all HL7 UCX Services for this installation.
 
  4.  Use the option INSTALL/CHECK MESSAGE located on the PackMan menu to load 
      the KIDS package onto your system.
 
  5.  Patch HL*1.6*76 has now been loaded into a Transport global on your 
      system. The next step is to use KIDS to install the Transport global. To 
      do this, follow the KIDS menu path to the Installation menu:
 
         KIDS  Kernel Installation &amp; Distribution System
            Installation
 
      On the Installation menu, use the following options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*76 
                           =========
 
         Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.  
 
         Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
 
  6.  Follow the HL7 menu path to the option Restart/Start All Links and Filers
      to startup all Logical Links and incoming and outgoing filers:
 
         Filer and Link Management Options -&gt; 
            RA  Restart/Start All Links and Filers 
        
         NOTE: Links that do not have "Autostart" enabled will need to 
               be restarted manually) 
 
      DSM SITES ONLY: If you previously disabled an HL7 UCX Service 
      for this installation, you may enable it now enable it.  
 
  7.  DSM SITES: Rebuild your mapped set if necessary.  
 
  8.  Start Link Manager using the option: TCP/IP Link Manager Start/Stop. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;80 SEQ #65</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-09-06 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;77 SEQ #66</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-09-06 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Test sites:    Grand Junction,  El Paso, San Francisco, Big Spring
 
NOIS:          ELP-0801-70936, GRJ-0801-51450, MAN-0701-12428,
               PRO-0801-11300
 
Note:          This patch requires that KIDS build HL*1.6*76
               be installed.
 
Patch HL*1.6*76 fixed problems encountered when a recent Integrated
Billing patch was released.  (There was no problem with the Integrated
Billing (IB) patch. But after the patch, IB used some parts of the
HL7 package differently than before.) Some problems were fixed by
HL*1.6*76, but problems remained.  After patch HL*1.6*76 was installed,
READ and WRITE errors remained, but were more specific to Cache sites.
This patch fixes the additional problems not fixed by HL*1.6*76.
 
The two routines included in this patch are shown below, along with
each routine's second line.
 
  Routine    Second Line
  =========  =========================================================
  HLCSTCP2   ;;1.6;HEALTH LEVEL SEVEN;**19,43,49,57,63,64,66,67,76,77
             **;JUL 17,1995
  HLCSTCP3   ;;1.6;HEALTH LEVEL SEVEN;**76,77**;JUL 17, 1995
 
The VA Kernel checksums for these routines (calculated using
CHECK^XTSUMBLD) are listed below.
 
                Checksum        Checksum
  Routine Name  Before Patch    After Patch     Patch List
  ============  ============    ===========     =====================
  HLCSTCP2      11428718        12129232        **19,43,49,57,63,64,66,
                                                67,76,77**
  HLCSTCP3       1935770         2092970        **19,57,59,72,80**
 
Sites should use CHECK^XTSUMBLD to verify checksums after patch
installation.
 
 Installation Instructions:
 ==========================
 
   NOTICE:  Do no proceed unless patch HL*1.6*76 has been installed.
 
   1.  Users are allowed to be on the system during the installation.
 
   2.  AXP/DSM SITES: Review your mapped routine set.  If any of the
       routines listed in the ROUTINE SUMMARY section are mapped, they
       should be removed from the mapped set at this time.
 
   3.  Shutdown all Logical Links, incoming and outgoing filers, and
       the Link Manager using the Filer and Link Management options
       listed below.
 
          Stop All Messaging Background Processes [HL STOP ALL]
          TCP/IP Link Manager Start/Stop [HL START/STOP LINK MANAGER]
 
      AXP/DSM SITES ONLY: Disable all HL7 UCX Services for this
      installation.
 
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
   5.  This patch is now loaded into a transport global on your
       system. The next step is to use KIDS to install the Transport
       global. This is done using the 'Installation' menu's 'Install
       Package(s) [XPD INSTALL BUILD]' menu option. When using this
       menu option to install the patch build, you will be asked
       several questions.  The questions, and the answers you should
       supply, are shown below.
 
       INSTALL NAME: &lt;HL*1.6*77&gt;
       Want KIDS to INHIBIT LOGONS during the install?  &lt;NO&gt;
       Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?  &lt;NO&gt;
 
   6.  Start up all Logical Links and incoming and outgoing filers using
       the Filer and Link Management Option's 'Restart/Start All Links
       and Filers [HL TASK RESTART]' menu option.
 
       (Note that links that do not have "autostart" enabled will need
       to be restarted manually.)
 
      AXP/DSM SITES ONLY: If you previously disabled an HL7 UCX Service
      for this installation, you may enable it now enable it.
 
   7.  AXP/DSM Sites:  After the patch has been installed, rebuild your
       map set, if necessary.
 
   8.  Start Link Manager using the 'TCP/IP Link Manager Start/Stop [HL
       START/STOP LINK MANAGER]' menu option.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;81 SEQ #67</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-10-16 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch HL*1.6*81, Correct setup for sites using DNS and HL7
==========================================================
 
Category:  INFORMATIONAL
 
Description:
===========
 
               * * * * * * * * * * * * * * * * * * * *
               READ THIS IMPORTANT INFORMATIONAL PATCH
               * * * * * * * * * * * * * * * * * * * *
 
 
This Patch Addresses the Following NOIS Call:
---------------------------------------------
 
ISB-0901-31233, HL7 DNS uses and helpful Websites
 
 
Problem Scenario:
-----------------
 
Through monitoring the HL7 Network between Veterans Affairs Medical
Centers (VAMC) and the Master Patient Index (MPI), a need has arisen for
clarification on the use of HL7 and Domain Name Servers (DNS). Mainly, the
IP address where the HL7 Listener is running at the sites must match the
IP address associated with the HL7 domain name in the DNS.
 
 
Patch Solution:
---------------
 
The express purpose of this Informational Patch is to make sites aware of
the HL7 Frequently Asked Questions (FAQ) web site. It addresses
information on DNS support as it relates to HL7. Specifically, it provides
information on how to ensure that sites are correctly set up to use the
DNS with respect to HL7. This is addressed in the FAQ beginning at the
question "How do I correctly set up my site to use DNS?". 
 
Here is the URL for the HL7 FAQ web site:
 
    http://vaww.vista.domain.ext/hl7/hl7_faq.htm.
 
 
Note: Even though this is an informational patch, please be sure to 
      install it so the FORUM Patch tracking system gets updated.
 
Installation Instructions:
==========================
 
1.  Users are allowed to be on the system during the installation.
 
2.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
    option will load the KIDS package onto your system.
 
3.  This patch is now loaded into a transport global on your
    system. The next step is to use KIDS to install the Transport
    global. To do this, use the 'Installation [XPD INSTALLATION
    MENU]' menu.  On this menu, use the following options in the
    order shown below:
 
      3  Print Transport Global
      6  Install Package(s)
 
    When using the 'Install Package(s)' option to install the patch 
    build, you will be asked the following questions.  The questions
    asked and the answers you should supply are shown below:
 
      INSTALL NAME: HL*1.6*81
      Want KIDS to INHIBIT LOGONS during the install?  &lt;NO&gt;
      Want to DISABLE Scheduled Options, Menu Options, and
      Protocols?  &lt;NO&gt;
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;75 SEQ #68</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-11-06 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The test sites for Patch HL*1.6*75 are Bay Pines VAMC, Palo Alto VAMC, 
and San Francisco VAMC.
 
 
PATCH DESCRIPTION:
==================
 
Currently if the System Link Monitor displays a client logical link in
an Error STATE and you use the HL START option to attempt to start it
back up, the option forces you to stop the process before you can re-
enable it to continue the communication process.
 
Note: Entries in the HL LOGICAL LINKS file (#870) that are in an Error 
      STATE can be identified on the System Link Monitor by the word 
      Error in the STATE column.
 
The following is a screen capture of the HL7 System Link Monitor with a
client logical link in an Error STATE.
 
 
HL7 System Link Monitor
=======================================================================
              SYSTEM LINK MONITOR for ISC SALT LAKE CITY (T System)
 
                MESSAGES  MESSAGES   MESSAGES  MESSAGES  DEVICE  
     NODE       RECEIVED  PROCESSED  TO SEND   SENT      TYPE     STATE
 
     VADAN      38        38         38        38         NC      Error
 
 
 
 
     Incoming filers running =&gt; 1            TaskMan running 
     Outgoing filers running =&gt; 1            Link Manager running
 
     Select a Command:
 (N)EXT  (B)ACKUP  (A)LL LINKS  (S)CREENED  (V)IEWS  (Q)UIT  (?) HELP:
=======================================================================
 
 
The following screen capture shows the two steps required to re-enable 
the client logical link (VADAN) shown in the previous screen capture.
 
 
Step 1 (Screen Capture Begins Here)
=======================================================================
      Select Communications Server Option:  Start/Stop Links 
 
      This option is used to launch the lower level protocol for the
      appropriate device.  Please select the node with which you want
      to communicate
 
      Select HL LOGICAL LINK NODE:    VADAN
 
      The LLP was last started on APR 14, 2000 11:20:58.
 
      Okay to shut down this job? YES
 
      The job for the VADAN Lower Level Protocol will be shut down.
=======================================================================
(Screen Capture Ends Here For Step 1)
 
 
Step 2 (Screen Capture Begins Here)
=======================================================================
 
      Select Communications Server Option:  Start/Stop Links
 
      This option is used to launch the lower level protocol for the
      appropriate device.  Please select the node with which you want
      to communicate
 
      Select HL LOGICAL LINK NODE:    VADAN
 
      The LLP was last shutdown on APR 17, 2000 13:32:47.
      This LLP has been enabled!
=======================================================================
(Screen Capture Ends Here For Step 2)
 
 
Before this patch (Patch HL*1.6*75), using the option Start/Stop Links 
to re-enable a client logical link in an Error STATE was a two-step 
process. After this patch has been installed, using the option 
Start/Stop Links to re-enable a client logical link in an Error STATE 
will become a one-step process. However, this will only apply to client 
logical links in which the SHUTDOWN LLP field is set to YES while in an 
Error STATE. (See the following explanation "Description of What Causes 
an Error State" for more information on Error States.)
 
 
Description of What Causes an Error State
=======================================================================
Error STATEs can be related to retransmissions.  If the number of retry 
attempts has been exceeded, an alert is sent and the word Error appears 
in the STATE column on the System Link Monitor for that client logical 
link. This relates to the EXCEED RE-TRANSMIT ACTION field (#200.021) in 
the HL LOGICAL LINKS file. If the EXCEED RE-TRANSMIT ACTION field is 
set to Restart, the client logical link quits and the Link Manager 
queues (restarts) the link. If the EXCEED RE-TRANSMIT ACTION field is 
set to Shutdown, then the client logical link quits and the Link 
Manager will not attempt to restart the Link. In this particular case,
the SHUTDOWN LLP field (#14) is set to YES in the HL LOGICAL LINKS 
file.
 
The other condition in which the value Error gets stuffed in the STATE 
field (#4) is when the client logical link gets an unexpected error. If 
the client logical link encounters an error other than the expected 
errors: OPENERR, NOTOPEN, DEVNOTOPN, WRITE, or READ, it logs the error 
in the error trap and shuts down the client logical link.
 
In this case, the SHUTDOWN LLP field is set and the client logical link 
has to be restarted manually.
=======================================================================
 
 
THIS PATCH ADDRESSES THE FOLLOWING ISSUE:
=========================================
 
  1.  E3R #14227, MAKE HL START ALITTLE SMARTER  [#31168789]
 
 
ROUTINE INFORMATION: 
====================
 
The following routine is included in this patch. The second line of the 
routine now looks like this: 
 
 ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;Oct 13, 1995 
 
                 Checksum 
 Routine         Old         New            2nd Line  
 ========      ========     ========     ====================
 
 HLCSLNCH      12643769     13101795     **6,19,43,49,57,75**
 
 List of preceding patches: 57
 
 Sites should use CHECK^XTSUMBLD to verify checksums.  
 
 
INSTALLATION INSTRUCTIONS: 
==========================
 
  1.  Users are allowed to be on the system during the installation.
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed 
      in the Routine Summary section are mapped, they should be removed 
      from the mapped set at this time.  
 
  3.  Use the INSTALL/CHECK MESSAGE option on the PackMan menu. This 
      option will load the KIDS package onto your system.   
 
  4.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.
      To do this, on the KIDS menu under Installation, use the 
      following options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
 
             INSTALL NAME: HL*1.6*75 
 
                           =========
 
        Answer NO to the prompt 'Want KIDS to INHIBIT LOGONS during the 
        install?'.  
 
        Answer NO to the prompt 'Want to DISABLE Scheduled Options, 
        Menu Options'.
 
  5.  DSM Sites: Rebuild your mapped set if necessary.  
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;82 SEQ #69</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-11-21 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch HL*1.6*82
 
NOIS: ISF-0600-61085
Test Sites: FO-OAKLAND
If you call the APIs GENERATE^HLMA or DIRECT^HLMA, with HLL("LINKS") pre-
set, but incorrectly, the API should return an error, but it doesn't. This
patch ensures that an error is returned, before any message is created.
 
If HLL("LINKS") is set in the routing logic or the entry action of a
protocol during the APIs GENERATE^HLMA or DIRECT^HLMA, and any of the
protocols in HLL("LINKS") is not a subscriber type protocol, the message
is created, but an error is returned.
 
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*76.
============================================================================
 
ROUTINES:
The second line of the routine now looks like:
       ;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;JUL 17,1995
 
             Before       After
Name         Checksum     Checksum     Patch List
---------------------------------------------------------------------
HLCS2        10270936     10941124     14,40,43,49,57,58,82
HLMA          7962943      9200711     19,43,58,63,66,82
HLMA2         8028267      8331015     19,43,57,58,64,65,76,82
* Checksums produced by CHECK^XTSUMBLD
 
This patch introduces no new routines.
============================================================================
 
INSTALLATION:
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*76.
1. Users may be on the system during the installation of this patch.
2. DSM Sites: If any of these routines is mapped, disable mapping for the
   affected routine(s).
3. Shutdown all Logical Links and incoming and outgoing filers, and
   the Link Manager. Use the options:
 
     Filer and Link Management Options -&gt; 
         SA     Stop All Messaging Background Processes
         LM     TCP/IP Link Manager Start/Stop
 
4. DSM sites: Disable all HL7 UCX Services for this installation.
5. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu to load the
   KIDS package into a Transport global on your system.  
6. On the KIDS:Installation menu, use the following options to install the
   Transport Global:
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
 Select INSTALL NAME: HL*1.6*82     Loaded from Distribution  &lt;date/time&gt;
                      =========
 Install Questions for HL*1.6*82
 
 Want KIDS to INHIBIT LOGONS during the install? YES// NO
                                                       ==
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                       ==
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
 
 DEVICE: HOME// &lt;Do NOT queue it!&gt;
                ------------------
7. Startup all Logical Links and incoming and outgoing filers. Use the 
 
     Filer and Link Management Options -&gt;
         RA     Restart/Start All Links and Filers
   (Note: Links which do not have "autostart" enabled will need to
          be restarted manually)
   
8. DSM Sites: If you previously disabled an HL7 UCX Service for this
   installation, you may now enable it.
9. DSM Sites: Rebuild your mapped set if necessary.
10. Start Link Manager using the option: "TCP/IP Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;83 SEQ #70</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-11-21 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch HL*1.6*83
 
NOIS: ISA-0800-11764
Test Sites: FO-ALBANY
If VistA HL7 is processing an HL7 message, and calls the API UPD^HLSUB
to add/update a subscription, and the 5th parameter indicates that the
termination date should be deleted, and there's already a subscription
with a termination date, it fails to delete the termination date.
This patch fixes that. 
 
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*66.
============================================================================
 
ROUTINES:
The second line of the routine now looks like:
       ;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;JUL 17,1995
 
             Before       After
Name         Checksum     Checksum     Patch List
---------------------------------------------------------------------
HLSUB         5558527      5395528     14,57,58,59,66,83
* Checksums produced by CHECK^XTSUMBLD
 
This patch introduces no new routines.
============================================================================
 
INSTALLATION:
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patch HL*1.6*66.
1. Users may be on the system during the installation of this patch.
2. DSM Sites: If any of these routines is mapped, disable mapping for the
   affected routine(s).
3. Shutdown all Logical Links and incoming and outgoing filers, and
   the Link Manager. Use the options:
 
     Filer and Link Management Options -&gt; 
         SA     Stop All Messaging Background Processes
         LM     TCP/IP Link Manager Start/Stop
 
4. DSM sites: Disable all HL7 UCX Services for this installation.
5. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu to load the
   KIDS package into a Transport global on your system.  
6. On the KIDS:Installation menu, use the following options to install the
   Transport Global:
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
 Select INSTALL NAME: HL*1.6*83     Loaded from Distribution  &lt;date/time&gt;
                      =========
 Install Questions for HL*1.6*83
 
 Want KIDS to INHIBIT LOGONS during the install? YES// NO
                                                       ==
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                       ==
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.
 
 DEVICE: HOME// &lt;Do NOT queue it!&gt;
                ------------------
7. Startup all Logical Links and incoming and outgoing filers. Use the 
 
     Filer and Link Management Options -&gt;
         RA     Restart/Start All Links and Filers
   (Note: Links which do not have "autostart" enabled will need to
          be restarted manually)
   
8. DSM Sites: If you previously disabled an HL7 UCX Service for this
   installation, you may now enable it.
9. DSM Sites: Rebuild your mapped set if necessary.
10. Start Link Manager using the option: "TCP/IP Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;79 SEQ #71</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-12-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
HL7 Capacity Mgt Phase I API
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;62 SEQ #72</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-12-31 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch HL*1.6*62

NOIS: LAS-0100-61912, GRJ-0400-51133, HIN-0501-42418
Test Sites: Las Vegas, NV; Grand Junction, CO
This patch increases the amount of time between checks to see if the filers
have been asked to stop.  In most cases, the check is performed at most
once a minute.

For serial connections, this patch also improves the efficiency of the
inbound filers.  A whole file cross reference has been added to message
STATUS field of the IN QUEUE multiple of the HL LOGICAL LINK FILE, #870.
The inbound filers can now go directly to the logical links which have
inbound messages pending, instead of constantly checking each logical
link to see if any messages are pending.

The post-init for this patch will go through file 870 and fire the new xref.

Here's the updated field with its new xref:
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
STANDARD DATA DICTIONARY #870.019 -- IN QUEUE SUB-FILE
STORED IN ^HLCS(870,
DATA        NAME               GLOBAL        DATA
ELEMENT     TITLE              LOCATION      TYPE
--------------------------------------------------------------------------
870.019,1   STATUS              0;2 SET
                           'P' FOR PENDING; 
                           'D' FOR DONE PROCESSING; 
                           'S' FOR STUB RECORD; 
            LAST EDITED:   MAY 08, 2000 
            HELP-PROMPT:   This is the status of an individual message in 
                           the queue. These statuses control the flow and 
                           processing of the message. 
            DESCRIPTION:   Status of a particular message. Can be Stub,
                           Pending, or Done.  These statuses control the
                           processing of a message. For example, a stub
                           record is created when a message is enqueued,
                           and cannot be processed until its status is
                           changed from 'stub' to 'pending'.  Changing
                           this status is the last thing the Low Layer
                           Protocol does after reading in a message. 
                           Finally, once the message has been processed,
                           its status is changed to 'done'.  
            CROSS-REFERENCE:  870^AISTAT 
                           1)= S ^HLCS(870,"AISTAT",$E(X,1,30),DA(1),DA)=""
                           2)= K ^HLCS(870,"AISTAT",$E(X,1,30),DA(1),DA)
                           Used to quickly identify links with messages
                           in any status, thus improving performance.
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

The option, HL PURGE TRANSMISSIONS, is updated to improve the description
and to set the SCHEDULING RECOMMENDED field to YES.

Here's the updated option:
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
NAME: HL PURGE TRANSMISSIONS            MENU TEXT: Purge Messages
TYPE: run routine                     CREATOR: DIMICELI,RON
PACKAGE: HEALTH LEVEL SEVEN
DESCRIPTION:   This option purges entries from the HL7 message files: 
 773 - HL7 MESSAGE ADMINISTRATION 
 772 - HL7 MESSAGE TEXT 
  
These files contain a record of all outgoing HL7 transmissions and their 
status.  Messages are purged if they are in a certain status and are a
certain number of days old.  The default parameters (number of days) are
taken from fields in file 869.3, HL COMMUNICATION SERVER PARAMETERS.  The
fields should be set such that a balance is struck between the need to
keep disk space from filling up and the need to keep messages around long
enough so that they can be investigated in case problems arise.  Please
see the descriptions of these fields for more information: 
  41 - PURGE COMPLETED MESSAGES 
  42 - PURGE AWAITING ACK MESSAGES 
  43 - PURGE ALL MESSAGES 
 
Note that the number of days in field 43 must be greater than or equal to
the number of days in field 42, which must be greater than or equal to the
number of days in field 41.  If any of the fields violates this rule, then
the default values of these fields will be used, instead.  
 
To purge entries in an error status, run this option directly and answer
'Yes' to the question about purging them.  It is recommended that entries in
an error status be reviewed before purging.  For this reason, such messages
are NOT purged by automatically recurring scheduled runs of this option.  
 
It is recommended that this option be scheduled to run once a day to keep
the files from getting too large.  On TaskMan's 'Edit Option Schedule', the
TASK PARAMETERS field is ignored.  Instead, the parameters are taken from
the fields in file 869.3, noted above.  
ROUTINE: PURGE^HLUOPT1                TIMESTAMP: 55644,54515
SCHEDULING RECOMMENDED: YES           UPPERCASE MENU TEXT: PURGE MESSAGES
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patches HL*1.6*28, *34, &amp; *47.
============================================================================

ROUTINES:
The second line of the routine now looks like:
       ;;1.6;HEALTH LEVEL SEVEN;**[patch list]**;JUL 17,1995

             Before       After
Name         Checksum     Checksum     Patch List
---------------------------------------------------------------------
HLCSDR1      10571563      8554313     2,22,27,30,34,62
HLCSDR2       5218053      4813200     2,9,62
HLCSIN        2517664      4825867     2,30,14,19,62
HLCSOUT       4118513      4765416     25,30,62     
HLCSUTL2      2181860      2309661     18,28,62
HLPAT62        *NEW*        236063     62
HLUOPT1      13112533     12526225     10,13,21,36,19,47,62
* Checksums produced by CHECK^XTSUMBLD

This patch introduces the following new routine:
HLPAT62 - post-init for this patch has no user-callable entry points
============================================================================

INSTALLATION:
NOTE: This patch should be installed during off hours, when activity is at
a minimum.  It requires HL7 patches HL*1.6*28, *34, &amp; *47.
1. Users may be on the system during the installation of this patch.
2. DSM Sites: If any of these routines is mapped, disable mapping for the
   affected routine(s).
3. Shutdown all Logical Links and incoming and outgoing filers, and
   the Link Manager. Use the options:
 
     Filer and Link Management Options -&gt; 
         SA     Stop All Messaging Background Processes
         LM     TCP/IP Link Manager Start/Stop

4. DSM sites: Disable all HL7 UCX Services for this installation.
5. Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu to load the
   KIDS package into a Transport global on your system.  
6. On the KIDS:Installation menu, use the following options to install the
   Transport Global:
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
 Select INSTALL NAME: HL*1.6*62     Loaded from Distribution  &lt;date/time&gt;
                      =========
 Install Questions for HL*1.6*62

 Want KIDS to Rebuild Menu Trees Upon Completion of Install? YES// YES
                                                                   ===
 Want KIDS to INHIBIT LOGONS during the install? YES// NO
                                                       ==
 Want to DISABLE Scheduled Options, Menu Options, and Protocols? YES// NO
                                                                       ==
 Enter the Device you want to print the Install messages.
 You can queue the install by enter a 'Q' at the device prompt.
 Enter a '^' to abort the install.

 DEVICE: HOME// &lt;Do NOT queue it!&gt;
                ------------------
7. Startup all Logical Links and incoming and outgoing filers. Use the 
 
     Filer and Link Management Options -&gt;
         RA     Restart/Start All Links and Filers
   (Note: Links which do not have "autostart" enabled will need to
          be restarted manually)
   
8. DSM Sites: If you previously disabled an HL7 UCX Service for this
   installation, you may now enable it.
9. DSM Sites: Rebuild your mapped set if necessary.
10. Start Link Manager using the option: "TCP/IP Link Manager Start/Stop."
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;78 SEQ #73</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-02-04 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Test sites:    San Francisco VAMC, Bay Pines VAMC, Nashville VAMC
 
NOIS:          ISH-0701-40476, Incorrect field separator in BTS segment
 
Note:          This patch requires that KIDS build HL*1.6*19
               be installed.
 
NOIS call ISH-0701-40476 reported the existence of the Circumflex
character (^) hard-coded as the field separator in the BTS segment when
creating HL7 batch messages. A mismatch in field separator characters will
occur in a message if a VistA application specifies a field separator
character other than the Circumflex.
 
This patch removes the dependency on hard-coded field separator characters
in VistA HL7. This change will accommodate VistA applications that use
field separator characters other than the Circumflex, ensuring that batch
messages will have the same field separator character in all their
segments.
 
 
Routine Information:
=====================
 
The following routine is included in this patch.  The second line of the
routine now looks like this:
 
;;1.6;HEALTH LEVEL SEVEN;&lt;PATCHLIST&gt;; Oct 13, 1995.
 
The VA Kernel checksums for this routine (calculated using 
CHECK^XTSUMBLD) are listed below:
 
                Checksum        Checksum        
  Routine Name  Before Patch    After Patch     Patch List
  ============  ============    ===========     =====================
  HLTF1         9479987         9693677         **5,8,22,25,19,78**
 
Sites should use CHECK^XTSUMBLD to verify checksums after the patch
has been installed.
 
Installation Instructions:
 ==========================
 
   1.  Users are allowed to be on the system during the installation.
 
   2.  AXP/DSM SITES: Review your mapped routine set.  If any of the
       routines listed in the ROUTINE SUMMARY section are mapped, they
       should be removed from the mapped set at this time.
 
   3.  Shutdown all Logical Links, incoming and outgoing filers, and
       the Link Manager using the Filer and Link Management options
       listed below:
 
         Stop All Messaging Background Processes [HL STOP ALL]
         TCP Link Manager Start/Stop [HL START/STOP LINK MANAGER]
 
       AXP/DSM SITES ONLY: Disable all HL7 UCX Services for this
       installation.
 
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
  5.  This patch is now loaded into a transport global on your
       system. The next step is to use KIDS to install the Transport
       global. To do this, use the 'Installation [XPD INSTALLATION 
       MENU]' menu.  You should use each of the following 'Installation'
       menu options in the order shown below:
 
   2  Verify Checksums in Transport Global
   3  Print Transport Global
   4  Compare Transport Global to Current System
   5  Backup a Transport Global
   6  Install Package(s)
 
       When using the 'Install Package(s)' menu option to install 
       the patch build, you will be asked several questions.  The 
       questions asked, and the answers you should supply, are 
       shown below.
 
         INSTALL NAME: &lt;HL*1.6*78&gt;
         Want KIDS to INHIBIT LOGONS during the install?  &lt;NO&gt;
         Want to DISABLE Scheduled Options, Menu Options, and
         Protocols?  &lt;NO&gt;
 
   6.  Start up all Logical Links and incoming and outgoing filers using
       the Filer and Link Management Option's 'Restart/Start All Links
       and Filers [HL TASK RESTART]' menu option.
 
       (Note that links that do not have "autostart" enabled will need
       to be restarted manually.)
 
       AXP/DSM SITES ONLY: If you previously disabled an HL7 UCX Service
       for this installation, you may enable it now.
 
   7.  AXP/DSM Sites:  After the patch has been installed, rebuild your
       map set, if necessary.
 
   8.  Start Link Manager using the 'TCP Link Manager Start/Stop [HL
       START/STOP LINK MANAGER]' menu option. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;71 SEQ #74</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-03-15 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Test sites: Bay Pines, Grand Junction, Sheridan, Tampa,
            Milwaukee, and Iron Mountain
 
Patch HL*1.6*71 addresses the following NOIS:
 
   1. ISH-1100-40056  mpi/pd: commit ack issue, 'MSH' multiple corruption
   2. MAC-0101-61601  corrupted MSH multiple (773) 
   3. ISA-1101-11782  HL7 MESSAGE TRUNCATED ON REMOTE USER LOGGING
 
 
Description:
============
 
Patch HL*1.6*71 fixes the corruption of the MSH Header where the MSH segment 
is received a second time after the body of the HL7 message has been received.  
What occurs is the current VistA HL7 TCP/IP code attempts to reset itself when 
incomplete data is received.  This usually happens when a timeout has expired 
and the complete MSH segment has not been received. When this happens, VistA 
HL7 drops original MSH Header. The original body of the message is now left 
without the header. Next, the sender of the original message resends a repeat 
of the original MSH Header and the body again. The outcome is shown below:
 
  1) Message body.
  2) Message (MSH) header.
  3) Message body. 
 
VistA HL7 now read 1) the Message body and 2) the Message Header as the
original message header itself. 
 
After the installation of this patch (HL*1.6*71), VistA HL7 listeners will no 
longer attempt to reset after timeouts have occurred, once a start block has
been received.
 
This patch also fixes the problem where VistA HL7 will attempt to process an 
incomplete message.  These incomplete messages are the result of a timeout 
occurring before the end-block character (&lt;EB&gt;) is reached while reading
inbound data.  Also, network performance issues may contribute to the
occurrence of Read timeouts.  Furthermore, large inbound messages (100 lines
or more) with relatively short Read timeouts on the receiving side
can also increase the likelihood of receiving incomplete messages.
This patch will discard all incomplete messages as if no data
had been received. At which point, the sender of the HL7 message needs 
to resend the message again to ensure guaranteed delivery.
 
 
Routine Information:
====================
The following routines are included in this patch.  The second line
of each of these routines now looks like:
 
  ;;1.6;HEALTH LEVEL SEVEN;&lt;patchlist&gt;;JUL 17,1995
 
                   Checksum
  Routine         Old         New            2nd Line
  ========     ========     ========     =====================     
  HLCSTCP1      5081718      5982461     **19,43,57,64,71**
 
  List of preceding patches: 64
  Sites should use CHECK^XTSUMBLD to verify checksums.
 
 
Installation Instructions: 
==========================
 
  1.  Users are allowed to be on the system during the installation.  
 
  2.  DSM SITES: Review your mapped set.  If any of the routines listed in
      the Routine Summary section are mapped, they should be removed from 
      the mapped set at this time.  
 
  3.  Shutdown all Logical Links and incoming and outgoing filers, and
      the Link Manager. Use the options:
 
        Filer and Link Management Options -&gt; 
            SA     Stop All Messaging Background Processes
            LM     TCP/IP Link Manager Start/Stop
 
      For DSM sites ONLY, disabled all HL7 UCX Services 
      for this installation.
 
  4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This 
      option will load the KIDS package onto your system.  
 
  5.  The patch has now been loaded into a Transport global on your 
      system. You now need to use KIDS to install the Transport global.  
      On the KIDS menu, under the 'Installation' menu, use the following 
      options: 
 
         2 Verify Checksums in Transport Global 
         3 Print Transport Global 
         4 Compare Transport Global to Current System 
         5 Backup a Transport Global 
         6 Install Package(s) 
             INSTALL NAME: HL*1.6*71 
                           =========
 
        Answer 'NO' to 'Want KIDS to INHIBIT LOGONS during the install?'.  
 
        Answer 'NO' to 'Want to DISABLE Scheduled Options, Menu Options, 
         and Protocols?'.  
 
  6.  Startup all Logical Links and incoming and outgoing filers. Use the 
 
        Filer and Link Management Options -&gt; 
            RA     Restart/Start All Links and Filers 
        (Note that links that do not have "autostart" enabled will need to 
        be restarted manually) 
 
      For DSM sites ONLY, if you previously disabled an HL7 UCX Service 
      for this installation, you may now enable it.  
 
  7.  DSM Sites: Rebuild your mapped set if necessary.  
 
  8.  Start Link Manager using the option: "TCP/IP 
        Link Manager Start/Stop." 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;89 SEQ #75</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-04-23 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Test sites:    MPI
 
NOIS:          ISF-0102-62265
 
Note:          This patch requires that KIDS build HL*1.6*43
               be installed.
 
The Master Patient Index (MPI) system sometimes experiences an undefined
error at MPIDIRQ+5^MPIDIRQ.  The undefined variable is the local variable
TMP("HCSI",$J,1).  Inadequate coding in the Health Level Seven (HL7)
package's direct connect software is the cause of this problem.  Patch
HL*1.6*89 fixes this undefined error condition.
 
The routine HLCSAS is included in this patch.  The first and second
lines of this routine are shown below.
 
   HLCSAS  ;ISCSF/RWF - MPI direct connect server ;02/19/99  11:44
           ;;1.6;HEALTH LEVEL SEVEN;**43,89**;Jul 17,1995
 
The VA Kernel checksum for the routine included in this patch
(calculated using CHECK^XTSUMBLD) is listed below.
 
                Checksum        Checksum
  Routine Name  Before Patch    After Patch     Patch List
  ============  ============    ===========     =====================
  HLCSAS        2943880         3066068         43,89
 
Sites should use CHECK^XTSUMBLD to verify checksums after patch
installation.
 
 Installation Instructions:
 ==========================
 
   NOTICE:  Do not proceed unless patch HL*1.6*43 has been installed.
 
   1.  Users are allowed to be on the system during the installation.
 
   2.  AXP/DSM SITES: Review your mapped routine set.  If the
       routine listed in the ROUTINE SUMMARY section is mapped, it
       should be removed from the mapped set at this time.
 
   3.  Shutdown all Logical Links, incoming and outgoing filers, and
       the Link Manager using the Filer and Link Management options
       listed below.
 
          Stop All Messaging Background Processes [HL STOP ALL]
          TCP/IP Link Manager Start/Stop [HL START/STOP LINK MANAGER]
 
      AXP/DSM SITES ONLY: Disable all HL7 UCX Services for this
      installation.
 
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
   5.  This patch is now loaded into a transport global on your
       system. The next step is to use KIDS to install the Transport
       global. This is done using the 'Installation' menu's 'Install
       Package(s) [XPD INSTALL BUILD]' menu option. When using this
       menu option to install the patch build, you will be asked
       several questions.  The questions, and the answers you should
       supply, are shown below.
 
       INSTALL NAME: &lt;HL*1.6*89&gt;
       Want KIDS to INHIBIT LOGONS during the install?  &lt;NO&gt;
       Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?  &lt;NO&gt;
 
   6.  Start up all Logical Links and incoming and outgoing filers using
       the Filer and Link Management Option's 'Restart/Start All Links
       and Filers [HL TASK RESTART]' menu option.
 
       (Note that links that do not have "autostart" enabled will need
       to be restarted manually.)
 
      AXP/DSM SITES ONLY: If you previously disabled an HL7 UCX Service
      for this installation, you may enable it now.
 
   7.  AXP/DSM Sites:  After the patch has been installed, rebuild your
       map set, if necessary.
 
   8.  Start Link Manager using the 'TCP/IP Link Manager Start/Stop [HL
       START/STOP LINK MANAGER]' menu option.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;92 SEQ #76</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-05-06 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The purpose of this patch is to export the VAFHIE entry in the
HL LOGICAL LINK (#870) file.  The VAFHIE node is distributed
with data in the following fields:
 
    NODE: VAFHIE
    INSTITUTION: AUSTIN
    LLP TYPE: TCP
    DOMAIN: FHIE.DOMAIN.EXT
    EXCEED RE-TRANSMIT ACTION: restart
    ACK TIMEOUT: 240
    TCP/IP ADDRESS: 127.0.0.1           
    TCP/IP PORT: 5000
    TCP/IP SERVICE TYPE: CLIENT (SENDER)
 
The Federal Heath Information Exchange (FHIE) will
require this enhancement for viewing data from facilities outside
the Veteran's Health Administration (VHA).  Patch HL*1.6*92 is
distributed as an EMERGENCY patch because it needs to be in place
at all facilities to enable FHIE to begin data transmissions by April 25,
2002.
 
Instructions in patch XM*999*148 must be followed prior to
installing patch HL*1.6*92.  XM*999*148 is an informational patch
with directions for creating the FHIE.DOMAIN.EXT domain.
 
Test Sites:
===========
El Paso VAMC
San Francisco VAMC
Puget Sound HCS
Washington VAMC
  
Routine Summary:
================
The following is a list of the routine(s) included in this patch.  The
second line of each of these routine(s) will look like:
 
;;1.6;HEALTH LEVEL SEVEN;**[Patch List]**;JUL 17, 1995
CHECK^XTSUMBLD results:
 
Routine       Before Patch       After Patch      
--------      ------------       ------------     
HLP92             N/A              7643045         
HLP92ENV          N/A              1183086        
 
Environment Check Routine HLP92ENV:
===================================
The environment check routine, HLP92ENV, checks to see if patch
XM*999*148 is in place.  It does this by checking for the existence
of the FHIE.DOMAIN.EXT entry in the DOMAIN (#4.2) file.  If the
entry is not found, the routine aborts with the following message:
 
    "No DOMAIN (#4.2) file entry was found for FHIE.DOMAIN.EXT.
    Follow the instructions in VA MailMan patch XM*999*148 to create
    this new entry in the DOMAIN (#4.2) file.  After the new DOMAIN
    has been created, re-install patch HL*1.6*92."
 
Pre-Install Routine PRE^HLP92:
==============================
The pre-install routine, PRE^HLP92, looks for the AUSTIN (Station Number
200) entry in the INSTITUTION (#4) file.  If the entry is present, the
pre-install is done.  If the entry does not exist, it is created.  This
entry is pointed to from the HL LOGICAL LINK (#870) file by the VAFHIE
entry distributed in this patch.
 
Post-Install Routine PST^HLP92:
===============================
The post-install routine, PST^HLP92, sets the AUTOSTART (#4.5) field
to Enabled for the VAFHIE entry in the HL LOGICAL LINK (#870) file.
Then, it examines the system to determine if it is the production or
test account.  If it is the production account, the post-install is
finished.  If it is a test account, the TCP/IP ADDRESS (#400.01) and
DOMAIN (#.03) fields for the VAFHIE entry in the HL LOGICAL LINK (#870)
file are removed to ensure that messaging does not occur from a test
account.
 
When Installing in Test Account:
==========================
Before installing this patch in your test account, confirm that the
DEFAULT PROCESSING ID (#.03) field in the HL COMMUNICATION SERVER
PARAMETERS (#869.3) file is set up properly according to the instructions
for the creation of a mirror account.  In programmer mode, enter the
following command.
  
&gt;W $$PARAM^HLCS2
45^FO-SLC.DOMAIN.EXT^T^51^ISC SALT LAKE CITY^^3^HL7^25^30^85^30
  
If the third piece of the returned data is NOT "T", then the steps for
mirroring a test account should be reviewed and updated.
 
Installation Instructions:
==========================
This patch may be loaded with users on the system.  You may wish
to install it during non-peak hours.  Installation will take less
than 3 minutes.
 
1.  Use the INSTALL/CHECK MESSAGE option on the Packman menu.  [Note: 
    TEXT PRINT/DISPLAY option in the PackMan menu will display the 
    patch text only.]
 
2.  The routines for this patch are new and can be deleted after
    installation; therefore routine mapping is not an issue for
    this patch.
 
3.  From the Kernel Installation and Distribution System Menu, select
    the Installation menu.
 
4.  From this menu, you may elect to use the following options (when
    prompted for the INSTALL NAME, enter HL*1.6*92).
 
    (a)  Backup a Transport Global - this option will create a backup
         message of any routines exported with the patch.  It will NOT
         backup any other changes such as DDs or templates.
 
    (b)  Compare Transport Global to Current System - this option will
         allow you to view all changes that will be made when the
         patch is installed.  It compares all components of the patch
         (routines, DDs, templates, etc.).
 
    (c)  Verify Checksums in Transport Global - this option will allow
         you to ensure the integrity of the routines that are in the
         transport global.
 
    (d)  Print Transport Global - this option will allow you to view the
         components of the KIDS build.
 
5.  Use the Install Package(s) option and select the package HL*1.6*92.
   
6.  When prompted 'Want KIDS to INHIBIT LOGONs during the install? YES//',
    respond NO.
  
7.  When prompted 'Want to DISABLE Scheduled Options, Menu Options, and
    Protocols? YES//', respond NO.
  
8.  Routines HLP92ENV and HLP92 can be deleted from your system after
     successful installation of this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;91 SEQ #77</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-05-28 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Test sites:    Greater Los Angeles Regional Healthcare (West Los Angeles),
               Grand Junction, Sheridan
 
NOIS:          None
 
Note:          This patch requires that KIDS builds HL*1.6*47, HL*1.6*57,
               HL*1.6*59, and HL*1.6*82 be installed.
 
OVERVIEW
 
The Health Level 7 (HL7) messages sent and received by sites are being
increasingly studied for workflow patterns and totals.  This evaluation of
HL7 data by clients of the HL7 package has resulted in the request for HL7
totals subdivided by the namespace of the message's originating package.
Unfortunately, the namespace of a message is not always determinable.
 
This patch provides a method for HL7 clients to pass their namespace into
the HL7 APIs that create messages or acknowledgements. When this is done,
the provided namespace will be stored with the message, enabling
subsequent totaling by namespace.  Additional details of this patch are
provided next.
 
DETAILS
 
There are three supported HL7 APIs by which HL7 messages are created:
 
 - GENERATE^HLMA(HLEID,HLARYTYP,HLFORMAT,.HLRESLT,HLMTIEN,.HLP)
 - GENACK^HLMA1(HLEID,HLMTIENS,HLEIDS,HLARYTYP,HLFORMAT,
               .HLRESLTA,HLMTIENA,.HLP)
 - DIRECT^HLMA(HLEID,HLARYTYP,HLFORMAT,.HLRESLT,HLMTIEN,.HLP)
 
In all three APIs, the last parameter HLP is passed by reference.  Prior
to calling these APIs, the client package may set HLP array elements and
then pass these by reference into the API.  An example call using the HLP
array is shown below.
 
  &lt;tab&gt;S HLP("SECURITY")=1214315
  &lt;tab&gt;D GENERATE^HLMA(HLEID,HLARYTYP,HLFORMAT,.HLRESLT,HLMTIEN,.HLP)
 
These APIs, including the HLP pass-by-reference array, are documented in
section 12.1.2, 12.1.3, and 12.1.4 of the VistA HL7 Site Manager &amp;
Developer Manual.
 
After patch HL*1.6*91 is installed, an additional HLP array element may
be defined before calling these APIs by which the namespace of the client
process can be made known to the API code.  This additional HLP array
element is HLP("NAMESPACE").  An example call using this new array
element is shown below.
 
  &lt;tab&gt;S HLP("NAMESPACE")="DG"
  &lt;tab&gt;S HLP("SECURITY")=1214315
  &lt;tab&gt;D GENERATE^HLMA(HLEID,HLARYTYP,HLFORMAT,.HLRESLT,HLMTIEN,.HLP)
 
(The array contained in these three APIs is HLP, and this patch
documentation consistently refers to HLP.  However, since this is a
pass-by-reference array, any array name may be selected by the client
process calling these APIs.)
 
Patch HL*1.6*91 creates a new field in the HL7 Message Text file (#772)
to store the client process namespace when it is passed as described
above.  This new field's definition is shown below.
 
'NAMESPACE' FIELD STANDARD DATA DICTIONARY LISTING
--------------------------------------------------
772,16        NAMESPACE              0;13 FREE TEXT
 
       INPUT TRANSFORM:  K:$L(X)&gt;4!($L(X)&lt;1)!'(X?1U1.3NU) X
       LAST EDITED:      FEB 15, 2002
       HELP-PROMPT:      Answer must be 1-4 characters in length,
                         and start with 1 uppercase letter,
                         followed by up to 3 uppercase letters and
                         numerics.
       DESCRIPTION:      This field must not be filled in
                         manually.  It will be filled in
                         automatically by the HL7 processes that
                         create entries in the HL7 Message Text
                         file (#772).  In most instances,
                         applications will call GENERATE^HLMA,
                         GENACK^HLMA, or DIRECT^HLMA.  When they
                         do, they will pass by reference into the
                         last OPTIONS (in the documentation)
                         parameter the value of the namespace.
                         The value of the namespace will be in the
                         form of OPTIONS("NAMESPACE")=NAMESPACE.
 
                         Please note that the calls to the three
                         APIs mentioned above use the variable HLP
                         to hold the passed in by reference array.
                         So, in the HLMA code (and other code
                         invoked by HLMA), the actual variable
                         used is HLP("NAMESPACE").
 
                         This field is populated by UPDATE^HLTF0.
 
When the client process defines HLP("NAMESPACE") prior to the API call,
and passes in the HLP array (as shown in the above example), the defined
namespace is stored in the HL7 Message Text file (#772) entry created.
The code that actually stores HLP("NAMESPACE") in this file is contained
in UPDATE^HLTF0.
 
All HLP array elements are optional; they are not required when these
APIs are called.  However, it is strongly recommended that the
HLP("NAMESPACE") array element be defined whenever it is possible to
determine the proper namespace.
 
 
Note: HL7 messaging by the Master Patient Index (MPI) application occurs
      using the EN^HLCSAC API.  The private use of this API by the MPI
      application is covered by Integration Agreement 3471.  It is
      important that MPI HL7 messages be assigned the correct namespace,
      and this is done automatically now.  There is no need for the
      MPI application to pass their namespace into the EN^HLCSAC API.
      In the future, if this API is opened up to other applications,
      there is a way to override the MPI namespace saved.  If the
      local variable HLP("NAMESPACE") is defined before calling the
      EN^HLCSAC API, the value of HLP("NAMESPACE") will be saved in
      the message as the namespace.
 
 
The first and second lines of the routines included in this patch are
shown below.
 
HLCSAS1 ;ISCSF/RWF - Read data ;08/24/99  08:06
        ;;1.6;HEALTH LEVEL SEVEN;**43,57,91**;Jul 17,1995
HLMA    ;AISC/SAW-Message Administration Module ;09/20/2001  12:34
        ;;1.6;HEALTH LEVEL SEVEN;**19,43,58,63,66,82,91**;Oct 13, 1995
HLMA1   ;AISC/SAW-Message Administration Module (Cont'd) ;04/06/99
          10:56
        ;;1.6;HEALTH LEVEL SEVEN;**19,43,91**;Oct 13, 1995
HLMA2   ;AISC/SAW-Message Administration Module ;09/20/2001  12:35
        ;;1.6;HEALTH LEVEL SEVEN;**19,43,57,58,64,65,76,82,91**;
          Oct 13, 1995
HLTF0   ;AISC/SAW,JRP - File Data in Message Text File ;
          05/05/2000 09:01
        ;;1.6;HEALTH LEVEL SEVEN;**12,19,64,91**;Oct 13, 1995
HLTP1   ;AISC/SAW-Transaction Processor Module (Cont'd) ;04/21/98  09:38
        ;;1.6;HEALTH LEVEL SEVEN;**34,47,91**;Oct 13, 1995
HLTP4   ;SFIRMFO/RSD - Transaction Processor for TCP ;03/07/2000  17:41
        ;;1.6;HEALTH LEVEL SEVEN;**19,57,59,91**;Oct 13, 1995
 
The VA Kernel checksum for the routine included in this patch
(calculated using CHECK^XTSUMBLD) is listed below.
 
                Checksum        Checksum
  Routine Name  Before Patch    After Patch     Patch List
  ============  ============    ===========     =====================
  HLCSAS1       1743950         2183617         43,57,91
  HLMA          9200711         9200711         19,43,58,63,66,82,91
  HLMA1         3849338         3849338         19,43,91
  HLMA2         8331015         8331015         19,43,57,58,64,65,76,82,91
  HLTF0         3232637         3415603         12,19,64,91
  HLTP1         4286011         4286011         34,47,91
  HLTP4         7964901         7964901         19,57,59,91
 
Sites should use CHECK^XTSUMBLD to verify checksums after patch
installation.
 
There are five routines above whose checksums will not change after this
patch is installed; HLMA, HLMA1, HLMA2, HLTP1, and HLTP4.  The only
changes made to these routines is the addition of comment lines
documenting the new HLP("NAMESPACE") array element.  Since comment lines
are not counted in a routine's checksum, the addition of these comment
lines do not affect the routine's checksums.
 
Installation Instructions:
==========================
 
   NOTICE:  Do not proceed unless patches HL*1.6*47, HL*1.6*57,
            HL*1.6*59, and HL*1.6*82 have been installed.
 
   1.  Users are allowed to be on the system during the installation.
 
   2.  AXP/DSM SITES: Review your mapped routine set.  If the
       routine listed in the ROUTINE SUMMARY section is mapped, it
       should be removed from the mapped set at this time.
 
   3.  Stop all background processes (logical links and incoming
       and outgoing filers) using the 'Filer and Link Management
       Option's 'Stop All Messaging Background Processes [HL STOP ALL]'
       menu option.
 
   4.  Stop the link manager using the 'TCP Link Manager Start/Stop
       [HL START/STOP LINK MANAGER]' menu option.
 
   5.  AXP/DSM SITES ONLY: Disable all HL7 UCX Services for this
       installation.
 
   6.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
   7.  This patch is now loaded into a transport global on your
       system. The next step is to use KIDS to install the Transport
       global. This is done using the 'Installation' menu's 'Install
       Package(s) [XPD INSTALL BUILD]' menu option. When using this
       menu option to install the patch build, you will be asked
       several questions.  The questions, and the answers you should
       supply, are shown below.
 
       INSTALL NAME: &lt;HL*1.6*91&gt;
       Want KIDS to INHIBIT LOGONS during the install?  &lt;NO&gt;
       Want to DISABLE Scheduled Options, Menu Options,
         and Protocols?  &lt;NO&gt;
 
   8.  Start all background processes (logical links and incoming
       and outgoing filers) using the Filer and Link Management
       Option's 'Restart/Start All Links and Filers [HL TASK RESTART]'
       menu option.
 
       (Note that links that do not have "autostart" enabled will need
       to be restarted manually.)
 
   9. AXP/DSM SITES ONLY: If you previously disabled an HL7 UCX Service
      for this installation, you may enable it now.
 
  10.  AXP/DSM SITES ONLY: After the patch has been installed, rebuild
       your map set, if necessary.
 
  11.  Start the link manager using the 'TCP Link Manager Start/Stop
       [HL START/STOP LINK MANAGER]' menu option.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;85 SEQ #78</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-06-05 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Refer to the Forum patch text on patch HL*1.6*85 for patch information.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;87 SEQ #79</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-06-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Associated Patches:  This patch requires that KIDS build HL*1.6*77 be 
                     installed.
 
Test sites:    Oklahoma City VAMC, Muskogee VAMC, San Francisco VAMC
 
NOIS:    OKL-1201-70586   VA* Logical Links not transmitting
         ISF-0700-62124   Duplicate Entries for messages
         SDC-0301-60090   Message stuck in 'Awaiting ACK' status
         ISF-0400-62120   Excessive Retransmissions
         ISH-0900-40469   re-transmissions for a message awaiting an ack
 
This patch fixes the problem where a TCP client logical link and its 
corresponding listener logical link lose synchronization.  Loss of 
synchronization creates excessive retransmission of messages and their 
acknowledgements, causing side effects: one is that the client link gets 
stuck in a "Reading" state because its TCP receive buffer fills up; 
another is that the disk on both the sending and the receiving sides 
fills up at a faster rate.
 
This patch makes corrections in the way the TCP client logical link 
retransmits a message when its corresponding acknowledgement does not 
arrive in time or receives an incorrect acknowledgement.  Previous HL7 
code allowed the logical link to retransmit a message when the 
acknowledgement message was incorrect, including an "incorrect msg id" 
acknowledgement.  This patch corrects the code to allow retransmission of 
a message only when the logical link does not receive an acknowledgement 
in time (timed out) and ignores incorrect acknowledgements.
 
Routine Information:
=====================
 
The following routine is included in this patch.  The second line of the 
routine now looks like this:
 
;;1.6;HEALTH LEVEL SEVEN;**19,43,49,57,63,64,66,67,76,77,87**;JUL 17,1995.
 
The VA Kernel checksums for this routine (calculated using 
CHECK^XTSUMBLD) are listed below:
 
  Routine     Checksum        Checksum        
  Name        Before Patch    After Patch     
  ========    ============    ===========     
  HLCSTCP2    12129232        12913767 
 
  Patch List
  =====================
  **19,43,49,57,63,64,66,67,76,77,87**;
 
Sites should use CHECK^XTSUMBLD to verify checksums after the patch
has been installed.
 
Installation Instructions:
 ==========================
 
   1.  Users are allowed to be on the system during the installation.
 
   2.  AXP/DSM SITES: Review your mapped routine set.  If any of the
       routines listed in the ROUTINE SUMMARY section are mapped, they
       should be removed from the mapped set at this time.
 
   3.  Shutdown all Logical Links, incoming and outgoing filers, and
       the Link Manager using the Filer and Link Management options
       listed below:
 
         Stop All Messaging Background Processes [HL STOP ALL]
         TCP Link Manager Start/Stop [HL START/STOP LINK MANAGER]
 
       AXP/DSM SITES ONLY: Disable all HL7 UCX Services for this
       installation.
 
   4.  Use the 'INSTALL/CHECK MESSAGE' option on the PackMan menu. This
       option will load the KIDS package onto your system.
 
  5.  This patch is now loaded into a transport global on your
       system. The next step is to use KIDS to install the Transport
       global. To do this, use the 'Installation [XPD INSTALLATION 
       MENU]' menu.  You should use each of the following 'Installation'
       menu options in the order shown below:
 
         Verify Checksums in Transport Global
         Print Transport Global
         Compare Transport Global to Current System
         Backup a Transport Global
         Install Package(s)
 
       When using the 'Install Package(s)' menu option to install 
       the patch build, you will be asked several questions.  The 
       questions asked, and the answers you should supply, are 
       shown below.
 
         INSTALL NAME: &lt;HL*1.6*87&gt;
         Want KIDS to INHIBIT LOGONS during the install?  &lt;NO&gt;
         Want to DISABLE Scheduled Options, Menu Options, and
         Protocols?  &lt;NO&gt;
 
   6.  Start up all Logical Links and incoming and outgoing filers using
       the Filer and Link Management Option's 'Restart/Start All Links
       and Filers [HL TASK RESTART]' menu option.
 
       (Note that links that do not have "autostart" enabled will need
       to be restarted manually.)
 
       AXP/DSM SITES ONLY: If you previously disabled an HL7 UCX Service
       for this installation, you may enable it now.
 
   7.  AXP/DSM Sites:  After the patch has been installed, rebuild your
       map set, if necessary.
 
   8.  Start Link Manager using the 'TCP Link Manager Start/Stop [HL
       START/STOP LINK MANAGER]' menu option. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;95 SEQ #80</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-08-14 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*95 in the National Patch Module for complete information 
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;94 SEQ #81</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-08-14 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the full patch description for HL*1.6*94 on the national Forum patch
module system. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;99 SEQ #82</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-11-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*99 in the National Patch Module for complete information 
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;100 SEQ #83</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-11-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*100 in the National Patch Module for complete information
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;88 SEQ #84</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-12-20 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*88 in the National Patch Module for complete information
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;98 SEQ #85</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-12-20 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*98 in the National Patch Module for complete information 
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;93 SEQ #86</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-05-20 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*93 description on Forum for full instructions and 
information.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;101 SEQ #87</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-05-20 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please refer to the Description in the FORUM Patch Module for details.
Patch HL*1.6*101.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;103 SEQ #88</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-06-28 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*103 in the National Patch Module for complete information
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;96 SEQ #89</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-06-28 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
see build description in the Patch description section.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;107 SEQ #90</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-08-13 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see patch HL*1.6*107 description on Forum for full instructions and
information.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;84 SEQ #91</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-03-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*84 in the National Patch Module for complete information 
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;109</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-03-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*109 in the National Patch Module for complete information
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;115 SEQ #93</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-03-30 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the patch description in the National Patch Module for a complete
description of this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;108 SEQ #94</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-05-07 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See description for patch HL*1.6*108 in the National Patch Module for
complete information on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;116 SEQ #95</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-08-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the patch description on Forum, in the National Patch Module.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;114 SEQ #96</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-11-11 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See patch HL*1.6*114 in the National Patch Module for complete information
on this patch.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;117 SEQ #97</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-12-28 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the patch description on Forum, in the National Patch Module.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;125 SEQ #98</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-02-12 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;123 SEQ #99</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-09-05 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the patch description on Forum, in the National Patch Module.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;118 SEQ #100</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-09-24 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
HL7 parsing utilities.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;126 SEQ #101</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-10-20 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
HL7 2.0
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;130 SEQ #102</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-01-12 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the NPM on Forum for a complete description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;120 SEQ #103</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-05-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;131 SEQ #104</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-06-08 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>



</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;133 SEQ #105</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-09-23 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the NPM for a complete description of this patch.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;132 SEQ #106</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-06-27 21:41:15</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the National Patch Module on Forum.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;134 SEQ #107</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-09-04 23:36:58</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the National Patch Module for a full description.


</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;136 SEQ #108</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-09-04 23:48:54</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
HLO Purge Settings

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;122 SEQ #109</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2008-02-03 22:36:29</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;137 SEQ #110</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2008-05-26 19:14:26</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the NPM for the description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;141 SEQ #111</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2008-07-22 14:48:55</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;140 SEQ #112</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-04-21 13:47:06</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;138 SEQ #113</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-04-22 12:05:50</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Patch HL*1.6*138 corrects several minor problems with HL7 OPTIMIZED (HLO)
and provides several new features.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;142 SEQ #114</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-06-30 11:20:07</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;139 SEQ #115</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-07-07 17:14:01</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;143 SEQ #116</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-01-14 11:57:36</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the National Patch Module on Forum.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;146 SEQ #117</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-01-14 11:57:46</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the National Patch Module on Forum for a complete description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;145 SEQ #118</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-07-22 15:50:05</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;148 SEQ #119</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-10-14 17:34:42</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;147 SEQ #120</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-11-09 10:16:35</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the National Patch Module on Forum for a complete description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;151 SEQ #121</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-12-02 09:32:23</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the National Patch Module for the description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;153 SEQ #122</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2011-06-29 09:30:01</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the National Patch Module on Forum.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;152 SEQ #123</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2011-10-06 10:53:07</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please see the National Patch Module on Forum for a complete description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;155 SEQ #124</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2011-11-28 15:29:41</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Please seen the National Patch Module on Forum for a complete description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;157 SEQ #125</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2012-09-12 16:27:04</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;158 SEQ #126</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2012-09-19 17:06:40</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
See the National Patch Module on Forum for the patch description.

</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;161 SEQ #127</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2013-12-10 16:54:46</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following:
 
-Problems caused while editing active HL Logical Links
-Problems with "AE" cross reference leading to incorrect setting
 values and inability to delete.
-Incorrect documentation for HL7 API GENACK^HLMA1 and potential
 &lt;UNDEFINED&gt; error.
-Extrinsic function NEWEVENT^HLEVAPI could potentially execute
 without returning a value resulting in a &lt;COMMAND&gt; error. 
</pre>
</dt>
</li>
</ol>
</dd></dl>
</li>
</ol>
</td>
</tr>
<tr>
<td>POST-INITIALIZATION ROUTINE</td>
<td><a href="http://code.osehra.org/dox/Routine_HLPOST.html">HLPOST</a></td>
</tr>
<tr>
<td>POST-INIT COMPLETION DATE</td>
<td>1996-06-13 11:57:47</td>
</tr>
<tr>
<td>PRE-INIT AFTER USER COMMIT</td>
<td>HLPRE16</td>
</tr>
<tr>
<td>PRE-INIT COMPLETION DATE</td>
<td>1996-06-13 11:55:31</td>
</tr>
<tr>
<td>EXCLUDED NAME SPACE</td>
<td>
<ol>
<li>
<dt>EXCLUDED NAME SPACE:  &nbsp;&nbsp;HLZ</dt>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</body></html>