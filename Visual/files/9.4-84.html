<html>
<link rel="stylesheet" href="../datatable/css/demo_page.css" type="text/css" id=""/>
<link rel="stylesheet" href="../datatable/css/demo_table.css" type="text/css" id=""/>
<link rel="stylesheet" href="../style.css" type="text/css" id=""/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../datatable/js/jquery.dataTables.js"></script>
<!-- Google Analytics -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-43872538-6', 'osehra.org');
 ga('send', 'pageview');
</script>


<script type="text/javascript" id="js">
  $(document).ready(function() {
  // call the tablesorter plugin
      $("#OS40LTg0").dataTable({
        "bPaginate": false,
        "bLengthChange": false,
        "bInfo": false,
        "bStateSave": true,
        "bSort": false
      });
}); </script>

<body id="dt_example"><div id="container" style="width:80%"><h1>DRUG ACCOUNTABILITY (84) &nbsp;&nbsp;  PACKAGE (9.4)</h1>
<div id="demo"><table id="OS40LTg0" class="display">
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME</td>
<td>DRUG ACCOUNTABILITY</td>
</tr>
<tr>
<td>PREFIX</td>
<td>PSA</td>
</tr>
<tr>
<td>SHORT DESCRIPTION</td>
<td>Drug Accountability Inventory and Tracking module.</td>
</tr>
<tr>
<td>FILE</td>
<td>
<ol>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-50.html">DRUG</a></dt>
<dl><dt>FIELD:</dt>
<dd>
<ol>
<li>
<dt>FIELD:  &nbsp;&nbsp;IFCAP ITEM NUMBER</dt>
</li>
</ol>
</dd></dl>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-59.7.html">PHARMACY SYSTEM</a></dt>
<dl><dt>FIELD:</dt>
<dd>
<ol>
<li>
<dt>FIELD:  &nbsp;&nbsp;LAST DRUG LINKED</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;LAST DRUG LINKER</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;LAST DRUG LINK DATE</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;DATE V2 CS/DA CONVERSION</dt>
</li>
<li>
<dt>FIELD:  &nbsp;&nbsp;INPATIENT DISPENSING UPDATE?</dt>
</li>
</ol>
</dd></dl>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-58.8.html">DRUG ACCOUNTABILITY STATS</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-58.81.html">DRUG ACCOUNTABILITY TRANSACTION</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;NO</dt>
</li>
<li>
<dt>FILE:  &nbsp;&nbsp;<a href="1-58.84.html">DRUG ACCOUNTABILITY TRANSACTION TYPE</a></dt>
<dt>UPDATE THE DATA DICTIONARY:  &nbsp;&nbsp;YES</dt>
<dt>DATA COMES WITH FILE:  &nbsp;&nbsp;YES</dt>
</li>
</ol>
</td>
</tr>
<tr>
<td>DEVELOPER (PERSON/SITE)</td>
<td>LARRY LANDRIE/B'HAM ISC</td>
</tr>
<tr>
<td>DEVELOPMENT ISC</td>
<td>BIRMINGHAM</td>
</tr>
<tr>
<td>CURRENT VERSION</td>
<td>3.0</td>
</tr>
<tr>
<td>VERSION</td>
<td>
<ol>
<li>
<dt>VERSION:  &nbsp;&nbsp;2.0</dt>
<dt>DATE DISTRIBUTED:  &nbsp;&nbsp;1993-12-03 00:00:00</dt>
<dt>DATE INSTALLED AT THIS SITE:  &nbsp;&nbsp;1996-07-18 00:00:00</dt>
<dl><dt>PATCH APPLICATION HISTORY:</dt>
<dd>
<ol>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;8</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-02-06 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Fix undefined error reported in NOIS#.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;9</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1997-06-30 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
PSA*2.0*9
</pre>
</dt>
</li>
</ol>
</dd></dl>
</li>
<li>
<dt>VERSION:  &nbsp;&nbsp;3.0</dt>
<dt>DATE DISTRIBUTED:  &nbsp;&nbsp;2005-11-19 00:00:00</dt>
<dt>DATE INSTALLED AT THIS SITE:  &nbsp;&nbsp;1997-11-05 00:00:00</dt>
<dt>INSTALLED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION OF ENHANCEMENTS:  &nbsp;&nbsp;<pre>
Drug Accountability/Inventory Interface V. 3.0
</pre>
</dt>
<dl><dt>PATCH APPLICATION HISTORY:</dt>
<dd>
<ol>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;6 SEQ #1</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-03-30 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 The following changes were made to address Y2K compliance issues.
  
 Routine   : PSUDP
 Line Tag  : PICKLST+10
 Exception : Setting the node in global ^XTMP("PSAPV",0) to DT+1 would not
             be appropriate for dates such as FEB 28th.
 Resolution: Changed to a "C^%DTC" call which uses FileManager to calculate
             the correct date.
  
 Line Tag  : PROCESS+11
 Exception : Flagged to be changed 
             $E(PSADT-100-(+$E(PSADT,4,5)=1*8800),1,5)*100
 Resolution: No change necessary, the code is calculating the previous
             month, and all Y@K checks appear to function correctly.
 
 Routine   : PSAUP1
 Line Tag  : XTMP+21
 Exception : Use of checking to see if number is &gt;90 does not comply with
             a 70-30 split.
 Resolution: Changed to check for date within the recommended 70-30 split.
 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;1 SEQ #2</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-08-31 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 If an items quantity is adjusted to zero, the system would pick up the
 invoiced quantity instead.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;8 SEQ #3</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-09-23 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Compliance with MailMan patch XM*7.1*50 and NDF patch PSN*3.18*5
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;11 SEQ #4</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1998-10-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
A variable was mistakenly left out in the programming of patch PSA*3*8.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;3</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-01-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch is a combination of patches 3,4,5,7,8,9,10,11,12,13.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;9 SEQ #6</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-01-19 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch creates the PHARMACY PRIME VENDOR mail group. The Prime Vendor
Line Item Report will be sent to this mail group from the Austin
Automation Center twice per week.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;10 SEQ #8</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-02-23 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
When the Receiving Directly into Drug Accountability [PSA RECEIVING]
option is used, the following error occurs:
$ZE= HEADER+3^PSAREPV:3, %DSM-E-UNDEF, undefined variable PSA(2)
 
Also, the problem of not being able to enter decimal digits for the
dispense units per order unit has been corrected.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;12 SEQ #9</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-06-03 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 1). When an adjustment is made to the balance of a drug in a pharmacy
 location or invoice, the adjustment activity is recorded, but the
 stored data is not updated. Some Drug Accountability programs make
 the adjustments internally before printing out the drug balances,
 while other programs do not make these necessary calculations. Other
 VISTA packages extract data from the Drug Accountability files on
 a regular basis, by not setting up the programs internally to make the
 calculations for the adjustments, the data they are obtaining is
 incorrect.
 
 2). There is a problem with invoices being marked as processed when 
 in fact they should not have been marked as such because there are
 data elements missing.
 Solution: When the individual line items are being processed the system
           checks the order unit. For a line item to successfully process
           as having an order unit, it must match one of the following 3
           conditions:
            a). The order unit is defined in the initial uploaded item
            b). An adjusted order unit has been entered
            c). The order unit is defined in the synonym multiple in
                the drug file.
 
 3). After installing patch #3, if an invoice is being processed that is
 already on file for the same order number, a string too long error
 occurs at INVOICE+17 of routine PSAPROC7. 
 
 4). Invoices are passing through the processing and verification portions 
 of Drug Accountability with no problem, however, when the system does
 the checking of the data for updating price and drug information, these
 problems are found, and nothing is updated.
 Solution: This is in part because of problem #2 above, the order unit.
           When the line item's data is being placed into the DRUG 
           ACCOUNTABILITY ORDER file (#58.811), the system assigns the
           order unit to be either the value initially entered on the 
           invoice, or the value in the synonym multiple, otherwise zero.
           No mention of the adjusted order unit. The order of assignment
           should be, synonym multiple, adjusted, then initial upload.
 
 5). Several facilities do not have their pharmacy locations defined
 properly in the DRUG ACCOUNTABILITY STATS file (#58.8), which results in
 errors. Usually the error is an undefined variable PSACOMB.
 (fixed in routine PSAUTL1)
 
 6). Uploading of incomplete invoiced data is corrected.
 
 7). The dispense unit per order unit is no longer asked for on supply
 items.
 (PSAVER2 - If the user identifies the drug as supply, then they should 
 not be prompted for DUOU. Added a Line of code to check for PSASUPP.
 
 8). When the PSA IV ALL LOCATIONS is executed each evening as a background
 job, part of the OP dispensing functionality is to check each ward that
 is associated with the pharmacy location in the DRUG ACCOUNTABILITY STATS
 file (#58.8). Currently the program will discontinue processing if the ward
 doesn't match the pharmacy location, BUT it also quits if the ward
 does match the location. Therefore no OP dispensing data is recorded.
 (fixed in routine PSAPSI3)
 
 9). Balances on Controlled Substances are not updated when the orders
 are verified.
 
 10). When an invoice is being processed/edited, the order unit field will
 display the order unit associated with the line item based on adjustment,
 invoice's order unit or the order unit in the synonym of the drug file.
 When this field is to be edited, the only choices displayed are the 
 original invoiced order unit or the drug file entry. If an adjustment
 had been made, the program ignored it. NOIS (HUN-1197-20485)
 (Fixed 13 Jan 99 in routine PSAPROC3).
 
 11). When patch PSA*3*3 was sent out, the second line syntax for the
 routines PSAUDP &amp; PSAUP1 which were released in patch PSA*3*6, was
 erased. These two routines are added to this patch with updated second
 line syntax.
 
 12). During the set up of a pharmacy location there was a problem with 
 the call to obtain the outpatient pharmacy location. If there was more
 than one location that was spelled similarly the program would take the
 first one as default.
 
 13). When the user is processing invoices, they can actually enter a
 &lt;RETURN&gt; at the select pharmacy location or select master vault prompt.
 the system will continue to process normally, but an error will occur
 in SITES+1^PSAUTL1. This value must be entered for proper processing.
 The user must now up-arrow out of the selection.
 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;7 SEQ #10</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-06-22 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
When an invoice is selected to be printed, and the invoice is still in
the temporary global used to hold data prior to processing/verification,
the last invoice in the file will be printed, instead of the selected
invoice.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;14 SEQ #11</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-09-14 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
When the Inpatient dispensing data is gathered, the program checked only
one entry for each ward to find a match for a pharmacy location. A loop
has been installed to check for the proper pharmacy location.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;16 SEQ #12</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-12-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 When the Outstanding Credits [PSA OUTSTANDING CREDITS] option is
 executed, and undefined error occurs in routine PSACREDO at line PRINT+17.
 The error occurs when all items on a invoice are adjusted to zero.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;17 SEQ #13</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-12-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
When the vendor sends the synonym node entry for the invoice's entry in the
DRUG file (#50). A variable was used in the assumption that the vendor
was supplying the facility with the correct information.
An error occurs when the program tries to find the matching information
on nodes that do not exist.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;18 SEQ #14</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-12-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 When trying to match items to the National Drug file, the software was
 using old NDF globals. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;20 SEQ #15</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-12-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 When the user tries to print a report of invoices that were uploaded, 
 an undefined error could occur at HAVDEDRG+1 of the PSAUP4 routine if
 the 2 node was missing from the DRUG file (#50).
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;19 SEQ #16</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;1999-12-10 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
  When an invoice is uploaded, the program checks for the UPC and NDC. If
 these fields are not populated, the program exits. A check for the VSN
 was added to enable the program to continue.
 
  This will also cause problems in the verify portion. A check has been
 added to one of the verification routines.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;23 SEQ #17</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-01-25 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 This build contains the correct version of routine PSATI which was
 released in patch PSA*3*18. That patch had test version number five as
 the final version. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;15 SEQ #18</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-06-12 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The set-up for device selection will not allow 80 column reports to be
sent to the screen. This causes massive amounts of wasted paper
to obtain information that should be readily available to the user.
This patch will allow 80 column reports to be sent to the screen.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;24 SEQ #19</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-08-24 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 When invoices are added during processing, the DIC call used should be
 a FILE^DICN. Plus the lookup variable is set to look for an exact match.
 Order numbers such as "(B)123244556" cannot be added to the DRUG 
 ACCOUNTABILITY ORDER file (#58.811). This patch corrects the call.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;27 SEQ #20</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2000-09-05 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
When invoices are added during processing, the DIC call used should be 
a FILE^DICN. Plus the lookup variable is set to look for an exact match.  
Order numbers such as "(B)123244556" cannot be added to the DRUG 
ACCOUNTABILITY ORDER file (#58.811). This patch corrects the call.  
 
The solution to this, as stated in the first line, is to change the DIC
call to a FILE^DICN call.  
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;25 SEQ #21</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-04-30 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 There is a problem with the routine that is called when a picklist
 is filed away in Unit Dose. The routine improperly processed the incoming
 data. The processing method created incomplete data records of drug
 transactions.
 
 To correct this, the program does not rely on a temporary global being
 created. The data is extracted directly from the UNIT DOSE PICK LIST 
 STATS (#57.6) file.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;29 SEQ #22</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2001-11-06 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
1. This patch modifies the Input Transform of the following fields to
   allow three decimal digits:
 
 - STOCK LEVEL field (#2), BALANCE field (#3), REORDER LEVEL field (#4),
   QUANTITY TO REORDER field (#5) and MAXIMUM QUANTITY PER ORDER field
   (#8.5) in the DRUG sub-file (#58.8001) in the DRUG ACCOUNTABILITY
   STATS file(#58.8).
 
 - QUANTITY ORDERED field (#5), QUANTITY DISPENSED field (#19), QUANTITY
   RECEIVED field (#20) and BALANCE field (#22) in the ORDERS sub-file
   (#58.800118) of the DRUG sub-file (#58.8001) in the DRUG
   ACCOUNTABILITY STATS file(#58.8).
 
 - MONTHLY ACTIVITY field (#.01), BEGINNING BALANCE field (#1), ENDING
   BALANCE field (#3), TOTAL RECEIVED field (#5), TOTAL ADJUSTED field
   (#7), TOTAL DISPENSED field (#9), TOTAL RETURN TO STOCK field (#11)
   and TOTAL TURN IN FOR DESTRUCTION field (#12) in the MONTHLY
   ACTIVITY sub-file (#58.801) of the DRUG sub-file (#58.8001) in the
   DRUG ACCOUNTABILITY STATS file (#58.8).
 
 - This patch updates the data dictionary of the QUANTITY field (#5),
   BALANCE FORWARD field (#9), QUANTITY RECEIVED field (#27), QUANTITY RET
   TO STOCK field (#35), QUANTITY TURN IN FOR DESTROY field (#38), BALANCE
   FWD RET/STK field (#41), NEW QUANTITY field (#50), ADJUSTED BY QUANTITY
   field (#51), BAL FWD EDIT VERIFIED ORDER field (#54), ADJUSTMENT
   QUANTITY field (#57), BAL FWD CANCEL VERIFIED ORD field (#59),
   QUANTITY TRANSFERRED field (#70), ORIGINAL COUNT field (#75), WASTED
   QUANTITY field (#76), LIQUID AMOUNT field (#77) and CORRECT COUNT field
   (#79) in the DRUG ACCOUNTABILITY TRANSACTION file (#58.81).
 
2. This patch modifies the data dictionary of the BALANCE FORWARD field
   (#9) in the DRUG ACCOUNTABILITY TRANSACTION file (#58.81), to prevent
   editing through VA FileMan options.
 
3. This patch modifies the data dictionary of the the TRANSACTION NUMBER
   field (#.01) in the DRUG ACCOUNTABILITY TRANSACTION file (#58.81), to
   disallow deletion though VA FileMan options.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;21 SEQ #23</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2002-03-15 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 1. This patch modifies the method used to update a drug's NDC and other
 pricing information.
  
 The revised method of updating the NDC and price information is as
 follows:
  
 If the NDC on an invoiced item does not match the NDC field (#31) in
 the DRUG file (#50), then the NDC entry in the DRUG file (#50) will be 
 changed to the invoiced NDC.
  
 If the invoiced item's Order Unit and Dispense Units per Order Unit match
 the same fields in the DRUG file, but the price of the dispense unit has
 changed then the following process occurs:
  
  a. The new price per dispense unit is compared with the PRICE PER
     DISPENSE UNIT field (#16) in the DRUG file (#50), to see if it is
     within 5%. If it is not within the 5% difference, the PRICE PER
     DISPENSE UNIT field (#16) in DRUG file (#50) is set to the invoiced 
     price per dispense unit, and the PRICE PER ORDER UNIT field (#13)
     in the DRUG file (#50) is set to the invoiced price per order unit.
 
  b. A MailMan message is sent to members of a new mail group called:
     'PSA NDC UPDATES' to inform them of the price change. The subject of
     this message is: "DRUG file Price/NDC Update".
  
  c. Because of the problems with price calculations in the past, a post
     patch install routine has been added to correct current incorrect
     prices.
 
 2. When processing invoices, the system checks for the pharmacy locations
 that will be used during processing. If no locations are found the 
 program proceeds to exit the option. However, in the exit logic the
 system checks to see if the user has up arrowed or if something has
 failed. If the exit variable has not been set, the program continues on
 to automatically enter the invoice into VISTA.
  
 3. Another problem this created was when the user would proceed with manual
 processing of these invoices, the pharmacy location field would be empty.
 This creates an undefined global node when the program tried to find the
 location name. If pharmacy locations are not set up, the exit variable
 is not set, therefore the invoices are processed.
  
 4. When the Connect Unlinked DRUG/ITEM MASTER file Entries [PSA UNLINKED 
    LOOP] option is executed an undefined error occurs. The problem stems
    from the user not selecting a drug to link to. The solution to this
    problem is to change where the routine is called.
  
 5. When printing the Verification Error Report if the report is printed to
    the screen or a slave printer it's fine. If the report is queued to a
    printer, none of the data prints out.
  
 The problem with this was that the variable saved for the print job was
 a simple variable, not a variable array as it should be.
 
 6. Due to site integration, invoices can sometimes be processed more
 than once. The invoice file is checked during uploading to see if the
 invoice currently exists, but the check is not performed when the user
 processes the information. The solution to this is a check being added
 that will compare the invoice's Order Number, Invoice Number and the
 line items against what is stored in VistA. If a close enough match is 
 found, a comparison array of data will be displayed for the user. After
 displaying the data, the user has the option of eliminating the incoming
 invoice.
 
 7. The option Delete Un-processed Invoices [PSA DELETE INVOICES] has been
 created to delete invoices that are on file past a user specified date.
 
 8. When processing invoices, if an item has the same vendor stock number
 but different NDCs, a new synonym entry is created. When the item is
 being processed again, the system will display the same drug as two
 different choices. The problem is, that there is not enough detailed
 information provided for proper selection. The solution to this was to
 add the NDC to the display.
 
 9. When invoices are processed for multiple divisions, or by multiple
 personnel, all invoices show the same person as the processor. This
 was caused by the last function of processing. When the user finishes
 processing, the program would look at each invoice. If the invoice
 was marked as processed, the data would be moved into the proper files.
 the program did not distinguish between users. The solution to this is
 to file the data immediately for each invoice as it is marked as
 processed.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;26 SEQ #24</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-07-15 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This enhancement provides a DELPHI based redesign of the Upload Invoices 
process currently in the Drug Accountability/Inventory Interface Version 
3.0 software. This option is used to upload invoice data from the Prime 
Vendor and update VISTA Drug Accountability files.  The redesigned 
function, using DELPHI instead of ProComm script files will make 
uploading invoices simpler and faster.  
 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;31 SEQ #25</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-12-31 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 1. When sites do not process all uploaded invoices, problems arise when 
 the next batch of invoices is uploaded. Drug Accountability attempts to 
 match each item with items in the DRUG file (#50). The process will
 continue to add matching data to the item. If the invoices remain on the 
 system long enough an error will occur.
 
 The solution to this is to bypass the matching process on invoice data 
 that has already been uploaded.  
 
 2. Another problem this patch corrects is with the filing of monthly data
 on drug items. Monthly data was incorrectly stored for some items in 
 the DRUG ACCOUNTABILITY STATS file (#58.8). This patch corrects already 
 affected entries, and restricts the erroneous filing of incorrect data 
 in the future.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;33 SEQ #26</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2003-12-31 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;36 SEQ #27</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-03-30 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch will fix two undefined errors in menu option Edit Verified
Invoices.
An undefined error occurs when editing a verified invoice if the user 
changes the name of a drug and the order units are different.  This error
occurs when prompting for the Dispense Units per Order Unit.
 
When the user edits a line item and changes the drug name, the invoiced
quantity is updated in the Drug File (#50); subtracted from the invoiced 
item and added to the new item.  If the invoiced line item is not in the
Drug File (#50), an undefined error occurs when trying to subtract the
invoiced quantity.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;41 SEQ #28</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-08-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 This enhancement contains the updated GUI based changes for the Upload
 Invoices process used by Drug Accountability V. 3.0 to process invoice
 data received from the new Prime Vendor, McKesson. 
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;38 SEQ #29</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-08-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch will modify the Report Potential NDC Matches option to use the 
same criteria as the Controlled Connection by NDC Match.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;43 SEQ #30</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-08-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the problem in Drug Accountability where the menu 
"Setup/Edit a Pharmacy Location" [PSA LOCATION EDIT] generates the 
following error: $ZERROR=DAVEB+5^PSAENTO:3, %DSM-E-UNDEF, undefined  
variable Y(0,0).
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;39 SEQ #31</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-08-02 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch will modify PSA PROCESS PRIME VENDOR DATA  Process Uploaded 
Prime Vendor Invoice Data to always prompt the user when there is a change
in the Vendor Stock Number's NDC.  This is currently happening only if the
current NDC is numeric.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;34 SEQ #32</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-09-03 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
THIS PATCH CORRECTS AN UNDEFINED LOCATION ERROR.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;37 SEQ #33</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-09-24 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
 1. When sites do not process all uploaded invoices, problems arise when 
 the next batch of invoices is uploaded. Drug Accountability attempts to 
 match each item with items in the DRUG file (#50). The process will
 continue to add matching data to the item. If the invoices remain on the 
 system long enough an error will occur.
 
 The solution to this is to bypass the matching process on invoice data 
 that has already been uploaded.  
 
 2. Another problem this patch corrects is with the filing of monthly data
 on drug items. Monthly data was incorrectly stored for some items in 
 the DRUG ACCOUNTABILITY STATS file (#58.8). This patch corrects already 
 affected entries, and restricts the erroneous filing of incorrect data 
 in the future.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;48 SEQ #34</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-11-24 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses two problems:
 
1.      Uploading on invoices from the new prime vendor has lost the 
capability to automatically match invoice items to the drug file entries 
and manual editing is necessary on nearly every item on every invoice.
 
2.      The wrong VSN is shown for the selected item to be edited when 
editing verified invoices. The VSN displayed belongs to the last item 
presented in the choices for selection display.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;40 SEQ #35</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2004-12-28 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
INCORRECT QUANTITY ADDED TO DRUG IN DRUG FILE
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;49 SEQ #36</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-04-01 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch will correct a syntax error in routine PSAVERA2.
 
Multiple options with erroneous outpatient division on 
pharmacy locations.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;42 SEQ #37</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-08-13 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch address the following problems:
 
1.      68526           Price updates into the Drug file #50 are failing 
due to current logic that both order units and dispense units between the 
matched drug and the invoice must be equal before updating. Also, the
reporting and/or representation of which drugs are about to have order
units, costs, dispense units, and/or NDCs is hard to read, not concise,
and unwanted changes are being overlooked.
 
2.      85690   Drugs that are added to pharmacy locations are initially 
setup with a minimum of information and need to be completed manually by 
the pharmacy staff. A method of notification is needed to let the 
pharmacy staff know which drugs are needing completion.
 
3.      68611   Invoice items that have a zero quantity are updating 
inventory costing for dispensing. This results in a miss-representation 
of costs being presented for statistics and being billed to third party 
insurances.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;53 SEQ #38</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2005-11-15 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
  
1.      68490   Editing Verified Invoices [PSA EDIT VERIFIED INVOICE]
Saying 'NO" to processing the edit changes made for DISPENSE UNITS field 
(#14.5) and/or DISPENSE UNITS PER ORDER UNIT field (#15) of the Drug file 
(#50), does not restore those fields to their previous values.
 
2.      68779   Editing Verified Invoices [PSA EDIT VERIFIED INVOICE]
A drug that is newly picked and added newly to a pharmacy location in the 
DRUG ACCOUNTABILITY STATS file (#58.8) has several of it's indexes 
scrambled and the users are not able to select the drug within that 
pharmacy location for any further processing purposes. A post init 
routine will scan and clean up bad indexes it finds.
 
3.      100058 Drug Balances by Location [PSA DISPLAY LOCATION]
The report menu "Drug Balances by Location" show entries for inactive 
drugs that have a zero quantity. Those items are now not to be shown.
 
4.      108683 Verify Invoices [PSA VERIFY INVOICES]
Drugs that are new to a pharmacy location in the DRUG ACCOUNTABILITY 
STATS file (#58.8) are needing more data entered to complete their being 
setup for processing. Such items as current balance, stock level, and 
reorder levels are needed. A separate, individual mail message is 
currently sent regarding each drug that is newly added. The volume of 
messages is overwhelming.
 
A single consolidated mail message by invoice regarding drugs that are 
newly added is needed to replace the individual mail messages.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;47 SEQ #39</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-03-08 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
HD68504 Invoices not being able to be up loaded. This patch corrects 
problems with the algorithm used to convert invoice files received from 
McKesson. The process incorrectly inserts zeros to the transaction set 
control number, which caused the length of the number to exceed the 
required specification length. An example of the error message is shown 
below:
 
Control# 0000000000000000000000000033
The ST control# (piece 3) should be 4 to 9 characters in length.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;56 SEQ #40</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-05-26 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problem:
 
1. HD68257: Drug SYNONYM field (#9) duplicates are being created in the 
DRUG file (#50). The process of verifying an invoice that is adding a new 
drug synonym to the DRUG file (#50) was found to be adding duplicates in 
the same invoice and between invoices that were processed at the same 
time. The verification process now insures duplicates are not being 
created.
 
2. HD128777: Pharmacy locations, in the DRUG ACCOUNTABILITY STATS file 
#58.8, may have their associated entries in the drug file updated by zero 
quantity invoice items if the location is not marked for tracking 
inventory or re-order levels.
 
NOTE: A post init will review the Drug file (#50) and remove all but the 
first of identical synonym duplicates from under a drug. A "PSA*3*56 
Delete Duplicate Drug Synonyms report" mailman message will be sent to 
the person who performs the installation identifying what drug-synonyms 
had identical synonyms deleted. It will also indicate if there were none 
found to be removed.
 
EXAMPLE 1)      Duplicate synonyms found and were deleted.
Subj: PSA*3*56 Delete Duplicate Drug Synonyms report  [#2019687] 
03/17/06@17:11
11 lines
From: PSA*3*56 POST INIT  In 'IN' basket.   Page 1
--------------------------------------------------------------------------
PSA*3*56 DELETE DUPLICATE SYNONYMS REPORT
The following Drug-Synonyms have had identical synonyms removed from the 
drug.
Drug Name                       DRG#,SYN#   NDC            VSN
ACETAMINOPHEN, CODEINE 60MG TAB 3994,7      00406-0484-10  2792513
OU: CS        PPOU: $9.60                   DUOU: 1000     PPDU: $.01
ACETAMINOPHEN, CODEINE 60MG TAB 3994,11     00406-0484-10  2792513
OU: BT        PPOU: $9.60                   DUOU: 1000     PPDU: $.01
ACETAMINOPHEN, CODEINE 60MG TAB 3998,7      00406-0484-10  2792513
OU: CS        PPOU: $9.60                   DUOU: 1000     PPDU: $.01
ACETAMINOPHEN, CODEINE 60MG TAB 3998,11     00406-0484-10  2792513
OU: BT        PPOU: $9.60                   DUOU: 1000     PPDU: $.01
 
EXAMPLE 2) No duplicate synonyms found and none were deleted.
Subj: PSA*3*56 Delete Duplicate Drug Synonyms report  [#2019688] 
03/17/06@17:15
3 lines
From: PSA*3*56 POST INIT  In 'IN' basket.   Page 1
--------------------------------------------------------------------------
PSA*3*56 DELETE DUPLICATE SYNONYMS REPORT
 
There were no duplicate drug-synonyms found. No synonyms were removed.
 
Enter message action (in IN basket): Ignore//
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;51 SEQ #41</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-07-11 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This option gives the user the ability to select and store drugs that are
to be returned to the manufacturer.
 
The OUTDATED MEDICATIONS option is located within the PHARMACY LOCATION
MAINTENANCE menu and locked with the PSAMGR key.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;50 SEQ #42</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-08-07 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
   
1. HD 68113 Invoice select prompt (1-0)
The software is not properly detecting when all invoices being worked 
with have been processed. It is asking the user to make a selection when 
there are no invoices left to select from. The software errors out with 
an undefined if the user continues.
 
2. HD 93607 A faulty message 'The invoice has not been placed in a 
Processed status!' is presented.
Processing invoices through a particular path and question sequence will 
generate the above message which is wrong as the invoice has just 
completed processing necessary to be able to proceed to the verification 
stage.
 
3. HD 91604 An undefined error occurs when the selection list of invoices 
to send on to verification has a missed node in the display numbering 
sequence of the invoices. The user is able to put in a range from the 
beginning of the list to the last number in the list and the processing 
tries to work on all numbers in between. It hits the number of the 
missing node and it breaks.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;57 SEQ #43</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-08-07 00:00:00</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch will correct the problem of the Post Verify e-mail
not sent when changes are made to the invoice.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;58 SEQ #44</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-11-22 22:57:41</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1. HD 67762 PSANDF 12 digit NDC
The emerging standard is becoming 11 digits for the National Drug Code 
(NDC). The code had previously been set to create/require 12 digits by 
adding leading zeros. It is now set to create/require 11 digit NDCs. 
 
2. HD 68340 Forced selection of unique drug names.
The software is completing the selection of a unique drug name without 
giving the user the chance to verify the selection. The drug name is 
unique and the few characters input by the user is enough to select the 
drug. Once the drug is selected it is not easy to navigate the software 
to a place where the drug can be reselected if the selection completed by 
the software is not what the user wanted.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;54</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2006-11-22 23:07:18</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch is addressing the following problems:
 
1. HD 112456 Reinstate the display of vendor item Dispense Units per 
Order Unit (DUOU) during processing. PSA*3*48 initiated a temporary plan 
to aid sites in starting Drug Accountability by shipping in a side file 
from the vendor and display DUOU for matching drugs when possible during 
processing. It has been requested that the vendor drug description also 
be included to aid in matching items to drugs.
 
2. HD 118113. The sites have requested that the verification screens also 
display the vendor DUOU and drug description.
Both processing and verification screens will have the following 
information line displayed. The information displayed depends on the 
availability of vendor information uploaded.
 
========================= 
SAMPLE OF THE ADDED LINE: 
========================= 
There are two versions of the display line added.
1)      The line if the drug information is available
 PV-Drug-Descrip:    ACETAM? TB #4    ROX RN4X25        PV-DUOU: 100
 
2)      The line if the drug information is not available.
PV-Drug-Descrip:    Not available. Item is OTC or new after February 2006.
 
===========================
SAMPLE of modified screen:
===========================
The same line of information is presented in both processing and 
verifying screens.
 
Order#: C563685000  Invoice#: 7246433050  Invoice Date: Sep 07, 2005
-----------------------------------------------------------------------
 
1  ACETAMINOPHEN, CODEINE 60MG TAB (Controlled Substance)
Qty Invoiced: 10                      UPC: 300054802324
Order Unit  : TU                      NDC: 00054-8023-24
Unit Price  : $9.60                   VSN: 1334150
 
PV-Drug-Descrip:    ACETAM? TB #4    ROX RN4X25        PV-DUOU: 100
 
Dispense Units: TAB
Dispense Units Per Order Unit: 2000
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;61 SEQ #46</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-06-27 23:12:57</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
Problem HD129689 - Undefined error while processing invoice
--------------------------------------------------------------
During the processing of an invoice, it is possible to receive
The following message:
Undefined N1+3 DICNO Unable to Process Invoice
This error is caused by the system not properly cleaning up variables
used by the program DICN0.
 
Resolution HD129689 - Undefined error while processing invoice
--------------------------------------------------------------
The program PSAPROC7 will be modified to cleanup the variables prior
to the call to DICN0.
 
Problem HD92886 - Leading zero's in supply item description 
--------------------------------------------------------------
If a line item on an invoice is edited to be a supply item and
the supply item description starts with a numeric (Example: 16
vial dram, or 10x10 sponge) the system interprets the leading
numeric's as an internal entry number to the Drug File.  This
will cause the software to erroneously select the wrong drug.
 
Resolution HD92886 - Leading zero's in supply item description
--------------------------------------------------------------
The code has been modified to ignore the fact that the supply
item description starts with a leading numeric.
 
Problem HD68635 - Undefined error while editing invoices
--------------------------------------------------------------
In rare cases, the UPC and/or the NDC code in an invoice has
no value.  If this is the case, the software will error out
with an undefined error while editing an invoice to be verified.
 
Resolution HD68635 - Undefined error while editing invoices
--------------------------------------------------------------
The code in question will be strengthened to not error out when
this scenario occurs.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;60 SEQ #47</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-09-04 22:45:17</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  67941  PSAPROC1   undefined in PSAPROC1
If a Controlled Substance (CS) drug has not been assigned to a master 
vault, the  subsequent code path  is killing variables it will be needing 
later when it returns from the call to perform vault selection.
 
2.  68039  PSAPROC3   default date
The data element in invoices that represents the receive date, under 
terms of the McKesson contract, is the date they deposit the invoice into 
their output directories for sites to access. The default date in VistA 
DA terms had been and is, the received at site date. Management has
determined it is best to require the users to manually enter the receive 
date than to present a default date which is never correct and should not 
be accepted.
 
3.  68532  PSADRUGP   &lt;UNDEFINED&gt;DISP~PSADRUGP
The "Enter/Edit a Drug" [PSA PV DRUG ENTER/EDIT] errors when the drugs
inactivation date is less then the day of the data entry.
 
4. 131384  PSAVER2   Error using Verify Invoice [PSA VERIFY INVOICES] 
When verifying invoices, the application errors if the data in the
processed invoice contains a semicolon. 
 
5. 134108  PSAVER, PSAVER1, PSAVER4      Invoice approved twice
During Invoice Verification, multiple users are aloud to select the same
invoice and verify it.  The quantities in the DRUG file (#50) are updated 
each time the invoice is verified.
 
6.   154985     PSAVER1    Invoice not verified, but message appears
Invoices are being marked as verified at the line item level when using 
the Verify Invoices [PSA VERIFY INVOICES] option and selecting an
invoice from the &lt;&lt;&lt; EDIT INVOICES TO BE VERIFIED SCREEN &gt;&gt;&gt;
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;64 SEQ #48</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-09-05 01:12:13</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
With the deployment of Cache version 5, it was discovered that the short
lock timeout values could generate a lock failure. Patch DI*22*147, which
has already been released, provided a solution to resolve this issue and
future lock issues.
 
This patch instituted a new default lock timeout of three seconds based on
a global node setting of ^DD("DILOCKTM")=3.
 
In order to avoid the lock issue in Drug Accountability, this patch
modifies all routines that currently use a lock timeout value of less than
3 seconds to check for the node ^DD("DILOCKTM") and to use the value
defined there, otherwise the lock timeout value is set to a default value
of 3 seconds.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;65 SEQ #49</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2007-09-05 01:37:01</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  186350   DA INVOICES UNKNOW STATUS
.There are two separate issues 
  a. The invoice status remains LOCKED VERIFYING when there are errors
     in the invoice.  This LOCKED VERIFYING status does not allow any
     further action until the invoice status has been reset to PROCESSED
     or VERIFIED.
  b. When an invoice is in a LOCKED VERIFYING status, the Print Orders
     report shows the status as UNKNOWN.
 
2.  187185   Can only verify one invoice at a time after PSA*3*60
 When using the EDIT INVOICES TO BE VERIFIED SCREEN and the user selects
 multiple invoices to edit, the application quits after editing the first
 invoice.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;63 SEQ #50</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2008-05-26 15:17:13</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  68175  PSAENTO    Time Out Issue
User reported that the "Set Up/Edit a Pharmacy Location" [PSALOCATION 
EDIT] option does not quit properly when the application times out at
the INPATIENT SITE NAME prompt.
 
2.  98252  PSAVERA    Daily Activity Log does not record change on CS 
invoice 
When using the "Edit Verified Invoices" [PSA EDIT VERIFIED INVOICE] 
option, the application does not remove the correct quantity which
results in inaccurate quantities being recorded. 
 
3. 119930  PSAPROC4   Multiple NDC match selection needs DUOU displayed
When using the "Process Uploaded Prime Vendor Invoice Data" [PSA PROCESS 
PRIME VENDOR DATA] option, the user is presented a list of drugs and 
related information if there is multiple synonyms exist. Currently the 
Dose Unit Order Unit (DUOU) is not displayed in that information.  The 
lack of this informationcan result in the wrong drug being selected 
during invoice processing.
 
4. 191994  PSAVERA   Duplicate receipt issue
When using the Edit Verified Invoices [PSA EDIT VERIFIED INVOICE] option 
to edit an invoice that has not been verified, the DRUG ACCOUNTABILITY
TRANSACTION file (#58.81) is updated.  Then when the user verifies the 
invoice the DRUG ACCOUNTABILITY TRANSACTION file (#58.81) is updated 
again causing duplicate transactions for the invoice item(s) that the 
edit was done on.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;67 SEQ #51</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2008-05-26 16:13:12</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch modifies the screens within the processing and verification
processes within Drug Accountability. Additional drug information is
now being included in the invoice files received from the prime vendor.
 
The additional fields are:
 Generic Description
 Item Description
 Prime Vendor Units (i.e. # bottles in sell unit)
 Inner Pack   (i.e. # pills in bottle)
 
Currently, the Item Description and the inner pack fields are stored in
a temporary global which was setup in patch PSA*3*54. This global is no
longer used. The addition of the four fields is intended to assist the
user with the matching of incoming invoice items to the Drug (#50) file.
Below is an example of what the screens look like prior to installation
of this patch.
 
                       &lt;&lt;&lt; PROCESS LINE ITEM SCREEN &gt;&gt;&gt;
Order#: 3TC01  Invoice#: 7289249573  Invoice Date: Oct 05, 2007
6  HYDROCORTISONE
Qty Invoiced: 1                       UPC: 30472034356
Order Unit  : EA                      NDC: 00472-0343-56
Unit Price  : $0.67                   VSN: 1279124
 
PV-Drug-Descrip: HYDROCORT AC CRM 1%  ALP 30GM@  PV-DUOU: 28.4
 
After patch installation:
 
                       &lt;&lt;&lt; PROCESS LINE ITEM SCREEN &gt;&gt;&gt;
Order#: 3TC01  Invoice#: 7289249573  Invoice Date: Oct 05, 2007
6  HYDROCORTISONE
Qty Invoiced: 1                       UPC: 30472034356
Order Unit  : EA                      NDC: 00472-0343-56
Unit Price  : $0.67                   VSN: 1279124
 
PV-Drug-Description  : HYDROCORT AC CRM 1%  ALP 30GM@  PV-DUOU : 28.4
PV-Drug-Generic Name : HYDROCORTISONE                  PV-Units: 1
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;66 SEQ #52</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2008-07-22 07:51:14</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-1.html">USER,ONE</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1. 167457  Non CS drugs appear on narcotic dispensing/receiving report
The PSA IV ALL LOCATIONS [PSA IV ALL LOCATIONS] background job colliding
with CS dispensing.
 
2. 205861  ^PSDRUG LOCKS
PSA Verify Invoice processing is not unlocking the drug when finished.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;68 SEQ #53</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-04-21 16:02:27</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  180658 - Outdated Medications Option Not Working
The Outdated Medication [PSA OUTDATED MEDICATIONS] option, which allows
for documentation of the return of non-controlled substances, used the CS
Destruction file (#58.86).  This file will not allow the user's name to be
recorded.
 
2.  172859 - Outdated drug list for integrated sites
The drug accountability list does not differentiate between the 
integrated sites.
 
3. 184524 - NDC changed from numbers to letters
Drug accountability invoice processing is changing the NDC from numeric 
to letters.
 
4. 222558 - Supply item match to drug file
The PRE Verify and POST Verify Variance Reports inaccurately report
changes for supply items that have leading numerics.
 
5. 229658 - Outdated Medications
The Outdated Medications [PSA OUTDATED MEDICATIONS] option does not 
display
all possible matches for a drug if the DRUG file (#50) index "C" is a
match to the information entered at the "Scan Drug barcode or enter a drug
name" prompt.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;70 SEQ #54</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-04-23 13:56:49</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  HD257764 - UNDEF ERROR
When editing the ORDER UNIT for a Supply Item of a verified order, the
application errors with an undefined error.
 
2.  HD255967 - UNDEF ERROR &lt;UNDEFINED&gt;EDIT1+36^PSAUTL1
During Order Processing if 2 users select same orders to process and 1
user is editing an order, the application will error.
 
3. HD266899 - Error when running PSA IV ALL LOCATIONS
When running the "Outdated Medications" report and it quits unexpectedly,
the ^TMP("PSA",$J global is left behind causing the "PSA IV ALL LOCATIONS"
option to error.
 
4. HD265183 - Blank Order Unit on zero qty received causes supplies
              to appear on error report
When an invoice contains a blank Order Unit and a zero quantity, all 
supply items that follow, are included in the error report.
 
5. HD273421 - Cost Calculated Incorrectly on Outdated Meds
The cost on the Items To Be Returned report should be calculating based
on number of Dispense Units returned multiplied by Price Per Dispense
Unit from file 50. Instead, it is multiplying the number of containers
by the Price Per Dispense Unit:
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;69 SEQ #55</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2009-07-07 16:54:29</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
The FY08 Q4 Enhancement Release includes the following enhancement in the
Drug Accountability V. 3.0 application.
 
A new module is being added to the Drug Accountability application to 
address one of the findings in the GAO Report GAO-04-755 dated July 2004
related to implementing a better control over Return Drug Credits. The new
module is called Return Drug Credit Menu and contains the following 4
options.
 
    1      Batch Work List            [PSA RET DRG BATCH WORKLIST]
    2      Batch Complete List        [PSA RET DRG BAT COMPLETE LIST]
    3      View/Update Batch          [PSA RET DRG VIEW/UPDATE BATCH]
    4      Return Drug Credit Report  [PSA RET DRG REPORT]
 
The Batch Work List [PSA RET DRG BATCH WORKLIST] option will be used to
process open return batches, which are assigned a statuses of 'AWAITING
PICKUP' and 'PICKED UP'.
 
The Batch Complete List [PSA RET DRG BAT COMPLETE LIST] option allows 
users to access and update batches with any status.
 
The View/Update Batch [PSA RET DRG VIEW/UPDATE BATCH] option is used for
single batch processing, independent of its status.
 
The Return Drug Credit Report [PSA RET DRG REPORT] option provides
the users with summary and detailed reports of all return batches.
 
Security Keys:
-------------
In order to have access to the new options, a user must have the PSORPH
or PSARET security key. The PSORPH key is an existing key in the
Outpatient Pharmacy V. 7.0 application. The PSARET is a new security key
in the Drug Accountability application, will be transported in this patch
and should be assigned to users who will be responsible for returning
drugs to the contractor.
 
New Files:
---------
The following two new files are being added to the Drug Accountability
V. 3.0 application to support the functionality delivered by this patch.
 
 
                                UP    SEND  DATA                USER
                                DATE  SEC.  COMES   SITE  RSLV  OVER
FILE #  FILE NAME               DD    CODE  W/FILE  DATA  PTRS  RIDE
--------------------------------------------------------------------
58.35   RETURN DRUG             YES   YES   NO
58.36   RETURN DRUG CONTRACTOR  YES   YES   NO
 
 
The RETURN DRUG file (#58.35) is used to store all the information
about drugs being returned to the manufacturer while the RETURN DRUG
CONTRACTOR file (#58.36) is used to store the list of contractors
that the VA Medical Center (VAMC) uses for returning drugs for credit.
Most likely there will be only one contract active at a time for most,
if not all, VAMCs.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;72 SEQ #56</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2010-01-28 14:48:03</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  HD335328 - Routine patch list needs editing
  When PSA*3*69 was release there was five new routines introduced.
  The format of the second line of five Routines sent out with patch
  PSA*3*69 need to be corrected. Instead of *69* they need to be *69*.
 
2.  HD342000 - Dispensed units not automatically subtracting from
               inventory
  The Drug Accountability Transaction History report in not correctly
  calculating the drug balance for dispensed drugs.  Currently the report
  is adding the dispensed quantity instead of deducting it.
</pre>
</dt>
</li>
<li>
<dt>PATCH APPLICATION HISTORY:  &nbsp;&nbsp;71 SEQ #57</dt>
<dt>DATE APPLIED:  &nbsp;&nbsp;2011-03-02 17:08:49</dt>
<dt>APPLIED BY:  &nbsp;&nbsp;<a href="200-17.html">USER,SEVENTEEN</a></dt>
<dt>DESCRIPTION:  &nbsp;&nbsp;<pre>
This patch addresses the following problems:
 
1.  HD211457 - Locked Invoice
 Sites are reporting that the invoices are being left in a LOCK
 VERIFYING status.
 
2.  HD285500 - Can't received drug (CS) into vault
 When a invoice was downloaded and processed by a tech, the quantity
 received was changed to 0 on one item because it was going to be
 sent back.  This was a mistake. It should be received in and then out.
 Then the verifier did the verification and changed the qty received to
 reflect the original qty received - correcting the mistake.
 After verifying the invoice, the user checked the Controlled Substance
 package and found the drug did not show as being received.
  
3.  HD322644 - Run away PSA IV ALL LOCATIONS - All Location Dispense/Purge
 The PSA IV ALL LOCATIONS - All Location Dispense/Purge nightly job does
 not complete.
 
4. HD279969 - verifying invoices with blank order unit no longer on
              discrepancy report
 When processing a invoice with a blank ORDER UNIT the system returns a
 zero and does not generate a discrepancy report.
</pre>
</dt>
</li>
</ol>
</dd></dl>
</li>
</ol>
</td>
</tr>
<tr>
<td>ENVIRONMENT CHECK ROUTINE</td>
<td>PSAINPRE</td>
</tr>
<tr>
<td>ENVIRONMENT CHECK DONE DATE</td>
<td>1996-07-18 17:31:41</td>
</tr>
<tr>
<td>POST-INITIALIZATION ROUTINE</td>
<td>PSAIPOST</td>
</tr>
<tr>
<td>POST-INIT COMPLETION DATE</td>
<td>1996-07-18 17:34:37</td>
</tr>
</tbody>
</table>
</div>
</div>
</body></html>